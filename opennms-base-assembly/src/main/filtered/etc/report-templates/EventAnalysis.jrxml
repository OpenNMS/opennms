<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="EventAnalysis" pageWidth="595" pageHeight="842" whenNoDataType="NoDataSection" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.948717100000002"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="975"/>
	<property name="net.sf.jasperreports.chart.theme" value="default"/>
	<template><![CDATA[$P{ONMS_REPORT_DIR} + "/assets/styles/defaultStyles.jrtx"]]></template>
	<style name="Eventdisplay Link Style" forecolor="#000000" hAlign="Left" vAlign="Middle" fontSize="10">
		<conditionalStyle>
			<conditionExpression><![CDATA[!$F{eventdisplay}.equals("Y")]]></conditionExpression>
			<style forecolor="#7B7B7B"/>
		</conditionalStyle>
	</style>
	<style name="table_3line_grid" mode="Opaque" forecolor="#000000" backcolor="#FFFFFF" hAlign="Left" vAlign="Middle" fontSize="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false">
		<box>
			<topPen lineWidth="0.0" lineColor="#000000"/>
			<bottomPen lineWidth="0.0" lineColor="#999999"/>
		</box>
		<conditionalStyle>
			<conditionExpression><![CDATA[new Boolean($V{top25_style_helper_COUNT}%new Integer("3") == new Integer("0"))]]></conditionExpression>
			<style>
				<box>
					<bottomPen lineWidth="1.25" lineColor="#000000"/>
				</box>
			</style>
		</conditionalStyle>
	</style>
	<style name="table_5line_grid" mode="Opaque" forecolor="#000000" backcolor="#FFFFFF" hAlign="Left" vAlign="Middle" fontSize="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false">
		<box>
			<topPen lineWidth="0.0" lineColor="#000000"/>
			<bottomPen lineWidth="0.0" lineColor="#999999"/>
		</box>
		<conditionalStyle>
			<conditionExpression><![CDATA[new Boolean($V{top25_style_helper_COUNT}%new Integer("5") == new Integer("0"))]]></conditionExpression>
			<style>
				<box>
					<bottomPen lineWidth="1.25" lineColor="#000000"/>
				</box>
			</style>
		</conditionalStyle>
	</style>
	<subDataset name="top25_events">
		<parameter name="OPENNMS_URL_BASE" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT
	eventuei,
	eventdisplay,
	eventsource,
	COUNT(*) AS tally
FROM
	events
GROUP BY
	eventuei,
	eventsource,
	eventdisplay
ORDER BY
	tally DESC
LIMIT
	25;]]>
		</queryString>
		<field name="eventuei" class="java.lang.String"/>
		<field name="eventdisplay" class="java.lang.String"/>
		<field name="eventsource" class="java.lang.String"/>
		<field name="tally" class="java.lang.Long"/>
		<variable name="top25_style_helper_COUNT" class="java.lang.Integer" calculation="Count">
			<variableExpression><![CDATA[$F{eventuei}]]></variableExpression>
		</variable>
	</subDataset>
	<subDataset name="top25_event_hours">
		<parameter name="OPENNMS_URL_BASE" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT
	eventuei,
	eventdisplay,
	DATE_TRUNC('hour', eventtime) AS hour,
	count(*) AS count
FROM
	events
WHERE
	EXTRACT(epoch FROM eventtime) > EXTRACT(epoch FROM eventtime - INTERVAL '24 hours')
GROUP BY
	eventuei,
	eventdisplay,
	hour
ORDER BY
	count DESC
LIMIT 25;]]>
		</queryString>
		<field name="eventuei" class="java.lang.String"/>
		<field name="eventdisplay" class="java.lang.String"/>
		<field name="hour" class="java.sql.Timestamp"/>
		<field name="count" class="java.lang.Long"/>
		<variable name="top25_style_helper_COUNT" class="java.lang.Integer" calculation="Count">
			<variableExpression><![CDATA[$F{eventuei}]]></variableExpression>
		</variable>
	</subDataset>
	<subDataset name="events_by_source">
		<parameter name="OPENNMS_URL_BASE" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT
	eventsource,
	SUM(tally) AS tally
FROM
	(SELECT
		CASE
			WHEN
				eventsource = 'syslogd' OR
				eventsource = 'trapd' OR
				eventsource = 'perl_send_event'
			THEN
				events.eventsource
			ELSE
				'other'
		END AS eventsource,
		count(*) AS tally
	FROM
		events
	GROUP BY
		eventsource)
	AS event_source
GROUP BY
	eventsource
ORDER BY
	tally DESC]]>
		</queryString>
		<field name="eventsource" class="java.lang.String"/>
		<field name="tally" class="java.math.BigDecimal"/>
		<variable name="eventsource_SUM" class="java.math.BigDecimal" calculation="Sum">
			<variableExpression><![CDATA[$F{tally}]]></variableExpression>
		</variable>
		<group name="eventsource">
			<groupExpression><![CDATA[$F{eventsource}]]></groupExpression>
		</group>
	</subDataset>
	<subDataset name="top25_events_by_node_uei">
		<parameter name="OPENNMS_URL_BASE" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT
	node.nodeid,
	node.nodelabel,
	eventdisplay,
	events_by_node.eventuei,
	events_by_node.tally
FROM
	(SELECT
		COUNT(*) AS tally,
		events.eventuei,
		events.eventdisplay,
		events.nodeid
	FROM
		events
	GROUP BY
		events.eventuei,
		events.nodeid,
		events.eventdisplay
	ORDER BY
		tally DESC
	LIMIT
		25)
	AS events_by_node
JOIN
	node
ON
	(node.nodeid = events_by_node.nodeid)
ORDER BY
	tally DESC]]>
		</queryString>
		<field name="nodeid" class="java.lang.Integer"/>
		<field name="nodelabel" class="java.lang.String"/>
		<field name="eventdisplay" class="java.lang.String"/>
		<field name="eventuei" class="java.lang.String"/>
		<field name="tally" class="java.lang.Long"/>
		<variable name="top25_style_helper_COUNT" class="java.lang.Integer" calculation="Count">
			<variableExpression><![CDATA[$F{nodeid}]]></variableExpression>
		</variable>
	</subDataset>
	<subDataset name="top25_events_by_node">
		<parameter name="OPENNMS_URL_BASE" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT
	node.nodelabel,
	node.nodeid,
	events_by_node.tally
FROM
	(SELECT
		COUNT(*) AS tally,
		events.nodeid
	FROM
		events
	GROUP BY
		events.nodeid
	ORDER BY
		tally DESC
	LIMIT
		25)
	AS events_by_node
JOIN
	node
ON
	(node.nodeid = events_by_node.nodeid)
ORDER BY
	tally DESC]]>
		</queryString>
		<field name="nodelabel" class="java.lang.String"/>
		<field name="nodeid" class="java.lang.Integer"/>
		<field name="tally" class="java.lang.Long"/>
		<variable name="top25_style_helper_COUNT" class="java.lang.Integer" calculation="Count">
			<variableExpression><![CDATA[$F{nodelabel}]]></variableExpression>
		</variable>
	</subDataset>
	<subDataset name="events_eph">
		<parameter name="OPENNMS_URL_BASE" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT
	week_day,
	AVG(per_hour)::DOUBLE PRECISION AS avg_per_hour
FROM
	(SELECT
		SUM(time_flag) AS per_hour,
		time_flag,
		day_hours,
		week_day
	FROM
		(SELECT
			CASE
				WHEN
					hours_time is not NULL
				THEN
					CAST('1' AS INTEGER)
				ELSE
					CAST('0' AS INTEGER)
			END AS time_flag,
			DATE_TRUNC('days',day_hours) AS week_day,
			*
		FROM
			(SELECT
				DATE_TRUNC('hours', mytimequery.mytime)::TIMESTAMP
				AS day_hours
			FROM
				(SELECT
					(now() - myintervalquery.myinterval::INTERVAL)::TIMESTAMP AS mytime
				 FROM
					(SELECT
						(s.t ||' hours')::INTERVAL AS myinterval
					FROM
						generate_series(0,720) AS s(t)
					)
					AS myintervalquery
				)
				AS mytimequery
			ORDER BY
				day_hours ASC
			) AS day_hours
		LEFT JOIN
			(SELECT
				DATE_TRUNC('hours', eventtime) AS hours_time,
				*
			FROM
				events
			WHERE
				eventtime > NOW() - INTERVAL '30 days')
			AS
				events_week
		ON
			(events_week.hours_time = day_hours))
		AS
			event_week
	GROUP BY
		day_hours,
		week_day,
		time_flag
	ORDER BY
		day_hours)
	AS
		events_per_day_hour
GROUP BY
	week_day
ORDER BY
	week_day DESC]]>
		</queryString>
		<field name="week_day" class="java.sql.Timestamp"/>
		<field name="avg_per_hour" class="java.lang.Double"/>
	</subDataset>
	<subDataset name="events_per_day">
		<parameter name="OPENNMS_URL_BASE" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT
	COALESCE(tally,tally,CAST('0' AS INTEGER)) AS tally,
	days,
	COALESCE(eventsource,eventsource,'other') AS eventsource
FROM
	(SELECT
		DATE_TRUNC('days', mytimequery.mytime)::TIMESTAMP AS days
	FROM
		(SELECT
			(now() - myintervalquery.myinterval::INTERVAL)::TIMESTAMP AS mytime
		 FROM
			(SELECT
				(s.t ||' days')::INTERVAL AS myinterval
			FROM
				generate_series(0,30) AS s(t)
			) AS myintervalquery
		) AS mytimequery
	ORDER BY
		days ASC
	) AS days
LEFT JOIN
	(SELECT
		COUNT(*) AS tally,
		day_time,
		eventsource
	FROM
		(SELECT
			DATE_TRUNC('day', eventtime) AS day_time,
			CASE
				WHEN
					eventsource = 'syslogd' OR
					eventsource = 'trapd' OR
					eventsource = 'perl_send_event'
				THEN
					events.eventsource
				ELSE
					'other'
			END AS eventsource
		FROM
			events
		WHERE
			eventtime > NOW() - INTERVAL '30 days'
		GROUP BY
			events.eventtime,
			events.eventsource)
		AS events_day
	GROUP BY
		day_time,
		eventsource
	ORDER BY
		day_time)
	AS
		events_by_source
ON
	(events_by_source.day_time = days)
ORDER BY
	eventsource]]>
		</queryString>
		<field name="tally" class="java.lang.Long"/>
		<field name="days" class="java.sql.Timestamp"/>
		<field name="eventsource" class="java.lang.String"/>
		<group name="eventsource">
			<groupExpression><![CDATA[$F{eventsource}]]></groupExpression>
		</group>
	</subDataset>
	<subDataset name="unknown_mibs">
		<parameter name="OPENNMS_URL_BASE" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT
	tally,
	COALESCE(nodelabel,nodelabel,'<unknown>') AS node,
	COALESCE(unknown_traps.nodeid,unknown_traps.nodeid,null) AS nodeid,
	unknown_traps.eventuei,
	ipaddr
FROM
	(SELECT
		COUNT(*) AS tally,
		nodeid,
		ipaddr,
		eventuei
	FROM
		events
	WHERE
		events.eventuei = 'uei.opennms.org/generic/traps/EnterpriseDefault'
	GROUP BY
		nodeid,
		ipaddr,
		eventuei
	ORDER BY
		tally DESC
	LIMIT
		25)
	AS
		unknown_traps
LEFT JOIN
	node
ON
	(node.nodeid = unknown_traps.nodeid)]]>
		</queryString>
		<field name="tally" class="java.lang.Long"/>
		<field name="node" class="java.lang.String"/>
		<field name="nodeid" class="java.lang.Integer"/>
		<field name="eventuei" class="java.lang.String"/>
		<field name="ipaddr" class="java.lang.String"/>
		<variable name="top25_style_helper_COUNT" class="java.lang.Integer" calculation="Count">
			<variableExpression><![CDATA[$F{node}]]></variableExpression>
		</variable>
	</subDataset>
  <parameter name="ONMS_REPORT_DIR" class="java.lang.String" isForPrompting="false">
    <parameterDescription><![CDATA[The directory where all reports can be found]]></parameterDescription>
    <defaultValueExpression><![CDATA["${install.dir}/etc/report-templates"]]></defaultValueExpression>
  </parameter>
	<parameter name="COMPANY_LOGO" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[Company logo]]></parameterDescription>
		<defaultValueExpression><![CDATA[$P{ONMS_REPORT_DIR} + "/assets/images/company-logo.png"]]></defaultValueExpression>
	</parameter>
	<parameter name="OPENNMS_URL_BASE" class="java.lang.String">
		<parameterDescription><![CDATA[OpenNMS URL base for embedded links]]></parameterDescription>
		<defaultValueExpression><![CDATA["http://localhost:8980/opennms"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
	version(),
	current_database(),
	current_schema(),
	current_user,
	inet_server_addr(),
	inet_server_port(),
	now()-pg_postmaster_start_time() AS uptime,
	pg_size_pretty(pg_database_size(current_database()))]]>
	</queryString>
	<field name="version" class="java.lang.String"/>
	<field name="current_database" class="java.lang.String"/>
	<field name="current_schema" class="java.lang.String"/>
	<field name="current_user" class="java.lang.String"/>
	<field name="inet_server_addr" class="java.lang.Object"/>
	<field name="inet_server_port" class="java.lang.Integer"/>
	<field name="uptime" class="org.postgresql.util.PGInterval"/>
	<field name="pg_size_pretty" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="59" splitType="Stretch">
			<staticText>
				<reportElement style="Title" x="0" y="0" width="392" height="29"/>
				<textElement/>
				<text><![CDATA[Event Analysis]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="52" width="555" height="1"/>
			</line>
			<textField pattern="dd/MM/yyyy h.mm a">
				<reportElement style="Body" x="0" y="29" width="392" height="20"/>
				<textElement/>
				<textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="392" y="0" width="164" height="49"/>
				<imageExpression class="java.lang.String"><![CDATA[$P{COMPANY_LOGO}]]></imageExpression>
			</image>
		</band>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="662">
			<pie3DChart>
				<chart isShowLegend="true">
					<reportElement positionType="Float" x="0" y="25" width="320" height="130"/>
					<chartTitle>
						<font size="8"/>
					</chartTitle>
					<chartSubtitle>
						<font size="8"/>
					</chartSubtitle>
					<chartLegend position="Bottom">
						<font size="8"/>
					</chartLegend>
				</chart>
				<pieDataset>
					<dataset>
						<datasetRun subDataset="events_by_source"/>
					</dataset>
					<keyExpression><![CDATA[$F{eventsource}]]></keyExpression>
					<valueExpression><![CDATA[$F{tally}]]></valueExpression>
					<labelExpression><![CDATA[$F{eventsource}]]></labelExpression>
					<sectionHyperlink>
						<hyperlinkTooltipExpression><![CDATA[$F{tally}.toString()]]></hyperlinkTooltipExpression>
					</sectionHyperlink>
				</pieDataset>
				<pie3DPlot isCircular="false" labelFormat="{0} ({2})" legendLabelFormat="{0} {1} ({2})">
					<plot foregroundAlpha="0.75">
						<seriesColor seriesOrder="0" color="#66CCFF"/>
						<seriesColor seriesOrder="1" color="#FFCC99"/>
						<seriesColor seriesOrder="2" color="#99FF99"/>
						<seriesColor seriesOrder="3" color="#CCCCCC"/>
						<seriesColor seriesOrder="4" color="#FFFFCC"/>
					</plot>
					<itemLabel color="#000000" backgroundColor="#FFFFFF">
						<font size="8"/>
					</itemLabel>
				</pie3DPlot>
			</pie3DChart>
			<componentElement>
				<reportElement key="event_source_table" positionType="Float" x="330" y="25" width="226" height="134"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="events_by_source">
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="144">
						<jr:tableHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="144" height="20"/>
								<textElement/>
								<text><![CDATA[Event source]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:tableFooter height="16" rowSpan="1">
							<box>
								<topPen lineWidth="1.0"/>
								<bottomPen lineWidth="1.0" lineStyle="Double"/>
							</box>
							<staticText>
								<reportElement style="Table-Summary" x="0" y="0" width="144" height="16"/>
								<textElement>
									<font size="10" isBold="true"/>
								</textElement>
								<text><![CDATA[Total]]></text>
							</staticText>
						</jr:tableFooter>
						<jr:detailCell height="20" rowSpan="1">
							<textField>
								<reportElement style="Table-Body" x="0" y="0" width="144" height="18"/>
								<textElement>
									<font size="10"/>
								</textElement>
								<textFieldExpression class="java.lang.String"><![CDATA[$F{eventsource}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="80">
						<jr:tableHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="80" height="20"/>
								<textElement textAlignment="Right"/>
								<text><![CDATA[Tally]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:tableFooter height="16" rowSpan="1">
							<box>
								<topPen lineWidth="1.0"/>
								<bottomPen lineWidth="1.0" lineStyle="Double"/>
							</box>
							<textField pattern="#,##0;-#,##0">
								<reportElement style="Table-Summary" x="0" y="0" width="80" height="16"/>
								<textElement textAlignment="Right">
									<font size="10" isBold="true"/>
								</textElement>
								<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{eventsource_SUM}]]></textFieldExpression>
							</textField>
						</jr:tableFooter>
						<jr:detailCell height="20" rowSpan="1">
							<textField pattern="#,##0;-#,##0">
								<reportElement style="Table-Body" x="0" y="0" width="80" height="18"/>
								<textElement textAlignment="Right">
									<font size="10"/>
								</textElement>
								<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{tally}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
			<timeSeriesChart>
				<chart isShowLegend="false">
					<reportElement positionType="Float" x="0" y="185" width="555" height="190"/>
					<chartTitle position="Top">
						<font size="12" isBold="true"/>
						<titleExpression><![CDATA[new String("Total average processed events per hour")]]></titleExpression>
					</chartTitle>
					<chartSubtitle>
						<font size="10" isItalic="true"/>
						<subtitleExpression><![CDATA[new String("last 30 days")]]></subtitleExpression>
					</chartSubtitle>
					<chartLegend/>
				</chart>
				<timeSeriesDataset>
					<dataset>
						<datasetRun subDataset="events_eph"/>
					</dataset>
					<timeSeries>
						<seriesExpression><![CDATA["day"]]></seriesExpression>
						<timePeriodExpression><![CDATA[new java.util.Date($F{week_day}.getTime())]]></timePeriodExpression>
						<valueExpression><![CDATA[$F{avg_per_hour}]]></valueExpression>
						<labelExpression><![CDATA[$F{avg_per_hour}.toString()]]></labelExpression>
						<itemHyperlink>
							<hyperlinkTooltipExpression><![CDATA[$F{avg_per_hour}.toString()]]></hyperlinkTooltipExpression>
						</itemHyperlink>
					</timeSeries>
				</timeSeriesDataset>
				<timeSeriesPlot isShowShapes="false">
					<plot>
						<seriesColor seriesOrder="0" color="#CC0000"/>
					</plot>
					<timeAxisFormat>
						<axisFormat verticalTickLabels="true">
							<labelFont/>
							<tickLabelFont>
								<font size="6"/>
							</tickLabelFont>
						</axisFormat>
					</timeAxisFormat>
					<valueAxisLabelExpression><![CDATA[new String("average eph a day")]]></valueAxisLabelExpression>
					<valueAxisFormat>
						<axisFormat verticalTickLabels="false">
							<labelFont>
								<font size="6"/>
							</labelFont>
							<tickLabelFont>
								<font size="7"/>
							</tickLabelFont>
						</axisFormat>
					</valueAxisFormat>
				</timeSeriesPlot>
			</timeSeriesChart>
			<timeSeriesChart>
				<chart isShowLegend="true">
					<reportElement positionType="Float" x="0" y="375" width="555" height="190"/>
					<chartTitle position="Top">
						<font size="12" isBold="true"/>
						<titleExpression><![CDATA[new String("Events per day")]]></titleExpression>
					</chartTitle>
					<chartSubtitle>
						<font size="10" isItalic="true"/>
						<subtitleExpression><![CDATA[new String("last 30 days")]]></subtitleExpression>
					</chartSubtitle>
					<chartLegend/>
				</chart>
				<timeSeriesDataset>
					<dataset>
						<datasetRun subDataset="events_per_day"/>
					</dataset>
					<timeSeries>
						<seriesExpression><![CDATA[$F{eventsource}]]></seriesExpression>
						<timePeriodExpression><![CDATA[new java.util.Date($F{days}.getTime())]]></timePeriodExpression>
						<valueExpression><![CDATA[$F{tally}]]></valueExpression>
						<labelExpression><![CDATA[$F{tally}.toString()]]></labelExpression>
						<itemHyperlink>
							<hyperlinkTooltipExpression><![CDATA[$F{tally}.toString()]]></hyperlinkTooltipExpression>
						</itemHyperlink>
					</timeSeries>
				</timeSeriesDataset>
				<timeSeriesPlot isShowShapes="false">
					<plot>
						<seriesColor seriesOrder="0" color="#3399FF"/>
						<seriesColor seriesOrder="1" color="#FF9933"/>
						<seriesColor seriesOrder="2" color="#339900"/>
						<seriesColor seriesOrder="3" color="#666666"/>
						<seriesColor seriesOrder="4" color="#CCCC00"/>
					</plot>
					<timeAxisFormat>
						<axisFormat verticalTickLabels="true">
							<labelFont/>
							<tickLabelFont>
								<font size="6"/>
							</tickLabelFont>
						</axisFormat>
					</timeAxisFormat>
					<valueAxisLabelExpression><![CDATA[new String("tally")]]></valueAxisLabelExpression>
					<valueAxisFormat>
						<axisFormat verticalTickLabels="false">
							<labelFont>
								<font size="6"/>
							</labelFont>
							<tickLabelFont>
								<font size="7"/>
							</tickLabelFont>
						</axisFormat>
					</valueAxisFormat>
				</timeSeriesPlot>
			</timeSeriesChart>
			<staticText>
				<reportElement style="Section" x="0" y="0" width="555" height="20"/>
				<textElement rotation="None">
					<font size="16"/>
				</textElement>
				<text><![CDATA[ All events by source]]></text>
			</staticText>
			<staticText>
				<reportElement style="Section" x="0" y="160" width="555" height="20"/>
				<textElement rotation="None">
					<font size="16"/>
				</textElement>
				<text><![CDATA[ Events per hour and by source]]></text>
			</staticText>
			<staticText>
				<reportElement style="Section" x="0" y="565" width="555" height="23"/>
				<textElement rotation="None">
					<font size="16"/>
				</textElement>
				<text><![CDATA[ Database information]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="632" width="82" height="12"/>
				<textElement>
					<font size="8" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[Postgres version]]></text>
			</staticText>
			<textField isStretchWithOverflow="true">
				<reportElement x="83" y="632" width="473" height="12"/>
				<textElement verticalAlignment="Top">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{version}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="588" width="82" height="12"/>
				<textElement>
					<font size="8" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[Uptime]]></text>
			</staticText>
			<textField pattern="hh:mm:ss dd mm yyyy">
				<reportElement x="82" y="588" width="199" height="12"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{uptime}.getYears() + " years " + $F{uptime}.getMonths() + " months " + $F{uptime}.getDays() + " days " + $F{uptime}.getHours() + " hours " + $F{uptime}.getMinutes() + " minutes"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="603" width="82" height="12"/>
				<textElement>
					<font size="8" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[Tablespace]]></text>
			</staticText>
			<textField>
				<reportElement x="82" y="603" width="199" height="12"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{pg_size_pretty}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="281" y="588" width="94" height="12"/>
				<textElement>
					<font size="8" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[Database name]]></text>
			</staticText>
			<textField>
				<reportElement x="375" y="588" width="180" height="12"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{current_database}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="618" width="82" height="12"/>
				<textElement>
					<font size="8" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[Postgres socket]]></text>
			</staticText>
			<textField>
				<reportElement x="82" y="618" width="199" height="12"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{inet_server_addr}+":"+$F{inet_server_port}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="281" y="603" width="94" height="12"/>
				<textElement>
					<font size="8" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[Database schema]]></text>
			</staticText>
			<textField>
				<reportElement x="375" y="603" width="180" height="12"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{current_schema}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="281" y="618" width="94" height="12"/>
				<textElement>
					<font size="8" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[Database user]]></text>
			</staticText>
			<textField>
				<reportElement x="375" y="618" width="180" height="12"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{current_user}]]></textFieldExpression>
			</textField>
			<break>
				<reportElement x="0" y="654" width="100" height="1"/>
			</break>
		</band>
		<band height="205">
			<staticText>
				<reportElement style="Section" x="0" y="0" width="555" height="20"/>
				<textElement rotation="None">
					<font size="16"/>
				</textElement>
				<text><![CDATA[ Top 25 events by UEI and event source]]></text>
			</staticText>
			<lineChart>
				<chart isShowLegend="false">
					<reportElement positionType="Float" x="0" y="50" width="555" height="145"/>
					<chartTitle/>
					<chartSubtitle/>
					<chartLegend/>
				</chart>
				<categoryDataset>
					<dataset>
						<datasetRun subDataset="top25_events"/>
					</dataset>
					<categorySeries>
						<seriesExpression><![CDATA["Dummy Series"]]></seriesExpression>
						<categoryExpression><![CDATA[$F{eventuei}]]></categoryExpression>
						<valueExpression><![CDATA[$F{tally}]]></valueExpression>
						<labelExpression><![CDATA[$F{eventuei}]]></labelExpression>
					</categorySeries>
				</categoryDataset>
				<linePlot isShowLines="true" isShowShapes="false">
					<plot/>
					<categoryAxisFormat>
						<axisFormat tickLabelColor="#FFFFFF" verticalTickLabels="false">
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</categoryAxisFormat>
					<valueAxisFormat>
						<axisFormat verticalTickLabels="false">
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</valueAxisFormat>
				</linePlot>
			</lineChart>
			<break>
				<reportElement x="0" y="200" width="100" height="1"/>
			</break>
			<componentElement>
				<reportElement key="Top 25 Events by UEI" positionType="Float" x="0" y="26" width="555" height="10"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="top25_events">
						<datasetParameter name="OPENNMS_URL_BASE">
							<datasetParameterExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="312">
						<jr:tableHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="312" height="20"/>
								<textElement/>
								<text><![CDATA[ OpenNMS UEI]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:detailCell style="table_5line_grid" height="18" rowSpan="1">
							<box leftPadding="0" rightPadding="0"/>
							<textField hyperlinkType="Reference" hyperlinkTarget="Blank">
								<reportElement style="Eventdisplay Link Style" x="0" y="0" width="312" height="18"/>
								<textElement/>
								<textFieldExpression class="java.lang.String"><![CDATA[$F{eventuei}]]></textFieldExpression>
								<hyperlinkReferenceExpression><![CDATA[$F{eventdisplay}.equals("Y") ? $P{OPENNMS_URL_BASE}+"/event/list?sortby=id&filter=exactUei="+$F{eventuei}.replaceAll("/", "%2F") : ""]]></hyperlinkReferenceExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="199">
						<jr:tableHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="199" height="20"/>
								<textElement/>
								<text><![CDATA[Event Source]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:detailCell style="table_5line_grid" height="18" rowSpan="1">
							<box topPadding="0" leftPadding="0" bottomPadding="0" rightPadding="0"/>
							<textField>
								<reportElement style="Table-Body" x="0" y="1" width="197" height="15"/>
								<textElement/>
								<textFieldExpression class="java.lang.String"><![CDATA[$F{eventsource}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="43">
						<jr:tableHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="43" height="20"/>
								<textElement textAlignment="Right"/>
								<text><![CDATA[Tally]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:detailCell style="table_5line_grid" height="18" rowSpan="1">
							<box leftPadding="0" rightPadding="0"/>
							<textField>
								<reportElement style="Table-Body" x="0" y="1" width="41" height="15"/>
								<textElement textAlignment="Right"/>
								<textFieldExpression class="java.lang.Long"><![CDATA[$F{tally}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
		<band height="206">
			<staticText>
				<reportElement style="Section" positionType="Float" x="0" y="0" width="555" height="20"/>
				<textElement rotation="None">
					<font size="16"/>
				</textElement>
				<text><![CDATA[ Top 25 event hours]]></text>
			</staticText>
			<componentElement>
				<reportElement key="Top 25 Events by UEI" positionType="Float" x="0" y="25" width="555" height="10"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="top25_event_hours">
						<datasetParameter name="OPENNMS_URL_BASE">
							<datasetParameterExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="391">
						<jr:tableHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="391" height="20"/>
								<textElement/>
								<text><![CDATA[ OpenNMS UEI]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:detailCell style="table_5line_grid" height="18" rowSpan="1">
							<box leftPadding="0" rightPadding="0"/>
							<textField hyperlinkType="Reference" hyperlinkTarget="Blank">
								<reportElement style="Eventdisplay Link Style" x="0" y="0" width="391" height="18"/>
								<textElement/>
								<textFieldExpression class="java.lang.String"><![CDATA[$F{eventuei}]]></textFieldExpression>
								<hyperlinkReferenceExpression><![CDATA[$F{eventdisplay}.equals("Y") ? $P{OPENNMS_URL_BASE}+"/event/list?sortby=id&filter=exactUei="+$F{eventuei}.replaceAll("/", "%2F") : ""]]></hyperlinkReferenceExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="120">
						<jr:tableHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="120" height="20"/>
								<textElement/>
								<text><![CDATA[Hour]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:detailCell style="table_5line_grid" height="18" rowSpan="1">
							<box topPadding="0" leftPadding="0" bottomPadding="0" rightPadding="0"/>
							<textField>
								<reportElement style="Table-Body" x="0" y="1" width="118" height="15"/>
								<textElement/>
								<textFieldExpression class="java.sql.Timestamp"><![CDATA[$F{hour}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="43">
						<jr:tableHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" mode="Opaque" x="0" y="0" width="43" height="20"/>
								<textElement textAlignment="Right"/>
								<text><![CDATA[Tally]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:detailCell style="table_5line_grid" height="18" rowSpan="1">
							<box leftPadding="0" rightPadding="0"/>
							<textField>
								<reportElement style="Table-Body" x="0" y="1" width="41" height="15"/>
								<textElement textAlignment="Right"/>
								<textFieldExpression class="java.lang.Long"><![CDATA[$F{count}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
			<lineChart>
				<chart isShowLegend="false">
					<reportElement positionType="Float" x="0" y="50" width="555" height="145"/>
					<chartTitle/>
					<chartSubtitle/>
					<chartLegend/>
				</chart>
				<categoryDataset>
					<dataset>
						<datasetRun subDataset="top25_event_hours"/>
					</dataset>
					<categorySeries>
						<seriesExpression><![CDATA["Dummy Series"]]></seriesExpression>
						<categoryExpression><![CDATA[$F{hour}+$F{eventuei}]]></categoryExpression>
						<valueExpression><![CDATA[$F{count}]]></valueExpression>
					</categorySeries>
				</categoryDataset>
				<linePlot isShowLines="true" isShowShapes="false">
					<plot/>
					<categoryAxisFormat>
						<axisFormat tickLabelColor="#FFFFFF" verticalTickLabels="false">
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</categoryAxisFormat>
					<valueAxisFormat>
						<axisFormat verticalTickLabels="false">
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</valueAxisFormat>
				</linePlot>
			</lineChart>
			<break>
				<reportElement x="0" y="201" width="100" height="1"/>
			</break>
		</band>
		<band height="205">
			<staticText>
				<reportElement style="Section" positionType="Float" x="0" y="0" width="555" height="20"/>
				<textElement rotation="None">
					<font size="16"/>
				</textElement>
				<text><![CDATA[ Top 25 events by node]]></text>
			</staticText>
			<componentElement>
				<reportElement key="events_by_node" positionType="Float" x="0" y="25" width="555" height="10"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="top25_events_by_node">
						<datasetParameter name="OPENNMS_URL_BASE">
							<datasetParameterExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="460">
						<jr:columnHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="458" height="20"/>
								<textElement/>
								<text><![CDATA[Node label]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter height="30" rowSpan="1"/>
						<jr:detailCell style="table_3line_grid" height="18" rowSpan="1">
							<textField hyperlinkType="Reference" hyperlinkTarget="Blank">
								<reportElement style="Table-Body" x="0" y="0" width="458" height="18"/>
								<textElement/>
								<textFieldExpression class="java.lang.String"><![CDATA[$F{nodelabel}]]></textFieldExpression>
								<hyperlinkReferenceExpression><![CDATA[$P{OPENNMS_URL_BASE}+"/event/list?sortby=id&filter=node="+$F{nodeid}]]></hyperlinkReferenceExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="94">
						<jr:columnHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="94" height="20"/>
								<textElement textAlignment="Right"/>
								<text><![CDATA[Tally]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter height="30" rowSpan="1"/>
						<jr:detailCell style="table_3line_grid" height="18" rowSpan="1">
							<textField pattern="#,##0;-#,##0">
								<reportElement style="Table-Body" x="0" y="0" width="92" height="18"/>
								<textElement textAlignment="Right"/>
								<textFieldExpression class="java.lang.Long"><![CDATA[$F{tally}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
			<lineChart>
				<chart isShowLegend="false">
					<reportElement positionType="Float" x="0" y="50" width="555" height="145"/>
					<chartTitle/>
					<chartSubtitle/>
					<chartLegend/>
				</chart>
				<categoryDataset>
					<dataset>
						<datasetRun subDataset="top25_events_by_node"/>
					</dataset>
					<categorySeries>
						<seriesExpression><![CDATA["Dummy Series"]]></seriesExpression>
						<categoryExpression><![CDATA[$F{nodeid}]]></categoryExpression>
						<valueExpression><![CDATA[$F{tally}]]></valueExpression>
					</categorySeries>
				</categoryDataset>
				<linePlot isShowLines="true" isShowShapes="false">
					<plot/>
					<categoryAxisFormat>
						<axisFormat tickLabelColor="#FFFFFF" tickLabelMask="0" verticalTickLabels="false">
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</categoryAxisFormat>
					<valueAxisFormat>
						<axisFormat verticalTickLabels="false">
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</valueAxisFormat>
				</linePlot>
			</lineChart>
			<break>
				<reportElement x="0" y="200" width="100" height="1"/>
			</break>
		</band>
		<band height="206">
			<staticText>
				<reportElement style="Section" positionType="Float" x="0" y="0" width="555" height="20"/>
				<textElement rotation="None">
					<font size="16"/>
				</textElement>
				<text><![CDATA[ Top 25 events by node and UEI]]></text>
			</staticText>
			<componentElement>
				<reportElement key="top25_events_by_node_uei" positionType="Float" x="0" y="25" width="555" height="10"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="top25_events_by_node_uei">
						<datasetParameter name="OPENNMS_URL_BASE">
							<datasetParameterExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="198">
						<jr:columnHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="196" height="20"/>
								<textElement>
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[Node label]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_5line_grid" height="18" rowSpan="1">
							<textField hyperlinkType="Reference" hyperlinkTarget="Blank">
								<reportElement style="Table-Body" x="0" y="0" width="196" height="18"/>
								<textElement>
									<font size="10"/>
								</textElement>
								<textFieldExpression class="java.lang.String"><![CDATA[$F{nodelabel}]]></textFieldExpression>
								<hyperlinkReferenceExpression><![CDATA[$P{OPENNMS_URL_BASE}+"/event/list?sortby=id&filter=node="+$F{nodeid}]]></hyperlinkReferenceExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="305">
						<jr:columnHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="305" height="20"/>
								<textElement>
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[Event UEI]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_5line_grid" height="18" rowSpan="1">
							<textField hyperlinkType="Reference" hyperlinkTarget="Blank">
								<reportElement style="Eventdisplay Link Style" x="0" y="0" width="303" height="18"/>
								<textElement>
									<font size="10" isBold="false"/>
								</textElement>
								<textFieldExpression class="java.lang.String"><![CDATA[$F{eventuei}]]></textFieldExpression>
								<hyperlinkReferenceExpression><![CDATA[$F{eventdisplay}.equals("Y") ? $P{OPENNMS_URL_BASE}+"/event/list?sortby=id&filter=exactUei="+$F{eventuei}.replaceAll("/", "%2F")+"&filter=node="+$F{nodeid} : ""]]></hyperlinkReferenceExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="51">
						<jr:columnHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="51" height="20"/>
								<textElement textAlignment="Right">
									<font isBold="true"/>
								</textElement>
								<text><![CDATA[Tally]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table_5line_grid" height="18" rowSpan="1">
							<textField pattern="#,##0;-#,##0">
								<reportElement style="Table-Body" x="0" y="0" width="51" height="18"/>
								<textElement textAlignment="Right">
									<font size="10"/>
								</textElement>
								<textFieldExpression class="java.lang.Long"><![CDATA[$F{tally}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
			<lineChart>
				<chart isShowLegend="false">
					<reportElement positionType="Float" x="0" y="50" width="555" height="145"/>
					<chartTitle/>
					<chartSubtitle/>
					<chartLegend/>
				</chart>
				<categoryDataset>
					<dataset>
						<datasetRun subDataset="top25_events_by_node_uei"/>
					</dataset>
					<categorySeries>
						<seriesExpression><![CDATA["Dummy Series"]]></seriesExpression>
						<categoryExpression><![CDATA[$F{eventuei}+$F{nodeid}]]></categoryExpression>
						<valueExpression><![CDATA[$F{tally}]]></valueExpression>
					</categorySeries>
				</categoryDataset>
				<linePlot isShowLines="true" isShowShapes="false">
					<plot/>
					<categoryAxisFormat>
						<axisFormat tickLabelColor="#FFFFFF" tickLabelMask="0" verticalTickLabels="false">
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</categoryAxisFormat>
					<valueAxisFormat>
						<axisFormat verticalTickLabels="false">
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</valueAxisFormat>
				</linePlot>
			</lineChart>
			<break>
				<reportElement x="0" y="202" width="100" height="1"/>
			</break>
		</band>
		<band height="201">
			<staticText>
				<reportElement style="Section" positionType="Float" x="0" y="0" width="555" height="20"/>
				<textElement rotation="None">
					<font size="16"/>
				</textElement>
				<text><![CDATA[ Top 25 nodes with generic enterprise default traps]]></text>
			</staticText>
			<componentElement>
				<reportElement key="top25_generic_enterprise" x="0" y="25" width="555" height="10"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="unknown_mibs">
						<datasetParameter name="OPENNMS_URL_BASE">
							<datasetParameterExpression><![CDATA[$P{OPENNMS_URL_BASE}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="239">
						<jr:tableHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="239" height="20"/>
								<textElement/>
								<text><![CDATA[Node label]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:tableFooter height="1" rowSpan="1"/>
						<jr:detailCell style="table_5line_grid" height="19" rowSpan="1">
							<textField hyperlinkType="Reference" hyperlinkTarget="Blank">
								<reportElement style="Table-Body" x="0" y="0" width="239" height="18"/>
								<textElement/>
								<textFieldExpression class="java.lang.String"><![CDATA[$F{node}]]></textFieldExpression>
								<hyperlinkReferenceExpression><![CDATA[($F{nodeid} != null) ? $P{OPENNMS_URL_BASE}+"/event/list?sortby=id&filter=node="+$F{nodeid}+"&filter=exactUei="+$F{eventuei} : ""]]></hyperlinkReferenceExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="245">
						<jr:tableHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="245" height="20"/>
								<textElement/>
								<text><![CDATA[Source IP address]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:tableFooter height="1" rowSpan="1"/>
						<jr:detailCell style="table_5line_grid" height="19" rowSpan="1">
							<textField hyperlinkType="Reference" hyperlinkTarget="Blank">
								<reportElement style="Table-Body" x="0" y="0" width="245" height="18"/>
								<textElement/>
								<textFieldExpression class="java.lang.String"><![CDATA[$F{ipaddr}]]></textFieldExpression>
								<hyperlinkReferenceExpression><![CDATA[$P{OPENNMS_URL_BASE}+"/event/list?sortby=id&filter=exactUei="+$F{eventuei}.replaceAll("/", "%2F")+"&filter=interface="+$F{ipaddr}]]></hyperlinkReferenceExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="70">
						<jr:tableHeader height="20" rowSpan="1">
							<staticText>
								<reportElement style="Table-Header" x="0" y="0" width="70" height="20"/>
								<textElement textAlignment="Right"/>
								<text><![CDATA[Tally]]></text>
							</staticText>
						</jr:tableHeader>
						<jr:tableFooter height="1" rowSpan="1"/>
						<jr:detailCell style="table_5line_grid" height="19" rowSpan="1">
							<textField>
								<reportElement style="Table-Body" x="0" y="0" width="70" height="18"/>
								<textElement textAlignment="Right"/>
								<textFieldExpression class="java.lang.Long"><![CDATA[$F{tally}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
			<lineChart>
				<chart isShowLegend="false">
					<reportElement positionType="Float" x="0" y="50" width="555" height="145"/>
					<chartTitle/>
					<chartSubtitle/>
					<chartLegend/>
				</chart>
				<categoryDataset>
					<dataset>
						<datasetRun subDataset="unknown_mibs"/>
					</dataset>
					<categorySeries>
						<seriesExpression><![CDATA["Dummy Series"]]></seriesExpression>
						<categoryExpression><![CDATA[$F{ipaddr}]]></categoryExpression>
						<valueExpression><![CDATA[$F{tally}]]></valueExpression>
					</categorySeries>
				</categoryDataset>
				<linePlot isShowLines="true" isShowShapes="false">
					<plot/>
					<categoryAxisFormat>
						<axisFormat tickLabelColor="#FFFFFF" tickLabelMask="0" verticalTickLabels="false">
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</categoryAxisFormat>
					<valueAxisFormat>
						<axisFormat verticalTickLabels="false">
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</valueAxisFormat>
				</linePlot>
			</lineChart>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="29" splitType="Stretch">
			<line>
				<reportElement x="0" y="2" width="555" height="1"/>
			</line>
			<textField>
				<reportElement x="435" y="9" width="80" height="20"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.String"><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="515" y="9" width="40" height="20"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
