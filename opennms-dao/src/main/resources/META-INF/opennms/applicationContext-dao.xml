<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:tx="http://www.springframework.org/schema/tx"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:util="http://www.springframework.org/schema/util"
  xmlns:aop="http://www.springframework.org/schema/aop"
  xmlns:onmsgi="http://xmlns.opennms.org/xsd/spring/onms-osgi"
  xsi:schemaLocation="
  http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
  http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
  http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd
  http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
  http://xmlns.opennms.org/xsd/spring/onms-osgi http://xmlns.opennms.org/xsd/spring/onms-osgi.xsd
  ">

  <context:annotation-config />
  <tx:annotation-driven/>
  
  <bean id="propertyPlaceholderConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
    <property name="location" value="file:${opennms.home}/etc/model-importer.properties" />
    <!-- 
      We need to ignore unresolvable placeholders since if multiple PropertyPlaceholderConfigurer
      preprocessors are in use in a single context (such as inside unit tests), Spring will encounter
      the issue documented here:

      https://jira.springsource.org/browse/SPR-6428

      TODO: Fix this behavior after upgrading to Spring 3.1.
    -->
    <property name="ignoreUnresolvablePlaceholders" value="true"/>
  </bean>

  <!-- 
  ######################################################
  Legacy dataSource configuration
  ######################################################
  <bean id="dataSource" class="org.opennms.core.db.DataSourceFactoryBean" />

  ######################################################
  Legacy Hibernate 4 transaction manager
  ######################################################
  <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
    <property name="nestedTransactionAllowed" value="true"/>
  </bean>
  -->

  <!--
    XADataSource that is wrapped with an AtomikosDataSourceBean which provides
    pooling and JTA compatibility.
  -->
  <bean id="dataSource" class="com.atomikos.jdbc.AtomikosDataSourceBean" destroy-method="close">
    <property name="uniqueResourceName" value="opennms"/>
    <property name="xaDataSource">
      <bean class="org.opennms.core.db.XADataSourceFactoryBean" />
    </property>
    <property name="poolSize" value="30"/>
  </bean>

  <!-- Atomikos JTA TransactionManager -->
  <bean id="atomikosTransactionManager" class="com.atomikos.icatch.jta.UserTransactionManager" init-method="init" destroy-method="close">
    <property name="forceShutdown" value="true"/>
    <property name="transactionTimeout" value="300" />
  </bean>

  <!-- Atomikos JTA UserTransaction -->
  <bean id="atomikosUserTransaction" class="com.atomikos.icatch.jta.UserTransactionImp"/>

  <!-- Construct a Spring JtaTransactionManager that uses Atomikos JTA -->
  <bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
    <constructor-arg ref="atomikosUserTransaction"/>
    <constructor-arg ref="atomikosTransactionManager"/>
    <!-- <property name="allowCustomIsolationLevels" value="true"/> -->
  </bean>

  <!-- Create a Hibernate 4 LocalSessionFactoryBean that will provide thread-local sessions -->
  <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <!-- 
      You MUST set this property or the SessionFactory will not communicate correctly with 
      the JTA transaction manager and Spring and Hibernate will not coordinate transactions
      properly.

      https://jira.springsource.org/browse/SPR-9404
      https://jira.springsource.org/browse/SPR-9480
    -->
    <property name="jtaTransactionManager" ref="transactionManager" />
    <property name="packagesToScan">
      <list>
        <value>org.opennms.netmgt.dao.hibernate</value>
        <value>org.opennms.netmgt.model</value>
      </list>
    </property>
    <!--  property name="schemaUpdate" value="true">
      </property -->
    <property name="annotatedPackages">
      <list>
        <value>org.opennms.netmgt.dao.hibernate</value>
        <value>org.opennms.netmgt.model</value>
      </list>
    </property>
    <property name="hibernateProperties">
      <value>
        <!-- Dialect for PostgreSQL 8.2+ -->
        hibernate.dialect=org.hibernate.dialect.PostgreSQL82Dialect

        hibernate.cache.use_query_cache=false
        hibernate.cache.use_second_level_cache=false

        <!-- Configure Hibernate to use JTA factories -->
        hibernate.transaction.factory_class=org.hibernate.engine.transaction.internal.jta.JtaTransactionFactory
        <!--hibernate.transaction.jta.platform=[No specific value for Atomikos]-->

        hibernate.jdbc.batch_size=0
        <!-- hibernate.format_sql=true -->
      </value>
    </property>
  </bean>

  <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <property name="dataSource" ref="dataSource" />
  </bean>

  <bean id="timeKeeper" class="org.opennms.core.utils.DefaultTimeKeeper" />

  <bean id="transactionTemplate" class="org.springframework.transaction.support.TransactionTemplate">
    <property name="transactionManager" ref="transactionManager" />
  </bean>
  
  <onmsgi:service interface="org.springframework.transaction.support.TransactionOperations" ref="transactionTemplate" />
    
  <bean id="filterManager" class="org.opennms.netmgt.dao.hibernate.HibernateFilterManager">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.model.FilterManager" ref="filterManager" />
    
  <bean id="acknowledgmentDao" class="org.opennms.netmgt.dao.hibernate.AcknowledgmentDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
  
  <onmsgi:service interface="org.opennms.netmgt.dao.api.AcknowledgmentDao" ref="acknowledgmentDao" />
  

  <bean id="alarmDao" class="org.opennms.netmgt.dao.hibernate.AlarmDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.AlarmDao" ref="alarmDao" />

  <bean id="alarmRepository" class="org.opennms.netmgt.dao.hibernate.AlarmRepositoryHibernate"/>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.AlarmRepository" ref="alarmRepository" />

  <bean id="memoDao" class="org.opennms.netmgt.dao.hibernate.MemoDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.MemoDao" ref="memoDao" />

  <bean id="assetRecordDao" class="org.opennms.netmgt.dao.hibernate.AssetRecordDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.AssetRecordDao" ref="assetRecordDao" />

  <bean id="categoryDao" class="org.opennms.netmgt.dao.hibernate.CategoryDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.CategoryDao" ref="categoryDao" />

  <bean id="distPollerDao" class="org.opennms.netmgt.dao.hibernate.DistPollerDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.DistPollerDao" ref="distPollerDao" />

  <bean id="demandPollDao" class="org.opennms.netmgt.dao.hibernate.DemandPollDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.DemandPollDao" ref="demandPollDao" />

  <bean id="eventDao" class="org.opennms.netmgt.dao.hibernate.EventDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.EventDao" ref="eventDao" />

  <bean id="ipInterfaceDao" class="org.opennms.netmgt.dao.hibernate.IpInterfaceDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.IpInterfaceDao" ref="ipInterfaceDao" />

  <bean id="monitoredServiceDao" class="org.opennms.netmgt.dao.hibernate.MonitoredServiceDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.MonitoredServiceDao" ref="monitoredServiceDao" />

  <bean id="nodeDao" class="org.opennms.netmgt.dao.hibernate.NodeDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
  
  <onmsgi:service interface="org.opennms.netmgt.dao.api.NodeDao" ref="nodeDao" />

  <bean id="linkStateDao" class="org.opennms.netmgt.dao.hibernate.LinkStateDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
  
  <onmsgi:service interface="org.opennms.netmgt.dao.api.LinkStateDao" ref="linkStateDao" />

  <bean id="reportCatalogDao" class="org.opennms.netmgt.dao.hibernate.ReportCatalogDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.ReportCatalogDao" ref="reportCatalogDao" />

  <bean id="notificationDao" class="org.opennms.netmgt.dao.hibernate.NotificationDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.NotificationDao" ref="notificationDao" />

  <bean id="outageDao" class="org.opennms.netmgt.dao.hibernate.OutageDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.OutageDao" ref="outageDao" />

  <bean id="serviceTypeDao" class="org.opennms.netmgt.dao.hibernate.ServiceTypeDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.ServiceTypeDao" ref="serviceTypeDao" />

  <bean id="snmpInterfaceDao" class="org.opennms.netmgt.dao.hibernate.SnmpInterfaceDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.SnmpInterfaceDao" ref="snmpInterfaceDao" />

  <bean id="userNotificationDao" class="org.opennms.netmgt.dao.hibernate.UserNotificationDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
  
  <onmsgi:service interface="org.opennms.netmgt.dao.api.UserNotificationDao" ref="userNotificationDao" />

  <bean id="atInterfaceDao" class="org.opennms.netmgt.dao.hibernate.AtInterfaceDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
  
  <onmsgi:service interface="org.opennms.netmgt.dao.api.AtInterfaceDao" ref="atInterfaceDao" />

  <bean id="vlanDao" class="org.opennms.netmgt.dao.hibernate.VlanDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
  
  <onmsgi:service interface="org.opennms.netmgt.dao.api.VlanDao" ref="vlanDao" />

  <bean id="stpNodeDao" class="org.opennms.netmgt.dao.hibernate.StpNodeDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
  
  <onmsgi:service interface="org.opennms.netmgt.dao.api.StpNodeDao" ref="stpNodeDao" />

  <bean id="stpInterfaceDao" class="org.opennms.netmgt.dao.hibernate.StpInterfaceDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
  
  <onmsgi:service interface="org.opennms.netmgt.dao.api.StpInterfaceDao" ref="stpInterfaceDao" />

  <bean id="ipRouteInterfaceDao" class="org.opennms.netmgt.dao.hibernate.IpRouteInterfaceDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
  
  <onmsgi:service interface="org.opennms.netmgt.dao.api.IpRouteInterfaceDao" ref="ipRouteInterfaceDao" />

  <!--
  <bean id="userDao" class="org.opennms.netmgt.dao.hibernate.UserDaoHibernate" >
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

 
  <bean id="groupDao" class="org.opennms.netmgt.dao.hibernate.GroupDaoHibernate" >
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
  -->
 
  <bean id="applicationDao" class="org.opennms.netmgt.dao.hibernate.ApplicationDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.ApplicationDao" ref="applicationDao" />

  <bean id="statisticsReportDao" class="org.opennms.netmgt.dao.hibernate.StatisticsReportDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.StatisticsReportDao" ref="statisticsReportDao" />

  <bean id="statisticsReportDataDao" class="org.opennms.netmgt.dao.hibernate.StatisticsReportDataDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.StatisticsReportDataDao" ref="statisticsReportDataDao" />

  <bean id="resourceReferenceDao" class="org.opennms.netmgt.dao.hibernate.ResourceReferenceDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.ResourceReferenceDao" ref="resourceReferenceDao" />

  <bean id="locationMonitorConfigResourceLocation" class="java.lang.String">
    <constructor-arg value="file:${opennms.home}/etc/monitoring-locations.xml" />
  </bean>

  <bean id="locationMonitorDao" class="org.opennms.netmgt.dao.hibernate.LocationMonitorDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
    <property name="monitoringLocationConfigResource" ref="locationMonitorConfigResourceLocation" />
  </bean>
 
  <onmsgi:service interface="org.opennms.netmgt.dao.api.LocationMonitorDao" ref="locationMonitorDao" />

  <bean id="surveillanceViewConfigResourceLocation" class="java.lang.String">
    <constructor-arg value="file:${opennms.home}/etc/surveillance-views.xml" />
  </bean>

  <bean id="surveillanceViewConfigDao" class="org.opennms.netmgt.dao.castor.DefaultSurveillanceViewConfigDao">
    <property name="configResource" ref="surveillanceViewConfigResourceLocation" />
  </bean>
  
  <bean id="databaseReportConfigResourceLocation" class="java.lang.String">
    <constructor-arg value="file:${opennms.home}/etc/database-reports.xml" />
  </bean>
  
  <bean id="databaseReportConfigDao" class="org.opennms.netmgt.dao.castor.DefaultDatabaseReportConfigDao">
    <property name="configResource" ref="databaseReportConfigResourceLocation" />
  </bean>
  
  <bean id="availabilityReportConfigResourceLocation" class="java.lang.String">
    <constructor-arg value="file:${opennms.home}/etc/availability-reports.xml" />
  </bean>
  
  <bean id="availabilityReportConfigDao" class="org.opennms.netmgt.dao.castor.DefaultOnmsReportConfigDao">
    <property name="configResource" ref="availabilityReportConfigResourceLocation" />
  </bean>
  
  <bean id="jasperReportConfigResourceLocation" class="java.lang.String">
    <constructor-arg value="file:${opennms.home}/etc/jasper-reports.xml" />
  </bean>
  
  <bean id="jasperReportConfigDao" class="org.opennms.netmgt.dao.castor.DefaultJasperReportConfigDao">
    <property name="configResource" ref="jasperReportConfigResourceLocation" />
  </bean>
  
  <bean id="databaseSchemaConfigFactory-init" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="staticMethod"><value>org.opennms.netmgt.config.DatabaseSchemaConfigFactory.init</value></property>
  </bean>

  <bean id="databaseSchemaConfigFactory" class="org.opennms.netmgt.config.DatabaseSchemaConfigFactory" depends-on="databaseSchemaConfigFactory-init" factory-method="getInstance"/>

  <bean id="filterDaoFactory-init" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="staticMethod"><value>org.opennms.netmgt.filter.FilterDaoFactory.setInstance</value></property>
    <property name="arguments">
      <bean id="jdbcFilterDao" class="org.opennms.netmgt.filter.JdbcFilterDao">
        <property name="dataSource" ref="dataSource" />
        <property name="databaseSchemaConfigFactory" ref="databaseSchemaConfigFactory" />
      </bean>
    </property>
  </bean>
  
  <bean id="filterDao" class="org.opennms.netmgt.filter.FilterDaoFactory" depends-on="filterDaoFactory-init" factory-method="getInstance" />

  <bean id="filterFavoriteDao" class="org.opennms.netmgt.dao.hibernate.FilterFavoriteDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <bean id="topologyDao" class="org.opennms.netmgt.dao.hibernate.TopologyDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.TopologyDao" ref="topologyDao" />
  
  <bean id="collectdConfig-init" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="staticMethod"><value>org.opennms.netmgt.config.CollectdConfigFactory.init</value></property>
  </bean>

  <bean id="collectdConfig" class="org.opennms.netmgt.config.CollectdConfigFactory" depends-on="collectdConfig-init" factory-method="getInstance"/>

  <bean id="dataCollectionConfigResourceLocation" class="java.lang.String">
    <constructor-arg value="file:${opennms.home}/etc/datacollection-config.xml" />
  </bean>

  <bean id="dataCollectionConfigDirectoryLocation" class="java.lang.String">
    <constructor-arg value="${opennms.home}/etc/datacollection" />
  </bean>

  <bean id="dataCollectionConfigReloadCheckInterval" class="java.lang.Long">
    <constructor-arg value="${org.opennms.snmp.dataCollectionConfig.reloadCheckInterval:30000}" />
  </bean>

  <bean id="dataCollectionConfigDao" class="org.opennms.netmgt.config.DefaultDataCollectionConfigDao">
    <property name="configResource" ref="dataCollectionConfigResourceLocation" />
    <property name="configDirectory" ref="dataCollectionConfigDirectoryLocation" />
    <property name="reloadCheckInterval" ref="dataCollectionConfigReloadCheckInterval" />
  </bean>

  <bean id="dataCollectionConfig-init" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="staticMethod">
      <value>org.opennms.netmgt.config.DataCollectionConfigFactory.setInstance</value>
    </property>
    <property name="arguments">
      <list>
        <ref bean="dataCollectionConfigDao" />
      </list>
    </property>
  </bean>

  <bean id="dataCollectionConfig" class="org.opennms.netmgt.config.DataCollectionConfigFactory" depends-on="dataCollectionConfig-init" factory-method="getInstance" />

  <onmsgi:service interface="org.opennms.netmgt.config.DataCollectionConfigDao" ref="dataCollectionConfigDao" />

  <bean id="resourceDao" class="org.opennms.netmgt.dao.support.DefaultResourceDao">
    <property name="nodeDao" ref="nodeDao" />
    <property name="locationMonitorDao" ref="locationMonitorDao" />
    <property name="collectdConfig" ref="collectdConfig" />
    <property name="dataCollectionConfigDao" ref="dataCollectionConfig" />
    <property name="rrdDirectory" value="${rrd.base.dir}" />
  </bean>
  
  <onmsgi:service interface="org.opennms.netmgt.dao.api.ResourceDao" ref="resourceDao" />

  <bean id="rrdStrategy" class="org.opennms.netmgt.rrd.RrdUtils" factory-method="getStrategy"/>

  <bean id="rrdDao" class="org.opennms.netmgt.dao.support.DefaultRrdDao">
    <property name="rrdStrategy" ref="rrdStrategy" />
    <property name="rrdBaseDirectory" value="${rrd.base.dir}" />
    <property name="rrdBinaryPath" value="${rrd.binary}" />
  </bean>

  <bean id="statsdConfigResourceLocation" class="java.lang.String">
    <constructor-arg value="file:${opennms.home}/etc/statsd-configuration.xml" />
  </bean>

  <bean id="statsdConfigDao" class="org.opennms.netmgt.dao.castor.DefaultStatisticsDaemonConfigDao">
    <property name="configResource" ref="statsdConfigResourceLocation" />
    <property name="reloadCheckInterval" value="-1" />
  </bean>
  
  <bean id="javamailConfigResourceLocation" class="java.lang.String">
    <constructor-arg value="file:${opennms.home}/etc/javamail-configuration.xml" />
  </bean>

  <bean id="javamailConfigDao" class="org.opennms.netmgt.dao.castor.DefaultJavamailConfigurationDao">
    <property name="configResource" ref="javamailConfigResourceLocation" />
    <property name="reloadCheckInterval" value="-1" />
  </bean>

  <bean id="onmsMapDao" class="org.opennms.netmgt.dao.hibernate.OnmsMapDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.OnmsMapDao" ref="onmsMapDao" />

  <bean id="onmsMapElementDao" class="org.opennms.netmgt.dao.hibernate.OnmsMapElementDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <onmsgi:service interface="org.opennms.netmgt.dao.api.OnmsMapElementDao" ref="onmsMapElementDao" />

  <bean id="dataLinkInterfaceDao" class="org.opennms.netmgt.dao.hibernate.DataLinkInterfaceDaoHibernate">
    <property name="sessionFactory" ref="sessionFactory" />
  </bean>
  
  <onmsgi:service interface="org.opennms.netmgt.dao.api.DataLinkInterfaceDao" ref="dataLinkInterfaceDao" />

  <bean id="init-snmpPeerFactory" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="staticMethod"><value>org.opennms.netmgt.config.SnmpPeerFactory.init</value></property>
  </bean>

  <bean id="snmpPeerFactory" class="org.opennms.netmgt.config.SnmpPeerFactory" depends-on="init-snmpPeerFactory" factory-method="getInstance"/>

  <onmsgi:service interface="org.opennms.netmgt.config.SnmpAgentConfigFactory" ref="snmpPeerFactory"/>
  
  <bean id="simpleJdbcTemplate" class="org.springframework.jdbc.core.simple.SimpleJdbcTemplate">
    <constructor-arg ref="jdbcTemplate" />
  </bean>

  <bean id="alarmStatisticsService" class="org.opennms.netmgt.dao.stats.DefaultAlarmStatisticsService" />

</beans>
