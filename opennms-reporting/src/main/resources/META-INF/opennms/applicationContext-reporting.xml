<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans.xsd">

	<bean id="availabilityReportScheduler"
		class="org.opennms.report.availability.AvailabilityReportSchedulerService"
		lazy-init="true">
		<property name="availabilityReportLocatorDao" ref="availabilityReportLocatorDao" />
	</bean>

	<bean id="availabilityReportLocator"
		class="org.opennms.report.availability.AvailabilityReportLocatorService"
		lazy-init="true">
		<property name="availabilityReportLocatorDao" ref="availabilityReportLocatorDao" />
	</bean>

	<bean id="calendarAvailabilityCalculator"
		class="org.opennms.report.availability.AvailabilityCalculator"
		scope="prototype">
		<property name="monthFormat">
			<value>calendar</value>
		</property>
		<property name="baseDir">
			<value>${opennms.report.dir}/</value>
		</property>
		<property name="locatorService" ref="availabilityReportLocator" />
		<property name="availabilityData">
			<ref local="availabilityData"/>
		</property>
	</bean>

	<bean id="classicAvailabilityCalculator"
		class="org.opennms.report.availability.AvailabilityCalculator"
		scope="prototype">
		<property name="monthFormat">
			<value>classic</value>
		</property>
		<property name="baseDir">
			<value>${opennms.report.dir}/</value>
		</property>
		<property name="locatorService" ref="availabilityReportLocator" />
		<property name="availabilityData">
			<ref local="availabilityData"/>
		</property>
	</bean>

	<bean id="pdfAvailReportRenderer"
		class="org.opennms.report.render.PDFReportRenderer">
		<property name="inputFileName">
			<value>AvailReport.xml</value>
		</property>
		<property name="outputFileName">
			<value>PDFAvailReport.pdf</value>
		</property>
		<property name="baseDir">
			<value>${opennms.report.dir}/</value>
		</property>
		<property name="xsltResource"
			value="file:${opennms.home}/etc/PDFAvailReport.xsl" />
	</bean>

	<bean id="svgAvailReportRenderer"
		class="org.opennms.report.render.PDFReportRenderer">
		<property name="inputFileName">
			<value>AvailReport.xml</value>
		</property>
		<property name="outputFileName">
			<value>SVGAvailReport.pdf</value>
		</property>
		<property name="baseDir">
			<value>${opennms.report.dir}/</value>
		</property>
		<property name="xsltResource"
			value="file:${opennms.home}/etc/SVGAvailReport.xsl" />
	</bean>

	<bean id="htmlAvailReportRenderer"
		class="org.opennms.report.render.HTMLReportRenderer">
		<property name="inputFileName">
			<value>AvailReport.xml</value>
		</property>
		<property name="outputFileName">
			<value>AvailReport.html</value>
		</property>
		<property name="baseDir">
			<value>${opennms.report.dir}/</value>
		</property>
		<property name="xsltResource"
			value="file:${opennms.home}/etc/AvailabilityReports.xsl" />
	</bean>

	<bean id="htmlConfigurationReportRenderer"
		class="org.opennms.report.render.HTMLReportRenderer">
		<property name="inputFileName">
			<value>ConfigurationReport.xml</value>
		</property>
		<property name="outputFileName">
			<value>ConfigurationReport.html</value>
		</property>
		<property name="baseDir">
			<value>${opennms.report.dir}/</value>
		</property>
		<property name="xsltResource"
			value="file:${opennms.home}/etc/rws-rancidlistreport.xsl" />
	</bean>

	<bean id="nullConfigurationReportRenderer"
		class="org.opennms.report.render.NullReportRenderer">
		<property name="inputFileName">
			<value>ConfigurationReport.xml</value>
		</property>
		<property name="outputFileName">
			<value>ConfigurationReport.xml</value>
		</property>
		<property name="baseDir">
			<value>${opennms.report.dir}/</value>
		</property>
	</bean>

	<bean id="htmlInventoryReportRenderer"
		class="org.opennms.report.render.HTMLReportRenderer">
		<property name="inputFileName">
			<value>InventoryReport.xml</value>
		</property>
		<property name="outputFileName">
			<value>InventoryReport.html</value>
		</property>
		<property name="baseDir">
			<value>${opennms.report.dir}/</value>
		</property>
		<property name="xsltResource"
			value="file:${opennms.home}/etc/rws-nbinventoryreport.xsl" />
	</bean>

	<bean id="nullInventoryReportRenderer"
		class="org.opennms.report.render.NullReportRenderer">
		<property name="inputFileName">
			<value>InventoryReport.xml</value>
		</property>
		<property name="outputFileName">
			<value>InventoryReport.xml</value>
		</property>
		<property name="baseDir">
			<value>${opennms.report.dir}/</value>
		</property>
	</bean>

	<bean id="availabilityReportRunner"
		class="org.opennms.report.availability.AvailabilityReportRunner">
		<property name="calendarCalculator">
			<ref local="calendarAvailabilityCalculator" />
		</property>
		<property name="classicCalculator">
			<ref local="classicAvailabilityCalculator" />
		</property>
		<property name="svgReportRenderer">
			<ref local="svgAvailReportRenderer" />
		</property>
		<property name="pdfReportRenderer">
			<ref local="pdfAvailReportRenderer" />
		</property>
		<property name="htmlReportRenderer">
			<ref local="htmlAvailReportRenderer" />
		</property>
	</bean>

	<bean id="availabilityReportViewerService"
		class="org.opennms.report.availability.AvailabilityReportViewerService"
		lazy-init="true">
		<property name="reportLocatorService">
			<ref local="availabilityReportLocator" />
		</property>
		<property name="baseDir">
			<value>${opennms.report.dir}/</value>
		</property>
	</bean>

	<bean id="availabilityReportService"
		class="org.opennms.report.availability.svclayer.DefaultAvailabilityReportService">
		<property name="reportRunner" ref="availabilityReportRunner" />
	</bean>
	
	<bean id="legacyAvailabilityDataService" class="org.opennms.report.availability.svclayer.LegacyAvailabilityDataService" />
    
    <bean id="availabilityData" 
    	class="org.opennms.report.availability.AvailabilityData"
    	lazy-init="true">
    	<property name="availabilityDataService"> <ref local="legacyAvailabilityDataService" />
    	</property>
    </bean>
    
    <bean id="rwsConfig-init" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
      <property name="staticMethod"><value>org.opennms.netmgt.config.RWSConfigFactory.init</value></property>
    </bean>
  
    <bean id="rwsConfig" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean" depends-on="rwsConfig-init">
      <property name="staticMethod"><value>org.opennms.netmgt.config.RWSConfigFactory.getInstance</value></property>
    </bean>
         
    
	<bean id="configurationReportCalculator"
		class="org.opennms.report.configuration.ConfigurationReportCalculator">
		<property name="baseDir">
			<value>${opennms.report.dir}/</value>
		</property>
		<property name="rwsConfig" ref="rwsConfig" />
	</bean>

	<bean id="configurationReportRunner"
		class="org.opennms.report.configuration.ConfigurationReportRunner">
		<property name="configurationReportCalculator" ref="configurationReportCalculator" />
		<property name="htmlReportRenderer">
			<ref local="htmlConfigurationReportRenderer" />
		</property>		
		<property name="nullReportRenderer">
			<ref local="nullConfigurationReportRenderer" />
		</property>		
	</bean>

	<bean id="configurationReportService"
		class="org.opennms.report.configuration.svclayer.DefaultConfigurationReportService">
		<property name="reportRunner" ref="configurationReportRunner" />
	</bean>

	<bean id="inventoryReportCalculator"
		class="org.opennms.report.inventory.InventoryReportCalculator">
		<property name="baseDir">
			<value>${opennms.report.dir}/</value>
		</property>
		<property name="rwsConfig" ref="rwsConfig" />
	</bean>

	<bean id="inventoryReportRunner"
		class="org.opennms.report.inventory.InventoryReportRunner">
		<property name="inventoryReportCalculator" ref="inventoryReportCalculator" />
		<property name="htmlReportRenderer">
			<ref local="htmlInventoryReportRenderer" />
		</property>		
		<property name="nullReportRenderer">
			<ref local="nullInventoryReportRenderer" />
		</property>		
	</bean>

	<bean id="inventoryReportService"
		class="org.opennms.report.inventory.svclayer.DefaultInventoryReportService">
		<property name="reportRunner" ref="inventoryReportRunner" />
	</bean>


</beans>