<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

  <bean id="schedulerService" class="org.opennms.web.svclayer.support.DefaultSchedulerService">
	<property name="scheduler">
		<ref local="schedulerFactory" />
	</property>
	<property name="jobDetail">
		<ref local="batchReportJobDetail" />
	</property>
	<property name="databaseReportConfigDao">
		<ref local="mockConfigDao" />
	</property>
	<property name="triggerGroup" value="reporting" />
	<property name="reportServiceLocator">
		 <ref local="reportServiceLocator"/>
	</property>
  </bean>
  
  <bean id="schedulerFactory" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="schedulerName" value="databaseReport" />
       	<property name="applicationContextSchedulerContextKey">
       		<value>applicationContext</value>
       	</property>
  </bean>
  
  <bean id="batchReportJobDetail" class="org.springframework.scheduling.quartz.JobDetailBean">
	  <property name="jobClass">
		<value>org.opennms.web.report.database.BatchReportJob</value>
	  </property>
	  <property name="durability" value="true" />
  </bean>
  
  <bean id="mockReportService" class="org.easymock.EasyMock" factory-method="createStrictMock">
	<constructor-arg value="org.opennms.api.integration.reporting.ReportService"/>
  </bean>
  
  <bean id="mockConfigDao" class="org.easymock.EasyMock" factory-method="createStrictMock">
	<constructor-arg value="org.opennms.netmgt.dao.DatabaseReportConfigDao"/>
  </bean>
  
  <bean id="reportServiceLocator" class="org.opennms.reporting.core.svclayer.support.DefaultReportServiceLocator" />
  
</beans>