<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<features name="opennms-${project.version}" xmlns="http://karaf.apache.org/xmlns/features/v1.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://karaf.apache.org/xmlns/features/v1.3.0 http://karaf.apache.org/xmlns/features/v1.3.0">
    <repository>mvn:${project.groupId}/${project.artifactId}/${project.version}/xml/core</repository>
    <repository>mvn:${project.groupId}/${project.artifactId}/${project.version}/xml/spring-legacy</repository>
    <repository>mvn:org.apache.camel.karaf/apache-camel/${camelVersion}/xml/features</repository>
    <repository>mvn:org.apache.cxf.karaf/apache-cxf/${cxfVersion}/xml/features</repository>
    <repository>mvn:org.apache.activemq/activemq-karaf/${activemqVersion}/xml/features</repository>
    <repository>mvn:org.ops4j.pax.jdbc/pax-jdbc-features/1.0.1/xml/features</repository>
    <repository>mvn:org.apache.activemq/activemq-karaf/${activemqVersion}/xml/features</repository>
    <repository>mvn:org.opennms.integration.api/karaf-features/${opennmsApiVersion}/xml</repository>
    <repository>mvn:com.eclipsesource.jaxrs/features/${osgiJaxRsVersion}/xml/features</repository>
    <repository>mvn:org.apache.karaf.features/enterprise/${karafVersion}/xml/features</repository>
    <feature name="opennms-camel-amqp" version="${project.version}" description="OpenNMS :: Features :: AMQP :: Camel Wrapper">
        <!-- start this early so camel-amqp doesn't use its old version -->
        <bundle start-level="75">mvn:org.apache.qpid/proton-j/0.34.0</bundle>
        <feature>camel-core</feature>
        <feature>camel-blueprint</feature>
        <feature>camel-http</feature>
        <feature>camel-amqp</feature>
        <feature version="[4.2,4.3)">spring</feature>
    </feature>
    <feature name="opennms-amqp-event-forwarder" version="${project.version}" description="OpenNMS :: Features :: AMQP :: Event Forwarder">
        <feature>opennms-camel-amqp</feature>
        <feature version="${guavaOsgiVersion}">guava</feature>
        <feature>opennms-core-camel</feature>
        <feature>opennms-dao-api</feature>
        <bundle>mvn:org.opennms.features.amqp/org.opennms.features.amqp.common/${project.version}</bundle>
        <bundle>mvn:org.opennms.features.amqp/org.opennms.features.amqp.event-forwarder/${project.version}</bundle>
    </feature>
    <feature name="opennms-amqp-event-receiver" version="${project.version}" description="OpenNMS :: Features :: AMQP :: Event Receiver">
        <feature>opennms-camel-amqp</feature>
        <feature version="${guavaOsgiVersion}">guava</feature>
        <feature>opennms-core-camel</feature>
        <feature>opennms-dao-api</feature>
        <bundle>mvn:org.opennms.features.amqp/org.opennms.features.amqp.common/${project.version}</bundle>
        <bundle>mvn:org.opennms.features.amqp/org.opennms.features.amqp.event-receiver/${project.version}</bundle>
    </feature>
    <feature name="opennms-amqp-alarm-northbounder" version="${project.version}" description="OpenNMS :: Features :: AMQP :: Alarm Northbounder">
        <feature>opennms-camel-amqp</feature>
        <feature>opennms-core-camel</feature>
        <bundle>mvn:org.opennms.features.amqp/org.opennms.features.amqp.common/${project.version}</bundle>
        <bundle>mvn:org.opennms.features.amqp/org.opennms.features.amqp.alarm-northbounder/${project.version}</bundle>
    </feature>
    <feature name="opennms-core-lib" version="${project.version}" description="OpenNMS :: Core :: Libraries">
        <bundle>mvn:org.opennms.core/org.opennms.core.api/${project.version}</bundle>
        <bundle>mvn:org.opennms.core/org.opennms.core.lib/${project.version}</bundle>
        <bundle>mvn:org.opennms.core/org.opennms.core.sysprops/${project.version}</bundle>
    </feature>

    <feature name="opennms-core" version="${project.version}" description="OpenNMS :: Core">
        <feature version="[4.2,4.3)">spring</feature>
        <feature version="[4.2,4.3)">spring-orm</feature>
        <feature>commons-io</feature>
        <feature>dnsjava</feature>
        <feature>jaxb</feature>
        <feature>opennms-core-lib</feature>
        <feature>opennms-util</feature>
        <bundle dependency="true">wrap:mvn:javax.inject/javax.inject/1</bundle>
        <bundle dependency="true">mvn:org.codehaus.jackson/jackson-core-asl/${jacksonVersion}</bundle>
        <bundle dependency="true">mvn:org.codehaus.jackson/jackson-mapper-asl/${jacksonVersion}</bundle>
        <bundle dependency="true">mvn:org.codehaus.jackson/jackson-xc/${jacksonVersion}</bundle>
        <bundle>mvn:org.opennms.core/org.opennms.core.commands/${project.version}</bundle>
        <bundle>mvn:org.opennms.core/org.opennms.core.criteria/${project.version}</bundle>
        <bundle>mvn:org.opennms.core/org.opennms.core.logging/${project.version}</bundle>
        <bundle>mvn:org.opennms.core/org.opennms.core.soa/${project.version}</bundle>
        <bundle>mvn:org.opennms.core/org.opennms.core.spring/${project.version}</bundle>
        <bundle>mvn:org.opennms.core/org.opennms.core.xml/${project.version}</bundle>
    </feature>
    <feature name="opennms-core-camel" version="${project.version}" description="OpenNMS :: Core :: Camel">
        <feature>camel-core</feature>
        <feature>camel-http</feature>
        <feature>camel-netty4</feature>
        <feature>opennms-core</feature>
        <bundle>mvn:org.opennms.core/org.opennms.core.camel/${project.version}</bundle>
    </feature>
</features>
