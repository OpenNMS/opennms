[[releasenotes-changelog-32.0.0]]

== Release 32.0.0

Horizon 32 features a slew of bug fixes and a number of major improvements, most notably the introduction of JDK17 support, and a major uplift in the Newts backend.

The codename for Horizon 32.0.0 is https://wikipedia.org/wiki/$$TBD$$[_Coming Soon_].

=== Enhancement

* Add lldpRemLocalPortNum in LldpLink Table (Issue https://issues.opennms.org/browse/NMS-7775[NMS-7775])
* dependabot: JasperReports from 6.3.0 to 6.20.0 (Issue https://issues.opennms.org/browse/NMS-14588[NMS-14588])
* Enhanced Linkd supports Network-Routers Map (Issue https://issues.opennms.org/browse/NMS-14678[NMS-14678])
* Destination Path Test Button (Issue https://issues.opennms.org/browse/NMS-14692[NMS-14692])
* Node Properties REST endpoint doesn't include asset location data (Issue https://issues.opennms.org/browse/NMS-14785[NMS-14785])
* fix/re-merge additional changes to password validation (Issue https://issues.opennms.org/browse/NMS-14898[NMS-14898])
* Provide a method to verify topology capability (Issue https://issues.opennms.org/browse/NMS-14909[NMS-14909])
* Special-case CounterBasedGauge64 in MIB compiler (Issue https://issues.opennms.org/browse/NMS-15210[NMS-15210])
* Remove contrib from OpenNMS (Issue https://issues.opennms.org/browse/NMS-15268[NMS-15268])
* Upgrade Groovy to 3.x (Issue https://issues.opennms.org/browse/NMS-15315[NMS-15315])
* Create an Apache mina-sshd based ssh client service poller. (Issue https://issues.opennms.org/browse/NMS-15431[NMS-15431])
* Add a method for finding and clearing alarms by TTicketID to OPA's AlarmDAO (Issue https://issues.opennms.org/browse/NMS-15439[NMS-15439])
* Upgrade Spring Security (Issue https://issues.opennms.org/browse/NMS-15506[NMS-15506])
* Doc: PersistRegexSelectorStrategy only works on string attributes (Issue https://issues.opennms.org/browse/NMS-15595[NMS-15595])
* Enable AmbientCapabilities=CAP_NET_RAW CAP_NET_BIND_SERVICE in shipped opennms.service systemd file (Issue https://issues.opennms.org/browse/NMS-15596[NMS-15596])
* Remove legacy lsb info from Minion initialization script (Issue https://issues.opennms.org/browse/NMS-15604[NMS-15604])
* Asynchronous polling engine (Issue https://issues.opennms.org/browse/NMS-15623[NMS-15623])
* Update documentation (or implementation) for newer Slack API (Issue https://issues.opennms.org/browse/NMS-15652[NMS-15652])
* Make usage statistics sharing notice dialog non-modal (Issue https://issues.opennms.org/browse/NMS-15677[NMS-15677])
* Docs: Add info about XSLT to XmlCollector (Issue https://issues.opennms.org/browse/NMS-15693[NMS-15693])
* Doc: Update DNS provisioning import adapter docs (Issue https://issues.opennms.org/browse/NMS-15694[NMS-15694])
* KSC report "details" should go directly to the related graph, rather than "all" (Issue https://issues.opennms.org/browse/NMS-15711[NMS-15711])
* Add more collection for selfmonitor node out of box (Issue https://issues.opennms.org/browse/NMS-15742[NMS-15742])

=== Task

* TrivialTimeMonitor & detector (Issue https://issues.opennms.org/browse/NMS-11063[NMS-11063])
* Rework NMS0123EnIT test (Issue https://issues.opennms.org/browse/NMS-14743[NMS-14743])
* Multiple CVEs for Axis 1.4 (Issue https://issues.opennms.org/browse/NMS-15061[NMS-15061])
* Make test for Admin page footer Copyright year (Issue https://issues.opennms.org/browse/NMS-15220[NMS-15220])
* Fix coverage test containers after we resolve NMS-15401 (Issue https://issues.opennms.org/browse/NMS-15444[NMS-15444])
* Poll Status History: Enable Poll Status RRD for all services (Issue https://issues.opennms.org/browse/NMS-15641[NMS-15641])
* Poll Status History: Change documentation to reflect the changes (Issue https://issues.opennms.org/browse/NMS-15642[NMS-15642])
* Poll Status History: Add RRD graph definitions for all services in a default poller-configuration.xml (Issue https://issues.opennms.org/browse/NMS-15643[NMS-15643])
* Document async polling settings (Issue https://issues.opennms.org/browse/NMS-15680[NMS-15680])
* Update docs to capture additional details on BMP config (Issue https://issues.opennms.org/browse/NMS-15713[NMS-15713])
* Tweak usage statistics sharing notice copy (Issue https://issues.opennms.org/browse/NMS-15740[NMS-15740])
* Call out usage statistics consent changes in Horizon 32.0.0 release notes (Issue https://issues.opennms.org/browse/NMS-15796[NMS-15796])

=== Bug

* Multiple OpenNMS feature stop working when the  Events Forwarder cannot push content to Elasticsearch (Issue https://issues.opennms.org/browse/NMS-13019[NMS-13019])
* rest api wrong LinkdTopologyProvider graphs (Issue https://issues.opennms.org/browse/NMS-14329[NMS-14329])
* Inconsistent references to JMXCollect/Monitor for "password-clear"/"password_clear" (Issue https://issues.opennms.org/browse/NMS-14884[NMS-14884])
* Docker images for Horizon 30.0.4 and later no longer have an editor or a modern pager (Issue https://issues.opennms.org/browse/NMS-14946[NMS-14946])
* CVE-2014-2228 for org.restlet 1.1.10 (Issue https://issues.opennms.org/browse/NMS-15193[NMS-15193])
* Page footer missing from Feather / Vue UIs (Issue https://issues.opennms.org/browse/NMS-15262[NMS-15262])
* Dead transaction in flow thresholding on sentinel (Issue https://issues.opennms.org/browse/NMS-15340[NMS-15340])
* Event Datetime element parsing changed between M2018 and M2021 (Issue https://issues.opennms.org/browse/NMS-15471[NMS-15471])
* Backshift graph's Data tab shows incorrect / phantom data when using STACK (Issue https://issues.opennms.org/browse/NMS-15495[NMS-15495])
* Status Overview box calculation included the alarms and outages from nodes outside of the assigned categories (Issue https://issues.opennms.org/browse/NMS-15526[NMS-15526])
* When upgrading Minion from an older version on RHEL based systems, the service file doesn't point to the main installation, but rather to /etc/init.d/minion which doesn't exist (Issue https://issues.opennms.org/browse/NMS-15600[NMS-15600])
* When upgrading Sentinel from an older version, the service file doesn't point to the main installation, but rather to /etc/init.d/sentinel which doesn't exist (Issue https://issues.opennms.org/browse/NMS-15601[NMS-15601])
* send-events-to-elasticsearch karaf command passes username/password in reverse (Issue https://issues.opennms.org/browse/NMS-15638[NMS-15638])
* Doc: File name syslog-grok-patterns.txt is wrong (Issue https://issues.opennms.org/browse/NMS-15684[NMS-15684])
* Stop packaging activemq-web-console.war (Issue https://issues.opennms.org/browse/NMS-15686[NMS-15686])
* Database deadlock caused by JdbcFilterDao (Issue https://issues.opennms.org/browse/NMS-15696[NMS-15696])
* Karaf SSH locks up if connections are terminated improperly (Issue https://issues.opennms.org/browse/NMS-15714[NMS-15714])
* Vue menubar logo link should go to 'homeUrl' (Issue https://issues.opennms.org/browse/NMS-15721[NMS-15721])
* https redirection is partially broken (Issue https://issues.opennms.org/browse/NMS-15732[NMS-15732])
* Startup taking > 10 minutes on fresh 32.0.0-SNAPSHOT builds (Issue https://issues.opennms.org/browse/NMS-15751[NMS-15751])
* Docs need updating to include support for Kafka 3 (Issue https://issues.opennms.org/browse/NMS-15777[NMS-15777])
* Add /usr/lib64/jvm to find-java.sh search paths (Issue https://issues.opennms.org/browse/NMS-15784[NMS-15784])

=== Research

* Investigate using trivy to scan containers (Issue https://issues.opennms.org/browse/NMS-14781[NMS-14781])

=== Story

* New REST endpoint provides textual description given a top-level usage statistics KPI key name (Issue https://issues.opennms.org/browse/NMS-15476[NMS-15476])
* Data choices modal dialog removed from first admin user login (Issue https://issues.opennms.org/browse/NMS-15478[NMS-15478])
* New usage statistics sharing notice dialog (Issue https://issues.opennms.org/browse/NMS-15479[NMS-15479])
* Usage Statistics Sharing UI (Issue https://issues.opennms.org/browse/NMS-15481[NMS-15481])
* Data Choices link removed in favor of Usage Statistics Sharing UI (Issue https://issues.opennms.org/browse/NMS-15482[NMS-15482])
* Data Choices modal dialog removed entirely (Issue https://issues.opennms.org/browse/NMS-15483[NMS-15483])
* Fresh installs assume usage statistics sharing consent (Issue https://issues.opennms.org/browse/NMS-15485[NMS-15485])
* Usage statistics sharing UI includes control to revoke sharing consent (Issue https://issues.opennms.org/browse/NMS-15486[NMS-15486])
* Docs explicitly state that statistics sharing consent is assumed and how to revoke it (Issue https://issues.opennms.org/browse/NMS-15490[NMS-15490])
* Official documentation describes how to uninstall and block "datachoices" feature (Issue https://issues.opennms.org/browse/NMS-15491[NMS-15491])
* Existing opted-out installs stay opted out of usage statistics sharing (Issue https://issues.opennms.org/browse/NMS-15492[NMS-15492])
* Existing opted-out installs never show the Sharing Notice Dialog (Issue https://issues.opennms.org/browse/NMS-15493[NMS-15493])
* Existing opted-out install Usage Statistics Sharing UI behaves like a revoked install (Issue https://issues.opennms.org/browse/NMS-15494[NMS-15494])
* Upgrade to Newts 3.0.0 (Issue https://issues.opennms.org/browse/NMS-15514[NMS-15514])
* Native support for Holt-Winters forecast (no dep on R) (Issue https://issues.opennms.org/browse/NMS-15622[NMS-15622])
* Review and adjust default and example startup settings (Issue https://issues.opennms.org/browse/NMS-15635[NMS-15635])

=== New Feature

* update opennms build and runtime to support JDK17 (Issue https://issues.opennms.org/browse/NMS-15609[NMS-15609])
