
== DNS considerations

If you are planning a large deployment, you may need to review your DNS configuration to ensure name lookups can be processed quickly.
DNS lookups may be preformed by different processes, including while provisioning new nodes and when receiving syslog messages.
It is vital that DNS lookups can be performed quickly to prevent them from becoming a bottleneck, which can happen if your deployment covers thousands of nodes.
One way to mitigate DNS performance is to setup your {page-component-title} as a secondary DNS server so that it is able to self-host DNS records for your network.


== Pool size and maximum database connections

You must configure the PostgreSQL https://www.postgresql.org/docs/15/runtime-config-connection.html[max_connections] setting to at least twice the maximum pool size in {page-component-title}.

The default maximum pool size value in {page-component-title} is 50, but it applies to each connect in `opennms-datasources.xml`: `opennms` (the main connection used at runtime) and `opennms-admin` (the connection used during administrative operations, including installation).
Therefore, your `max_connections` setting should be at least 100.

If you change the default pool size, make sure you also update the `max_connections`.
You typically set this in `PG_HOME/data/postgresql.conf`, but you may also use the `ALTER SYSTEM` syntax.
You must restart the PostgreSQL server for the changes to take effect.

NOTE: You may find https://pgtune.leopard.in.ua/[PGTune] useful to calculate configuration parameters for PostgreSQL.
As with all third-party tools, we do not endorse or guarantee it.
Use it at your own discretion.


== Pool size and maximum database connections

You must configure the PostgreSQL https://www.postgresql.org/docs/15/runtime-config-connection.html[max_connections] setting to at least twice the maximum pool size in {page-component-title}.

The default maximum pool size value in {page-component-title} is 50, but it applies to each connect in `opennms-datasources.xml`: `opennms` (the main connection used at runtime) and `opennms-admin` (the connection used during administrative operations, including installation).
Therefore, your `max_connections` setting should be at least 100.

If you change the default pool size, make sure you also update the `max_connections`.
You typically set this in `PG_HOME/data/postgresql.conf`, but you may also use the `ALTER SYSTEM` syntax.
You must restart the PostgreSQL server for the changes to take effect.

NOTE: You may find https://pgtune.leopard.in.ua/[PGTune] useful to calculate configuration parameters for PostgreSQL.
As with all third-party tools, we do not endorse or guarantee it.
Use it at your own discretion.
