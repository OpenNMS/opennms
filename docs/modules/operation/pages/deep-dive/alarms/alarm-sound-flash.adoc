
= Alarm Sounds

In certain situations, you may want an audible indication of a change in alarm state.
The Alarms List page has the optional ability to generate a sound either when new alarms are created, or on each change to an alarm event count on the page.

The alarm sound feature is disabled by default.
A system administrator must activate the sound feature, and can define default sound settings for all users.
Users can modify the default sound settings for the duration of their session via a drop-down list with the following options:

* *Sound Off:* No sounds will be generated from the page.
* *Sound On New Alarm:* Sounds will be generated for every new alarm on the page.
* *Sound On New Alarm Count:* Sounds will be generated for every increase in the alarm event count for alarms on the page.
This may result in many sounds being played.

== Flashing unacknowledged alarms

By default, the Alarms List page displays acknowledged and unacknowledged alarms in separate search tabs.
In your operational environment, however, it may be useful to see all alarms on the same page, with unacknowledged alarms flashing to indicate that a team member has not yet acknowledged them.
This lets everyone see the real-time status of all alarms, and highlights those that still need attention.

.Alarms List page with sounds and flashing unacknowledged alarms enabled
image::alarms/01_alarm-sound.png["Alarms List page with sound on new alarm and flashing unacknowledged alarms enabled", 850]

Unacknowledged alarms flash steadily.
Alarms that have been acknowledged do not flash, and have a small tick beside their ID numbers.
You can select multiple alarms to escalate, clear, acknowledge, or unacknowledge by checking the associated *Ack* boxes.

== Configure alarm sounds and flashing

To enable alarm sounds or flashing alarms, edit `$\{OPENNMS_HOME}/etc/opennms.properties.d/alarm.properties`:

[source, properties]
----
# ###### Alarm List Page Options ######
# Several options are available to change the default behavior of the Alarm List Page.
# <opennms url>/opennms/alarm/list.htm
#
# The alarm list page has the ability to generate a sound either on each new alarm
# or (more annoyingly) on each change to an alarm event count on the page.
#
# Turn on the sound feature. Set true and Alarm List Pages can generate sounds in the web browser.
opennms.alarmlist.sound.enable=true
#
# Set the default setting for how the Alarm List Pages generates sounds. The default setting can be
# modified by users for the duration of their logged-in session using a drop down menu.
#    off = no sounds generated by the page.
#    newalarm = sounds generated for every new alarm in the page
#    newalarmcount = sounds generated for every increase in alarm event count for alarms on the page
#
opennms.alarmlist.sound.status=off

# By default the alarm list page displays acknowledged and unacknowledged alarms in separate search tabs
# Some users have asked to be able to see both on the same page. This option lets the alarm list page
# display acknowledged and unacknowledged alarms on the same list but unacknowledged alarms
# flash until they are acknowledged.
#
opennms.alarmlist.unackflash=true
----

NOTE: If `alarm.properties` does not exist, create it and specify the above settings.

The sound that is played is determined by the contents of `$\{OPENNMS_HOME}/jetty-webapps/opennms/sounds/alert.wav`.
To change the alarm sound, create a new `.wav` file with the desired sound, name it `alert.wav`, and replace the default file in `$\{OPENNMS_HOME}/jetty-webapps/opennms/sounds/`.
