
[[ga-alarm-sounds]]
= Alarm Sounds

Often users want an audible indication of a change in alarm state.
The {page-component-title} alarm list page has the optional ability to generate a sound either on each new alarm or (more annoyingly) on each change to an alarm event count on the page.

The figure <<ga-alarm-sounds-ui, Alarm Sounds View>> shows the alarm list page when alarms sounds are enabled.

[[ga-alarm-sounds-ui]]
.Alarm Sounds View
image::alarms/01_alarm-sound.png[]

By default the alarm sound feature is disabled.
System administrators must activate the sound feature and also set the default sound setting for all users.
However, users can modify the default sound setting for the duration of their logged-in session using a drop-down menu with the following options:

* Sound off: no sounds generated by the page.
* Sound on new alarm: sounds generated for every new alarm on the page.
* Sound on new alarm count: sounds generated for every increase in alarm event count for alarms on the page.

== Flashing Unacknowledged Alarms

By default {page-component-title} displays the alarm list page with acknowledged and unacknowledged alarms listed in separate search tabs.
In a number of operational environments it is useful to see all of the alarms on the same page with unacknowledged alarms flashing to indicate that they have not yet been noticed by one of the team.
This lets everyone see the real-time status of all alarms and which alarms still need attention.

The figure <<ga-alarm-sounds-ui, Alarm Sounds View>> also shows the alarm list page when flashing unacknowledged alarms are enabled.
Alarms that are unacknowledged flash steadily.
Alarms that have been acknowledged do not flash and also have a small tick beside the selection check box.
You can select all alarms to be escalated, cleared, acknowledged, and unacknowledged.

== Configuring Alarm Sounds and Flashing

By default {page-component-title} does not enable alarm sounds or flashing alarms.
To enable these features, create or edit the `alarm.properties` file in `$\{OPENNMS_HOME}/etc/opennms.properties.d/` and apply the following settings:

.Configuration properties related to Alarm sound and flashing visualization
[source, properties]
----
# ###### Alarm List Page Options ######
# Several options are available to change the default behavior of the Alarm List Page.
# <opennms url>/opennms/alarm/list.htm
#
# The alarm list page has the ability to generate a sound either on each new alarm
# or (more annoyingly) on each change to an alarm event count on the page.
#
# Turn on the sound feature. Set true and Alarm List Pages can generate sounds in the web browser.
opennms.alarmlist.sound.enable=true
#
# Set the default setting for how the Alarm List Pages generates sounds. The default setting can be
# modified by users for the duration of their logged-in session using a drop down menu.
#    off = no sounds generated by the page.
#    newalarm = sounds generated for every new alarm in the page
#    newalarmcount = sounds generated for every increase in alarm event count for alarms on the page
#
opennms.alarmlist.sound.status=off

# By default the alarm list page displays acknowledged and unacknowledged alarms in separate search tabs
# Some users have asked to be able to see both on the same page. This option lets the alarm list page
# display acknowledged and unacknowledged alarms on the same list but unacknowledged alarms
# flash until they are acknowledged.
#
opennms.alarmlist.unackflash=true
----

The sound played is determined by the contents of the following file `$\{OPENNMS_HOME}/jetty-webapps/opennms/sounds/alert.wav`

If you want to change the sound, create a new wav file with your desired sound, name it `alert.wav` and replace the default file in the same directory.
