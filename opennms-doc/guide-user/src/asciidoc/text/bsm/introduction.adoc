
// Allow GitHub image rendering
:imagesdir: ../../images

While OpenNMS detects issues in your network by device, interface or service, the _Business Service Monitoring (BSM)_ takes one step further.
The _BSM_ components allows to monitor and model high level _Business Services (BS)_ and helps to quickly identify most critical problems affecting your services.
With the _BSM_ feature it is possible to model high level _BS_ context around the technical _Service Monitors_ provided in _OpenNMS_.
To indicate which _BS_ is effected an _Operational Status_ is calculated.

As an example scenario a company runs a shop over the internet.
The customer enter through a login system, select items, place them in the shopping cart and checkout using a payment system.
The whole service is provided by a few web servers and access data from databases.
To monitor the status of the databases, a _SQL_ service monitor on each database server is configured.
For testing the web servers a _HTTP_ service monitor is used for each of them.
Covering the overall functionality a _Page Sequence Monitor (PSM)_ is used to test the login, shop and payment workflow through the provided web portal.
A possible representation of the whole system hierarchy is shown in figure <<ug-bsm-example-web-shop,Example scenario for a web shop>>.

[[ug-bsm-example-web-shop]]
.Example scenario for a web shop
image:bsm/01_bsm-example-scenario.png[]

To be able to model this scenarios the _BSM_ functions can be used.
The following section describes the components, concepts and functions.
For configuration and changing the behavior please go to the section _Business Service Monitoring_ in the _Administration Guide_.

=== Business Service Hierarchy

To model the Business Service Hierarchy t


_BS_ can depend on each other and are handled as a _Business Service Hierarchy_ which is visualized in the _Topology User Interface_.
Based on the hierarchy the _Operational Status_ is calculated with _Map_ and _Reduce Functions_.
The _Map Function_ influences which _Severity_ from the _Edge_ is used as an input of the _BS_.
A _Reduce Function_ is a function applied on all inputs of the _BS_ and evaluates also _Weights_ to calculate the _Operational Status_.


The _Topology User Interface_ allows to reduce and expand the components shown in _Business Service Hierarchy_ using the _Semantic Zoom Level_.
Higher _Semantic Zoom Level_ defines how many _Neighbors_ are shown related to the elements which are in _Focus_.
The number can be interpreted as how many hops from the _Focus_ should be shown on the _Topology User Interface_.

[[gu-bsm-hierarchy-image]]
.Business Service Hierarchy components
image::bsm/02_bsm-service-hierarchy.png[]

<1> _Business Service_ on highest level which depends on other _Monitored Services_ or _Alarms_
<2> _Business Service_ as _Edge_ to aggregate an _Operational Status_
<3> _IP Service_ as _Edge_ as input to calculate the _Operational Status_ of the high level _BS_
<4> _Reduce Key_ as _Edge_ which classifies in this example _SSH Authentication failures_ coming from _Syslog_.
<5> _Reduce Key_ which is auto generated by using _IP Service_ as _Edge_

To add an additional selected _BS_ or _Edge_ to _Focus_ use in the context menu _Add to Focus_.
If you want to have a specific _BS_ or _Edge_ as a single focus use _Set as Focal Point_.


The _Operational Status_ of a _BS_ is calculated from _Alarms_ and the _Severity_ driven from the monitoring from _OpenNMS_.
To reflect more granularity just as _up_ or _down_, the _Operational Status_ uses the _Severities_, i.e. _Normal_, _Warning_, _Minor_, _Major_, _Critical_.
The class of _Alarms_ used to calculate the _Operational Status_ are defined with _Reduce Keys_ and are represented as _Edges_.

Some
