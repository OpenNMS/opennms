
// Allow GitHub image rendering
:imagesdir: ../../images

While OpenNMS detects issues in your network by device, interface or service, the _Business Service Monitoring (BSM)_ takes it one step further.
The _BSM_ components allows you to monitor and model high level _Business Services (BS)_ and helps quickly identify the most critical problems affecting these.
With the _BSM_ feature it is possible to model a high level _BS_ context around the technical _Service Monitors_ provided in _OpenNMS_.
To indicate which _BS_ is effected an _Operational Status_ is calculated.

As an example, let's assume a company runs an online store.
Customers enter through a login system, select items, place them in the shopping cart and checkout using a payment system.
The whole service is provided by a few web servers and access data from databases.
To monitor the status of the databases, a _SQL_ service monitor on each database server is configured.
For testing the web servers a _HTTP_ service monitor is used for each of them.
Covering the overall functionality a _Page Sequence Monitor (PSM)_ is used to test the login, shop and payment workflow through the provided web portal.
A possible representation of the whole system hierarchy is shown in figure <<ug-bsm-example-web-shop,Example scenario for a web shop>>.

[[ug-bsm-example-web-shop]]
.Example scenario for a web shop
image:bsm/01_bsm-example-scenario.png[]

To be able to model this scenarios the _BSM_ functions can be used.
The following section describes the components, concepts and functions.
For configuration and changing the behavior please go to the section _Business Service Monitoring_ in the _Administration Guide_.

=== Business Service Hierarchy

_BS_ can depend on other _BS_ and together form a _Business Service Hierarchy_ which can be visualized using the _Topology User Interface_.
Based on the hierarchy, the _Operational Status_ is calculated with _Map_ and _Reduce Functions_.
A _Map Function_ influences which _Severity_ from the _Edge_ is used as an input to the _BS_.
A _Reduce Function_ is used to consolidate the _Severities_ from all of the inputs into a single _Severity_, which is reflected as the _Operational Status_.


The _Topology User Interface_ allows users to traverse _Business Service Hierarchies_ using the _Semantic Zoom Level_.
The _Semantic Zoom Level_ (SZL, pronounced as 'sizzle') defines how many _Neighbors_ are shown related to the elements which are in _Focus_.
The number can be interpreted as how many hops from the _Focus_ should be shown on the _Topology User Interface_.

[[gu-bsm-hierarchy-image]]
.Business Service Hierarchy components
image::bsm/02_bsm-service-hierarchy.png[]

<1> A top-level _Business Service_ which depends on other _Business Services_, _Monitored Services_ and _Alarms_ (referenced by _Reduction Key_)
<2> _Business Service_ _Edge_ used to aggregate the _Operational Status_ of it's children
<3> _IP Service_ _Edge_ used as an input to the top-level _BS_
<4> _Reduction Key_ _Edge_ used as an input to the top-level _BS_, which in this references an alarm generated by _SSH Authentication failures_ coming from _Syslog_.
<5> _Reduction Key_ _Edge_ auto generated by the _IP Service_ _Edge_

To add an additional selected _BS_ or _Edge_ to _Focus_ use in the context menu _Add to Focus_.
If you want to have a specific _BS_ or _Edge_ as a single focus use _Set as Focal Point_.


The _Operational Status_ of a _BS_ is ultimately calculated from _Alarms_ and their _Severity_.
To reflect more granularity than just _Up_ or _Down_, the _Operational Status_ uses the _Severities_, i.e. _Normal_, _Warning_, _Minor_, _Major_, _Critical_.
The set of _Alarms_ used to calculate the _Operational Status_ are defined using the _Reduction Keys_, which are represented as _Edges_.
