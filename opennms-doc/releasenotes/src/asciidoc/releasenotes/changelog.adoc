[[release-25-changelog]]

=== Changelog

[releasenotes-changelog-25.0.0]

==== Release 25.0.0

Release 25.0.0 is the first release in the Horizon 25 series.

It contains a huge number of bug fixes and enhancements, most notably massive thresholding improvements, big changes to netflow and other streaming telemetry data, reporting and UI updates, plus much more.

The codename for 25.0.0 is _link:https://en.wikipedia.org/wiki/Baozi[Baozi]_.

===== Bug

* "Graph all" fails with 'Request Header Fields Too Large' error (Issue http://issues.opennms.org/browse/NMS-8712[NMS-8712])
* reload Pollerd doesn't work correctly (Issue http://issues.opennms.org/browse/NMS-9181[NMS-9181])
* No class found exception in OSGi for org.osgi.service.jdbc.DataSourceFactory (Issue http://issues.opennms.org/browse/NMS-9341[NMS-9341])
* GenericResourceType is altering index names on class object initialization (Issue http://issues.opennms.org/browse/NMS-9702[NMS-9702])
* Updating external lists referenced by include-url requires restart OpenNMS (Issue http://issues.opennms.org/browse/NMS-10071[NMS-10071])
* Telephone PIN Field in User Details is Misplaced (Issue http://issues.opennms.org/browse/NMS-10073[NMS-10073])
* HealthCheck should not fail for ElasticSearch if flows are not enabled (Issue http://issues.opennms.org/browse/NMS-10498[NMS-10498])
* Syslog incorrect dates being parsed into database (Issue http://issues.opennms.org/browse/NMS-10605[NMS-10605])
* Zooming with Backshift is broken (Issue http://issues.opennms.org/browse/NMS-10635[NMS-10635])
* MonitoredServiceDaoIT test fail due to database  (Issue http://issues.opennms.org/browse/NMS-10643[NMS-10643])
* EventdIT test failure (Issue http://issues.opennms.org/browse/NMS-10644[NMS-10644])
* DuplicatePrimaryAddressIT logs a failure due to logging assertion (Issue http://issues.opennms.org/browse/NMS-10645[NMS-10645])
* Reflected file download vulnerability in /api/v2/scanreports (Issue http://issues.opennms.org/browse/NMS-10703[NMS-10703])
* Insecure cache-control for session cookies (Issue http://issues.opennms.org/browse/NMS-10704[NMS-10704])
* Reflected XSS vulnerability in notification/detail.jsp and outage/detail.htm (Issue http://issues.opennms.org/browse/NMS-10707[NMS-10707])
* Kafka alarm producer synchronization fails due to missing event (Issue http://issues.opennms.org/browse/NMS-10724[NMS-10724])
* Documentation broken (Issue http://issues.opennms.org/browse/NMS-10759[NMS-10759])
* [circleci] Building container images fails intermittently (Issue http://issues.opennms.org/browse/NMS-10834[NMS-10834])
* Fix version range for maven-jaxb-schemagen-plugin version in root pom (Issue http://issues.opennms.org/browse/NMS-11760[NMS-11760])
* Sentinel container does not contain integration API in maven repository (Issue http://issues.opennms.org/browse/NMS-11766[NMS-11766])
* Windows is failing tests due to spurious cleanup errors (Issue http://issues.opennms.org/browse/NMS-12102[NMS-12102])
* AS is stored as signed int in flow doc (Issue http://issues.opennms.org/browse/NMS-12105[NMS-12105])
* Add local cache to reverse hostname resolution in flows (Issue http://issues.opennms.org/browse/NMS-12117[NMS-12117])
* karaf.log appears on the root file system when running Minion/Sentinel on Ubuntu/Debian. (Issue http://issues.opennms.org/browse/NMS-12125[NMS-12125])
* Sentinel cannot persist Telemetry when running under OracleJDK 11 (Issue http://issues.opennms.org/browse/NMS-12126[NMS-12126])
* Cannot debug Telemetry persistence on Sentinel (Issue http://issues.opennms.org/browse/NMS-12127[NMS-12127])
* Outage timeline is empty (Issue http://issues.opennms.org/browse/NMS-12160[NMS-12160])
* Minion not showing label correctly and label cannot be edited (Issue http://issues.opennms.org/browse/NMS-12164[NMS-12164])
* WsManWQLDetector, ActiveMQDetector missing setBeanProperties (Issue http://issues.opennms.org/browse/NMS-12175[NMS-12175])
* sFlow adapter drops flows due to NPE (Issue http://issues.opennms.org/browse/NMS-12185[NMS-12185])
* BulkRequests should log more details of why it failed (Issue http://issues.opennms.org/browse/NMS-12188[NMS-12188])
* The Cron Expression is only shown for reports which are created with the new UI (Issue http://issues.opennms.org/browse/NMS-12189[NMS-12189])
* Fix typo in sonar.sh (Issue http://issues.opennms.org/browse/NMS-12196[NMS-12196])
* Minion memory leak related to new DNS lookup functionality (Issue http://issues.opennms.org/browse/NMS-12207[NMS-12207])
* JMX Metrics for Newts disappeared  (Issue http://issues.opennms.org/browse/NMS-12216[NMS-12216])
* Can't change Minion location in the Provisiond UI (Issue http://issues.opennms.org/browse/NMS-12217[NMS-12217])
* Changing a nodes location breaks the service polling schedule (Issue http://issues.opennms.org/browse/NMS-12219[NMS-12219])
* Wrong PID in opennms.pid (Issue http://issues.opennms.org/browse/NMS-12226[NMS-12226])
* interfaceresolv event token is incorrect (Issue http://issues.opennms.org/browse/NMS-12227[NMS-12227])
* Kafka RPC: Slow callbacks cause lag on response topics (Issue http://issues.opennms.org/browse/NMS-12232[NMS-12232])
* WS-MAN  doesn't work with JDK 11 (Issue http://issues.opennms.org/browse/NMS-12235[NMS-12235])
* Kafka RPC: StackOverflowError while unmarshaling causes processing to halt (Issue http://issues.opennms.org/browse/NMS-12236[NMS-12236])
* Ops wallboard hanging due to Vaadin session deadlock (Issue http://issues.opennms.org/browse/NMS-12237[NMS-12237])
* Fix flapping DatabaseReportPageIT (Issue http://issues.opennms.org/browse/NMS-12241[NMS-12241])
* Invalid timestamps used for CollectionSets generated by telemetryd (Issue http://issues.opennms.org/browse/NMS-12242[NMS-12242])
* DNS resolved hostname should always be reflected in 'iphostname' field in ipinterface table (Issue http://issues.opennms.org/browse/NMS-12249[NMS-12249])
* Cannot change the type of a scheduled outage (Issue http://issues.opennms.org/browse/NMS-12255[NMS-12255])
* DefaultReportWrapperService: failed to run or render report (Issue http://issues.opennms.org/browse/NMS-12258[NMS-12258])
* Rewrite test in ScheduleOutageIT for new UI (Issue http://issues.opennms.org/browse/NMS-12264[NMS-12264])
* vmwarereqtool freezes and never return to the prompt after is executed (Issue http://issues.opennms.org/browse/NMS-12265[NMS-12265])
* EnhancedLinkd-Thread-x-of-x - Null Pointer Exception (Issue http://issues.opennms.org/browse/NMS-12267[NMS-12267])
* ScriptPolicy scripts encounter LazyInitializationException on calling node.getSnmpInterface() (Issue http://issues.opennms.org/browse/NMS-12268[NMS-12268])
* Remove old comment from data source configuration (Issue http://issues.opennms.org/browse/NMS-12270[NMS-12270])
* Fix usage description of vmwarereqtool (Issue http://issues.opennms.org/browse/NMS-12275[NMS-12275])
* Poller take a long time to startup/initialize on large systems (Issue http://issues.opennms.org/browse/NMS-12285[NMS-12285])
* Ordering of classification groups does not work (Issue http://issues.opennms.org/browse/NMS-12286[NMS-12286])
* Default settings in container image don't write RRD files (Issue http://issues.opennms.org/browse/NMS-12290[NMS-12290])
* Grafana report generation is timing out (Issue http://issues.opennms.org/browse/NMS-12297[NMS-12297])
* Default "90% Interface Throughput" Threshold Doesn't Work (Issue http://issues.opennms.org/browse/NMS-12301[NMS-12301])
* ConcurrentModificationException when cloning events (Issue http://issues.opennms.org/browse/NMS-12306[NMS-12306])

===== Enhancement

* Remove alarm-change-notifier plugin (Issue http://issues.opennms.org/browse/NMS-10658[NMS-10658])
* Enforce VertexRef to be immutable  (Issue http://issues.opennms.org/browse/NMS-11138[NMS-11138])
* View traffic for specific hosts over time (flows) (backend work) (Issue http://issues.opennms.org/browse/NMS-11153[NMS-11153])
* Initial CircleCI pipeline (Issue http://issues.opennms.org/browse/NMS-11157[NMS-11157])
* Update flow indicators for SNMP interfaces to link to deep dive tool (Issue http://issues.opennms.org/browse/NMS-11169[NMS-11169])
* Refactor GraphProvider to return Graph instead of being the Graph itself (Issue http://issues.opennms.org/browse/NMS-11264[NMS-11264])
* Design new header for PDF reports (Issue http://issues.opennms.org/browse/NMS-11305[NMS-11305])
* Edges should allow to contain vertices of different namespaces (Issue http://issues.opennms.org/browse/NMS-11343[NMS-11343])
* View traffic for specific conversations over time (flows) (backend work) (Issue http://issues.opennms.org/browse/NMS-11345[NMS-11345])
* Core structure/API of new Graph Service (Issue http://issues.opennms.org/browse/NMS-11366[NMS-11366])
* Implement domain specific graph objects in New Graph service (Issue http://issues.opennms.org/browse/NMS-11408[NMS-11408])
* View traffic for specific applications over time (flows) - back end work (Issue http://issues.opennms.org/browse/NMS-11458[NMS-11458])
* Use composite aggregation instead of convo_key field from flow documents (Issue http://issues.opennms.org/browse/NMS-11473[NMS-11473])
* Provide new GraphProvider implementation for the ApplicationTopologyProvider (Issue http://issues.opennms.org/browse/NMS-11506[NMS-11506])
* Indicators for nodes with flow data (Issue http://issues.opennms.org/browse/NMS-11523[NMS-11523])
* The GraphService interface should return GenericGraph instead of Graph<?, ?> (Issue http://issues.opennms.org/browse/NMS-11554[NMS-11554])
* Provide capability to expose GraphContainerProviders with only one graph (SingleGraphContainerProvider) (Issue http://issues.opennms.org/browse/NMS-11574[NMS-11574])
* Make GraphRepository accessible via OSGI (Issue http://issues.opennms.org/browse/NMS-11575[NMS-11575])
* Make GraphRepository persist collections (Issue http://issues.opennms.org/browse/NMS-11624[NMS-11624])
* Implement ReST Service for the new Graph Service (Issue http://issues.opennms.org/browse/NMS-11636[NMS-11636])
* Search for nodes that have flow data (Issue http://issues.opennms.org/browse/NMS-11654[NMS-11654])
* Refactoring Docker Container Images towards Horizon 25 (Issue http://issues.opennms.org/browse/NMS-11719[NMS-11719])
* Run container image as non-root (Issue http://issues.opennms.org/browse/NMS-11720[NMS-11720])
* Replace custom bash templating with Confd and streamline entrypoint script (Issue http://issues.opennms.org/browse/NMS-11721[NMS-11721])
* Replace current (Spring Webflow) Reporting UI with an angular implementation (Issue http://issues.opennms.org/browse/NMS-11723[NMS-11723])
* CircleCI (Issue http://issues.opennms.org/browse/NMS-11830[NMS-11830])
* Thresholding for streaming metrics & more (Issue http://issues.opennms.org/browse/NMS-11834[NMS-11834])
* Project Drift Enhancements (Issue http://issues.opennms.org/browse/NMS-11836[NMS-11836])
* Grafana Integration (Issue http://issues.opennms.org/browse/NMS-11844[NMS-11844])
* Enterprise Reporting Enhancements (Issue http://issues.opennms.org/browse/NMS-11861[NMS-11861])
* Grouped flow classification rules (Issue http://issues.opennms.org/browse/NMS-11975[NMS-11975])
* Make Graph immutable (Issue http://issues.opennms.org/browse/NMS-11985[NMS-11985])
* Skew detection for flow timestamps (Issue http://issues.opennms.org/browse/NMS-11993[NMS-11993])
* Run system tests using OpenJDK 11 (Issue http://issues.opennms.org/browse/NMS-11995[NMS-11995])
* Top N hosts (flows) (Issue http://issues.opennms.org/browse/NMS-11998[NMS-11998])
* Dynamically change a node's location (Issue http://issues.opennms.org/browse/NMS-12053[NMS-12053])
* Customize priority of flow classification rules (Issue http://issues.opennms.org/browse/NMS-12058[NMS-12058])
* Flow classification role (Issue http://issues.opennms.org/browse/NMS-12065[NMS-12065])
* Add support for sending events from a Minion (Issue http://issues.opennms.org/browse/NMS-12078[NMS-12078])
* Hostname resolution for flows (Issue http://issues.opennms.org/browse/NMS-12087[NMS-12087])
* Provide search capabilities (Issue http://issues.opennms.org/browse/NMS-12092[NMS-12092])
* KPIs for resource graphs (Issue http://issues.opennms.org/browse/NMS-12095[NMS-12095])
* Migrate system tests to use TestContainers framework (Issue http://issues.opennms.org/browse/NMS-12107[NMS-12107])
* Remove hack from opennms-spring-extender to expose ServiceRegistry (Issue http://issues.opennms.org/browse/NMS-12122[NMS-12122])
* Upgrade Bootstrap to latest 4.3.x version (Issue http://issues.opennms.org/browse/NMS-12124[NMS-12124])
* Allow tarball installation in Docker images for Horizon (Issue http://issues.opennms.org/browse/NMS-12133[NMS-12133])
* Add the ability to trigger a requisition import via the Karaf shell (Issue http://issues.opennms.org/browse/NMS-12135[NMS-12135])
* Store and read thresholding configuration from PostgreSQL (Issue http://issues.opennms.org/browse/NMS-12140[NMS-12140])
* Add support for sending events from Sentinel (Issue http://issues.opennms.org/browse/NMS-12141[NMS-12141])
* Stickiness for distributed processing in telemetryd (Issue http://issues.opennms.org/browse/NMS-12142[NMS-12142])
* Share thresholding state across Sentinels (Issue http://issues.opennms.org/browse/NMS-12143[NMS-12143])
* Create Jasper report templates for Grafana dashboards (Issue http://issues.opennms.org/browse/NMS-12144[NMS-12144])
* Improve Grafana report rendering speed (Issue http://issues.opennms.org/browse/NMS-12145[NMS-12145])
* Implement easier datetime selection (Issue http://issues.opennms.org/browse/NMS-12147[NMS-12147])
*  Consider timezone when scheduling reports (Issue http://issues.opennms.org/browse/NMS-12148[NMS-12148])
* Allow multiple recipients when delivering/scheduling a report (Issue http://issues.opennms.org/browse/NMS-12149[NMS-12149])
* Add ability to edit existing scheduled reports (Issue http://issues.opennms.org/browse/NMS-12150[NMS-12150])
* Allow for searching a dashboard (Issue http://issues.opennms.org/browse/NMS-12152[NMS-12152])
* Easier Schedule Definition (Issue http://issues.opennms.org/browse/NMS-12154[NMS-12154])
* Improve performance of hostname resolution for flows (Issue http://issues.opennms.org/browse/NMS-12157[NMS-12157])
* Remove Legacy Database Reports (Web Flow) (Issue http://issues.opennms.org/browse/NMS-12158[NMS-12158])
* UsersRestService: /users/whoami returns 404 on ldap authenticated user (not in users.xml) (Issue http://issues.opennms.org/browse/NMS-12159[NMS-12159])
* User conceptualizes profile-fitting for SNMP across enterprise (Issue http://issues.opennms.org/browse/NMS-12167[NMS-12167])
* User provisions nodes with SNMP profiles in place (Issue http://issues.opennms.org/browse/NMS-12169[NMS-12169])
* Grafana reporting: Render exceptions in images instead of aborting (Issue http://issues.opennms.org/browse/NMS-12170[NMS-12170])
* Collect and graph packet reception rates for telemetryd listeners (Issue http://issues.opennms.org/browse/NMS-12182[NMS-12182])
* Allow developer to push OCI's to docker hub from arbitrary branches (Issue http://issues.opennms.org/browse/NMS-12187[NMS-12187])
* Enable flow UDP listener by default on Minion and OpenNMS (Issue http://issues.opennms.org/browse/NMS-12190[NMS-12190])
* Upgrade Drools to latest 7.x release (Issue http://issues.opennms.org/browse/NMS-12191[NMS-12191])
* Grafana Reporting: Add time to date range in report header of template (Issue http://issues.opennms.org/browse/NMS-12200[NMS-12200])
* Show configured rule groups (Issue http://issues.opennms.org/browse/NMS-12212[NMS-12212])
* Edit (CRUD) rule groups via rest & gui (Issue http://issues.opennms.org/browse/NMS-12213[NMS-12213])
* Add reply-to field to notification emails (Issue http://issues.opennms.org/browse/NMS-12224[NMS-12224])
* Ensure the reporting jar for jasperstudio is still working and containing all the relevant jars (Issue http://issues.opennms.org/browse/NMS-12229[NMS-12229])
* Verify Database Reporting Documentation is still up to date (Issue http://issues.opennms.org/browse/NMS-12230[NMS-12230])
* Dependency based testing (Issue http://issues.opennms.org/browse/NMS-12233[NMS-12233])
* Update minimum required version of PostgresSQL for H25 (Issue http://issues.opennms.org/browse/NMS-12238[NMS-12238])
* Report scheduler should be disableable (Issue http://issues.opennms.org/browse/NMS-12240[NMS-12240])
* Add support for meta-data fields in thresholding expressions (Issue http://issues.opennms.org/browse/NMS-12247[NMS-12247])
* Manage persisted threshold state via shell (Issue http://issues.opennms.org/browse/NMS-12248[NMS-12248])
* Increase default heap size to 2GB (Issue http://issues.opennms.org/browse/NMS-12276[NMS-12276])
* Expose Kafka Lag on Sink/RPC through Karaf shell (Issue http://issues.opennms.org/browse/NMS-12295[NMS-12295])
* Expose RPC/Sink Metrics on Karaf shell (Issue http://issues.opennms.org/browse/NMS-12296[NMS-12296])
* Expose health:check via ReST (Issue http://issues.opennms.org/browse/NMS-12298[NMS-12298])
* Add a JMS broker monitor (Issue http://issues.opennms.org/browse/NMS-7188[NMS-7188])
* Expose the complete OnmsNode object in Scriptd to avoid LazyInitializationExceptions (Issue http://issues.opennms.org/browse/NMS-8294[NMS-8294])
* Document RPC TTL tuning (Issue http://issues.opennms.org/browse/NMS-10376[NMS-10376])
* Redesign default threshold events (Issue http://issues.opennms.org/browse/NMS-10672[NMS-10672])
* Filter alarm list by surveillance categories (Issue http://issues.opennms.org/browse/NMS-10695[NMS-10695])
* use sevntu-checkstyle-maven-plugin from maven-central (Issue http://issues.opennms.org/browse/NMS-10717[NMS-10717])
* use org.asteriskjava:asterisk-java from maven-central (Issue http://issues.opennms.org/browse/NMS-10718[NMS-10718])
* Angular requests do not handle 401 responses from the OpenNMS backend (Issue http://issues.opennms.org/browse/NMS-10719[NMS-10719])
* Increase logging clarity for flow processing (Issue http://issues.opennms.org/browse/NMS-10723[NMS-10723])
* Support compression in JestClient for Elasticsearch (Issue http://issues.opennms.org/browse/NMS-10859[NMS-10859])
* Publish Docker images from CircleCI to DockerHub (Issue http://issues.opennms.org/browse/NMS-11722[NMS-11722])
* Improve the sample content for the NXOS GPB Parser Groovy Script. (Issue http://issues.opennms.org/browse/NMS-11759[NMS-11759])
* Design thresholding support for telemetryd on Sentinel (Issue http://issues.opennms.org/browse/NMS-11776[NMS-11776])
* Thresholding support for push metrics (Issue http://issues.opennms.org/browse/NMS-11797[NMS-11797])
* View traffic for specific conversations over time (flows) (frontend work) (Issue http://issues.opennms.org/browse/NMS-12074[NMS-12074])
* Provide possibility to add Grafana Instances (Issue http://issues.opennms.org/browse/NMS-12075[NMS-12075])
* View traffic for specific applications over time (flows) - front end work (Issue http://issues.opennms.org/browse/NMS-12076[NMS-12076])
* View traffic for specific hosts over time (flows) (frontend work) (Issue http://issues.opennms.org/browse/NMS-12077[NMS-12077])
* Support wildcards in service names (Issue http://issues.opennms.org/browse/NMS-12080[NMS-12080])
* Refactor threshd out of opennms-services (Issue http://issues.opennms.org/browse/NMS-12081[NMS-12081])
* Configurable index name for Event & Alarm Forwarder (Issue http://issues.opennms.org/browse/NMS-12082[NMS-12082])
* Add a UI to edit meta-data in requisition (Issue http://issues.opennms.org/browse/NMS-12083[NMS-12083])
* Custom TTLs for detectors, monitors and collectors (Issue http://issues.opennms.org/browse/NMS-12096[NMS-12096])
* Update Elasticsearch integrations to support ES 7.x (Issue http://issues.opennms.org/browse/NMS-12099[NMS-12099])
* Update Webpack Build to Latest Babel and TypeScript (Issue http://issues.opennms.org/browse/NMS-12130[NMS-12130])
* Enhance CircleCI workflow to reduce build times and tests (Issue http://issues.opennms.org/browse/NMS-12136[NMS-12136])
* Add SonarQube Code Coverage to CircleCI Workflow (Issue http://issues.opennms.org/browse/NMS-12163[NMS-12163])
* Create feature to install thresholding service on sentinel (Issue http://issues.opennms.org/browse/NMS-12180[NMS-12180])
* Postgres KeyValueStore implementation via JDBC (Issue http://issues.opennms.org/browse/NMS-12181[NMS-12181])
* Update warmerge plugin dependency to 0.5 (Issue http://issues.opennms.org/browse/NMS-12194[NMS-12194])
* Enhance Jaeger OpenTracing Logging with tag for thread name (Issue http://issues.opennms.org/browse/NMS-12195[NMS-12195])
* Upgrade Kafka components to 2.3.0 (Issue http://issues.opennms.org/browse/NMS-12203[NMS-12203])
* Add enhancements to DNS Resolver and Circuit Breaker (Issue http://issues.opennms.org/browse/NMS-12215[NMS-12215])
* Leverage telemetry sequencing for better thresholding performance (Issue http://issues.opennms.org/browse/NMS-12243[NMS-12243])
* Remove session lock from Drools in alarmd (Issue http://issues.opennms.org/browse/NMS-12244[NMS-12244])
* Karaf shell command for benchmarking performance of BlobStore (Issue http://issues.opennms.org/browse/NMS-12245[NMS-12245])
* Add support for STARTTLS to TLS certificate monitor (Issue http://issues.opennms.org/browse/NMS-12252[NMS-12252])
* Resource Graphs : Graph Selection fails to render when many resources are selected (Issue http://issues.opennms.org/browse/NMS-12256[NMS-12256])
* split shell utilities into a separate module (Issue http://issues.opennms.org/browse/NMS-12266[NMS-12266])
* allow using fetched RPMs in `build_container_image.sh` (Issue http://issues.opennms.org/browse/NMS-12271[NMS-12271])
* Add documentation about classification rule & group sorting (Issue http://issues.opennms.org/browse/NMS-12278[NMS-12278])
* Migrate resourcecli to the Karaf shell (Issue http://issues.opennms.org/browse/NMS-12280[NMS-12280])
* Add Karaf shell command to view raw sample stored in Newts (Issue http://issues.opennms.org/browse/NMS-12281[NMS-12281])
* Be able to execute ICMP requests through Java when running as non-root (Issue http://issues.opennms.org/browse/NMS-12283[NMS-12283])
* Update Minion packaging to use single RPM/Deb (Issue http://issues.opennms.org/browse/NMS-12300[NMS-12300])

