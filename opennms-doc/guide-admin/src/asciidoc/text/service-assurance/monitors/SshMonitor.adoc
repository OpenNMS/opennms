
// Allow GitHub image rendering
:imagesdir: ../../../images

==== SshMonitor

The _SshMonitor_ tests the availability of a _SSH_ service.
During the poll an attempt is made to connect on the specified port.
If the connection request is successful, then the service is considered up.
Optionaly, the banner line generated by the service may be parsed and compared against a pattern before the service is considered up.

===== Monitor facts

[options="autowidth"]
|===
| Class Name     | `org.opennms.netmgt.poller.monitors.SshMonitor`
| Remote Enabled | true
|===

===== Configuration and Usage

.Monitor specific parameters for the SshMonitor
[options="header, autowidth"]
|===
| Parameter       | Description                                                                               | Required | Default value
| `banner`        | Regular expression to be matched against the service's banner.                            | optional | `-`
| `client-banner` | The client banner that {opennms-product-name} will use to identify itself on the service. | optional | `SSH-1.99-OpenNMS_1.5`
| `match`         | Regular expression to be matched against the service's banner. +
                    Deprecated, please use the `banner` parameter instead. +
                    Note that this parameter takes precedence over the `banner` parameter, though.            | optional | `-`
| `port`          | _TCP_ port to which _SSH_ connection shall be tried.                                      | optional | `22`
| `retry`         | Number of attempts to establish the _SSH_ connnection.                                    | optional | `0`
|===

This monitor implements the <<ga-service-assurance-monitors-common-parameters, Common Configuration Parameters>>.

===== Examples

[source, xml]
----
<service name="SSH" interval="300000" user-defined="false" status="on">
  <parameter key="retry" value="1"/>
  <parameter key="banner" value="SSH"/>
  <parameter key="client-banner" value="OpenNMS poller"/>
  <parameter key="timeout" value="5000"/>
  <parameter key="rrd-repository" value="/var/lib/opennms/rrd/response"/>
  <parameter key="rrd-base-name" value="ssh"/>
  <parameter key="ds-name" value="ssh"/>
</service>
<monitor service="SSH" class-name="org.opennms.netmgt.poller.monitors.SshMonitor"/>
----
