commands:
  extract-pom-version:
      description: "Extracting Maven POM version"
      steps:
        - run:
            name: Extract Maven POM version
            command: .circleci/scripts/pom2version.sh pom.xml > pom-version-cache.key
  qemu-user-static:
    steps:
      - run:
          name: multiarch/qemu-user-static
          command: docker run --privileged multiarch/qemu-user-static --reset -p yes
  install-buildx:
    steps:
      - run:
          name: Install Docker buildx
          command: |
            sudo wget https://github.com/docker/buildx/releases/download/v0.5.1/buildx-v0.5.1.linux-amd64 -O /usr/local/bin/docker-buildx
            sudo chmod a+x /usr/local/bin/docker-buildx
            sudo systemctl restart docker
