jobs:
  horizon-image-single-arch-with-trivy:
    parameters:
      architecture:
        type: string
    machine:
      image: ubuntu-2204:current
      docker_layer_caching: false
    environment:
      DOCKER_CLI_EXPERIMENTAL: enabled
    steps:
      - build-image-single-arch-with-trivy:
          architecture: << parameters.architecture >>
          container_name: horizon
          container_dir: core
          tarball_match: -core
          tarball_path: opennms-full-assembly/target/
