import{d as E,j as m,o as c,k as l,q as J,ar as $e,c as x,v as y,f as D,u as t,O as se,az as ne,x as j,aW as ge,aX as ye,aY as _e,_ as Q,m as L,s as p,t as P,aK as te,aZ as re,B as T,D as W,F as U,a_ as Ce,a$ as qe,n as ve,a1 as ke,b0 as X,z as R,X as Ee,au as Oe,b1 as Ve,av as Be,b2 as je,b3 as He,b4 as Ue,b5 as Re,b6 as We,a5 as Fe,p as Qe,S as q,r as H,w as he,G as xe,a0 as le,y as ze,al as Ze,b7 as Pe,b as De,W as Ke,b8 as Je,b9 as Y,E as pe,aO as fe,aN as me,aq as Ge,as as Xe,ba as Ie,a6 as Ye}from"./index-CIzR5Qdh.js";import{F as et}from"./index-Cmkro6C2.js";import{u as Le}from"./nodeStore-DpPIkt6n.js";import{a as tt,K as st}from"./KeyboardArrowDown-CD7MJEgg.js";const nt={disabled:{type:Boolean,default:!1},checked:{type:Boolean,default:!1}},ot={click:s=>!0},at=E({emits:ot,props:nt,methods:{handleClick(s){this.disabled||this.$emit("click",s)}}}),rt=(s,e)=>{const o=s.__vccOpts||s;for(const[r,a]of e)o[r]=a;return o};function lt(s,e,o,r,a,i){return c(),m("div",{class:J(["switch-container",{checked:s.checked,disabled:s.disabled}]),onClick:e[0]||(e[0]=(...u)=>s.handleClick&&s.handleClick(...u))},e[1]||(e[1]=[l("div",{class:"track"},null,-1),l("div",{class:"switcher"},[l("div",{class:"switch-circle"})],-1)]),2)}const it=rt(at,[["render",lt],["__scopeId","data-v-32c3c0d3"]]),ct=(s,e)=>{const o=s.__vccOpts||s;for(const[r,a]of e)o[r]=a;return o},dt={},ut={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function pt(s,e){return c(),m("svg",ut,e[0]||(e[0]=[l("path",{d:"M19.45,13a7.79,7.79,0,0,0,.07-1,7.79,7.79,0,0,0-.07-1l2.11-1.65a.48.48,0,0,0,.12-.64l-2-3.46A.5.5,0,0,0,19.24,5a.47.47,0,0,0-.17,0l-2.5,1a7.31,7.31,0,0,0-1.69-1L14.5,2.42A.49.49,0,0,0,14,2H10a.49.49,0,0,0-.49.42L9.13,5.07a7.53,7.53,0,0,0-1.7,1l-2.49-1L4.76,5a.5.5,0,0,0-.44.25l-2,3.46a.49.49,0,0,0,.12.64L4.55,11a7.93,7.93,0,0,0-.07,1,7.93,7.93,0,0,0,.07,1L2.44,14.63a.5.5,0,0,0-.12.64l2,3.46a.5.5,0,0,0,.45.25.47.47,0,0,0,.17,0l2.49-1a7.17,7.17,0,0,0,1.7,1l.38,2.65A.49.49,0,0,0,10,22h4a.49.49,0,0,0,.49-.42l.38-2.65a7.68,7.68,0,0,0,1.69-1l2.5,1a.57.57,0,0,0,.18,0,.5.5,0,0,0,.43-.25l2-3.46a.48.48,0,0,0-.12-.64Zm-2-1.71a5.34,5.34,0,0,1,.05.73c0,.21,0,.43-.05.73l-.15,1.13.9.7,1.08.84-.7,1.21-1.28-.51-1-.42-.9.68a5.86,5.86,0,0,1-1.25.73l-1.07.43-.16,1.13L12.7,20H11.3l-.19-1.35L11,17.52l-1.06-.43a6,6,0,0,1-1.24-.71l-.91-.7-1.06.43-1.27.51-.7-1.21,1.08-.84.89-.7-.14-1.13c0-.31,0-.54,0-.74s0-.43,0-.73l.14-1.13-.89-.7L4.71,8.6l.7-1.21,1.27.51,1,.42.9-.68a6.16,6.16,0,0,1,1.26-.73l1.06-.43.16-1.13L11.3,4h1.39l.19,1.35L13,6.48l1.07.43a5.67,5.67,0,0,1,1.23.71l.91.7,1.06-.43,1.28-.51.7,1.21-1.07.85-.9.7Zm-5.4,3.57A2.88,2.88,0,1,1,15,12,2.9,2.9,0,0,1,12.07,14.84Z"},null,-1)]))}const ft=ct(dt,[["render",pt]]),mt=(s,e)=>{const o=s.__vccOpts||s;for(const[r,a]of e)o[r]=a;return o},gt={},yt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function _t(s,e){return c(),m("svg",yt,e[0]||(e[0]=[l("path",{d:"M18,11H8.83l3.29-3.29a1,1,0,0,0,0-1.42,1,1,0,0,0-1.41,0L5,12l5.71,5.71a1,1,0,1,0,1.41-1.41L8.83,13H18a1,1,0,0,0,0-2Z"},null,-1)]))}const Ne=mt(gt,[["render",_t]]),vt=s=>["tl1",...s.filter(o=>o.selected).map((o,r)=>{let a="tl";return o.id==="id"?a="tr":o.id==="flows"&&(a="tc"),`${a}${r+2}`})],Z=s=>s.lastIngressFlow&&$e(s.lastIngressFlow),K=s=>s.lastEgressFlow&&$e(s.lastEgressFlow),ht={key:1,style:{height:"40px"}},bt=E({__name:"FlowTooltipCell",props:{node:{required:!0,type:Object}},setup(s){const e=o=>Z(o)&&K(o)?"Has Ingress/Egress Flows":Z(o)?"Has Ingress Flows":K(o)?"Has Egress Flows":"";return(o,r)=>(c(),x(t(_e),{title:e(s.node),alignment:t(ye).center,placement:t(ge).top},{default:y(({attrs:a,on:i})=>[t(Z)(s.node)||t(K)(s.node)?(c(),m("div",se({key:0},a,ne(i,!0),{class:"pointer"}),[t(Z)(s.node)?(c(),x(t(j),{key:0,icon:t(Ne),class:"flow-icon"},null,8,["icon"])):D("",!0),t(Z)(s.node)&&t(K)(s.node)?(c(),m("br",ht)):D("",!0),t(K)(s.node)?(c(),x(t(j),{key:2,icon:t(Ne),class:"flow-icon egress"},null,8,["icon"])):D("",!0)],16)):D("",!0)]),_:1},8,["title","alignment","placement"]))}}),St=Q(bt,[["__scopeId","data-v-5eb561b1"]]),be=()=>({getBestIpInterfaceForNode:(e,o)=>{if(o.has(e)){const r=o.get(e)||[];let a=null;if(r.length===1?a=r[0]:r.length>1&&(a=r.find(i=>i.snmpPrimary==="P")||r.find(i=>i.isManaged==="M")||r[0]),a){const i=a.isManaged==="M",u=a.snmpPrimary||"",n=wt(u);return{label:a.ipAddress,managed:i,primaryLabel:n,primaryType:u}}}return{label:"",managed:!1,primaryLabel:"",primaryType:""}}}),wt=s=>{switch(s){case"P":return"Primary";case"S":return"Secondary";case"N":return"Not Eligible";default:return""}},It=["href"],Nt=E({__name:"ManagementIPTooltipCell",props:{computeNodeIpInterfaceLink:{required:!0,type:Function},node:{required:!0,type:Object},nodeToIpInterfaceMap:{required:!0,type:Object}},setup(s){const{getBestIpInterfaceForNode:e}=be(),o=s,r=L(()=>e(o.node.id,o.nodeToIpInterfaceMap)),a=L(()=>{const i=r.value.managed?"Managed":"Unmanaged",u=r.value.primaryLabel;return[i,u].join(", ")});return(i,u)=>(c(),m("td",{class:J(t(r).label?"pointer":"")},[p(t(_e),{title:t(a),alignment:t(ye).left,placement:t(ge).top},{default:y(({attrs:n,on:f})=>[l("a",se(n,ne(f,!0),{href:s.computeNodeIpInterfaceLink(s.node.id,t(r).label)}),P(t(r).label),17,It)]),_:1},8,["title","alignment","placement"])],2))}}),$t=(s,e)=>{const o=s.__vccOpts||s;for(const[r,a]of e)o[r]=a;return o},Ct={},kt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function Ft(s,e){return c(),m("svg",kt,e[0]||(e[0]=[l("circle",{cx:"12",cy:"6",r:"2"},null,-1),l("circle",{cx:"12",cy:"12",r:"2"},null,-1),l("circle",{cx:"12",cy:"18",r:"2"},null,-1)]))}const xt=$t(Ct,[["render",Ft]]),Pt={class:"node-menu-item"},Dt=E({__name:"NodeActionsDropdown",props:{baseHref:{required:!0,type:String},node:{required:!0,type:Object},triggerNodeInfo:{required:!0,type:Function}},setup(s){const e=s,o=te(xt),r=[{name:"events",label:"Events"},{name:"alarms",label:"Alarms"},{name:"view-outages",label:"Outages"},{name:"assets",label:"Assets"},{name:"metadata",label:"Metadata"},{name:"hardware",label:"Hardware Inventory"},{name:"availability",label:"Availability"},{name:"graphs",label:"Resource Graphs"},{name:"rescan",label:"Node Rescan"},{name:"admin",label:"Admin / Node Management"},{name:"updateSnmp",label:"Update SNMP Information"},{name:"schedule-outage",label:"Schedule an Outage"},{name:"topology",label:"View Topology Map"}],a=(u,n)=>{const f=i(u,n);window.location.assign(`${e.baseHref}${f}`)},i=(u,n)=>{switch(u){case"events":return`event/list?filter=node%3D${n.id}`;case"alarms":return`alarm/list.htm?filter=node%3D${n.id}`;case"view-outages":return`outage/list.htm?filter=node%3D${n.id}`;case"assets":return`asset/modify.jsp?node=${n.id}`;case"metadata":return`element/node-metadata.jsp?node=${n.id}`;case"hardware":return`hardware/list.jsp?node=${n.id}`;case"availability":return`element/availability.jsp?node=${n.id}`;case"graphs":return`graph/chooseresource.jsp?node=${n.id}&reports=all`;case"rescan":return`element/rescan.jsp?node=${n.id}`;case"admin":return`admin/nodemanagement/index.jsp?node=${n.id}`;case"updateSnmp":return`admin/updateSnmp.jsp?node=${n.id}&ipaddr=0.0.0.0`;case"schedule-outage":return`admin/sched-outages/editoutage.jsp?newName=${n.label}&addNew=true&nodeID=${n.id}`;case"topology":return`topology?provider=Enhanced+Linkd&szl=1&focus-vertices=${n.id}`;default:return""}};return(u,n)=>(c(),x(t(Ce),null,{trigger:y(({attrs:f,on:_})=>[p(t(U),se({icon:"Node Actions"},f,ne(_)),{default:y(()=>[p(t(j),{icon:t(o),class:"node-actions-icon"},null,8,["icon"])]),_:2},1040)]),default:y(()=>[p(t(re),{onClick:n[0]||(n[0]=f=>s.triggerNodeInfo(s.node))},{default:y(()=>n[1]||(n[1]=[l("span",{class:"node-menu-item"},"Info...",-1)])),_:1,__:[1]}),(c(),m(T,null,W(r,f=>p(t(re),{key:f.name,onClick:_=>a(f.name,s.node)},{default:y(()=>[l("span",Pt,P(f.label),1)]),_:2},1032,["onClick"])),64))]),_:1}))}}),Lt=Q(Dt,[["__scopeId","data-v-d0f8b2f8"]]),Mt=E({__name:"NodeDownloadDropdown",props:{onCsvDownload:{required:!0,type:Function},onJsonDownload:{required:!0,type:Function}},setup(s){const e=te(qe);return(o,r)=>(c(),x(t(Ce),{class:"node-download-dropdown"},{trigger:y(({attrs:a,on:i})=>[p(t(U),se({icon:"Download"},a,ne(i)),{default:y(()=>[p(t(j),{icon:t(e),class:"download-actions-icon",title:"Download"},null,8,["icon"])]),_:2},1040)]),default:y(()=>[p(t(re),{onClick:r[0]||(r[0]=a=>s.onCsvDownload())},{default:y(()=>r[2]||(r[2]=[l("span",{class:"download-menu-item"},"Download CSV...",-1)])),_:1,__:[2]}),p(t(re),{onClick:r[1]||(r[1]=a=>s.onJsonDownload())},{default:y(()=>r[3]||(r[3]=[l("span",{class:"download-menu-item"},"Download JSON...",-1)])),_:1,__:[3]})]),_:1}))}}),Tt=Q(Mt,[["__scopeId","data-v-1f5f6930"]]),At={class:"node-details-content"},qt={class:"feather-col-4"},Et={class:"label"},Ot={class:"feather-col-8"},Vt=["href"],Bt={key:1},B="--",jt=E({__name:"NodeDetailsDialog",props:{computeNodeLink:{required:!0,type:Function},computeNodeIpInterfaceLink:{required:!0,type:Function},visible:{required:!0,type:Boolean},node:{required:!1,type:Object}},emits:["close"],setup(s){const e=s,o=ve({title:"Node Details",close:"Close"}),r=Le(),{getBestIpInterfaceForNode:a}=be(),i=L(()=>{const n=a(e.node?.id||"",r.nodeToIpInterfaceMap);return[{label:"Node ID",text:e.node?.id,link:e.computeNodeLink(e.node?.id||0)},{label:"Node Label",text:e.node?.label,link:e.computeNodeLink(e.node?.id||0)},{label:"IP Address",text:n.label,link:e.computeNodeIpInterfaceLink(e.node?.id||0,n.label)},{label:"Location",text:e.node?.location},{label:"FS:FID",text:`${e.node?.foreignSource}:${e.node?.foreignId}`},{label:"Sys Contact",text:e.node?.sysContact||B},{label:"Sys Description",text:e.node?.sysDescription||B},{label:"Sys Location",text:e.node?.sysLocation||B},{label:"Sys Name",text:e.node?.sysName||B},{label:"Sys Object ID",text:e.node?.sysObjectId||B},{label:"Flows",text:u(e.node)},{label:"Latitude/Longitude",text:`${e.node?.assetRecord.latitude??B} / ${e.node?.assetRecord.longitude??B}`},{label:"Asset Category",text:e.node?.assetRecord.category||B},{label:"Asset Description",text:e.node?.assetRecord.description||B},{label:"Maintenance Contract",text:e.node?.assetRecord.maintcontract||B}]}),u=n=>{if(n){const f=[Z(n)?"Ingress":"",K(n)?"Egress":""].filter(_=>_.length>0);if(f.length===2)return`${f[0]} / ${f[1]}`;if(f.length===1)return f[0]}return B};return(n,f)=>(c(),x(t(ke),{modelValue:s.visible,relative:"",labels:t(o),"onUpdate:modelValue":f[0]||(f[0]=_=>n.$emit("close"))},{default:y(()=>[l("div",At,[(c(!0),m(T,null,W(t(i),_=>(c(),m("div",{class:"feather-row",key:_.label},[l("div",qt,[l("span",Et,P(_.label),1)]),l("div",Ot,[_.link?(c(),m("a",{key:0,href:_.link},P(_.text),9,Vt)):(c(),m("span",Bt,P(_.text),1))])]))),128))])]),_:1},8,["modelValue","labels"]))}}),Ht=Q(jt,[["__scopeId","data-v-cc7b980a"]]),Ut={class:"column-select-container"},Rt={class:"feather-row node-actions-reset"},Wt={class:"feather-col-3 centered"},Qt={class:"feather-row column-select-item-wrapper"},zt={class:"feather-col-9"},Zt={class:"feather-col-3 centered"},Kt=E({__name:"ColumnSelectionPanel",setup(s){const e=X(),o=te(tt),r=te(st),a=L(()=>e.columns),i=_=>{const d={..._,selected:!_.selected};e.updateNodeColumnSelection(d)},u=(_,d)=>{if(_&&d===0||!_&&d>=a.value.length-1)return;const S=[...a.value],$=S.splice(d,1);_?S.splice(d-1,0,$[0]):S.splice(d+1,0,$[0]),S.forEach((g,v)=>g.order=v),e.setNodeColumnSelection(S)},n=(_,d)=>{const S=["column-order-icon"];return _||S.push("column-order-icon-down"),_&&d>0||!_&&d<a.value.length-1?S.push("column-order-icon-active"):S.push("column-order-icon-inactive"),S},f=()=>{e.resetColumnSelectionToDefault()};return(_,d)=>(c(),m(T,null,[l("div",Ut,[l("div",Rt,[d[1]||(d[1]=l("div",{class:"feather-col-9"},null,-1)),l("div",Wt,[p(t(U),{secondary:"",onClick:f},{default:y(()=>d[0]||(d[0]=[R("Default")])),_:1,__:[0]})])])]),(c(!0),m(T,null,W(t(a),(S,$)=>(c(),m("div",{key:S.id},[l("div",Qt,[l("div",zt,[p(t(Ee),{class:"checkbox","onUpdate:modelValue":g=>i(S),modelValue:S.selected},{default:y(()=>[R(P(S.label),1)]),_:2},1032,["onUpdate:modelValue","modelValue"])]),l("div",Zt,[p(t(j),{icon:t(o),title:"Move Up",onClick:g=>u(!0,$),class:J(n(!0,$))},null,8,["icon","onClick","class"]),p(t(j),{icon:t(r),title:"Move Down",onClick:g=>u(!1,$),class:J(n(!1,$))},null,8,["icon","onClick","class"])])])]))),128))],64))}}),Jt=Q(Kt,[["__scopeId","data-v-ce6cc6a9"]]),Gt={class:"content"},Xt={class:"button-panel"},Yt=E({__name:"NodePreferencesDialog",props:{visible:{required:!0,type:Boolean}},emits:["close"],setup(s,{emit:e}){const o=e,r=X(),a=ve({title:"Node Preferences",close:"Close"}),i=async()=>{const u=await r.getNodePreferences();je(u),o("close",!0)};return(u,n)=>(c(),x(t(ke),{modelValue:s.visible,relative:"",labels:t(a),"onUpdate:modelValue":n[0]||(n[0]=f=>u.$emit("close"))},{default:y(()=>[l("div",Gt,[p(t(Oe),null,{tabs:y(()=>[p(t(Be),null,{default:y(()=>n[1]||(n[1]=[R("Columns")])),_:1,__:[1]})]),default:y(()=>[p(t(Ve),null,{default:y(()=>[p(Jt)]),_:1})]),_:1}),l("div",Xt,[p(t(U),{primary:"",onClick:i},{default:y(()=>n[2]||(n[2]=[R("Save and Close")])),_:1,__:[2]})])])]),_:1},8,["modelValue","labels"]))}}),es=Q(Yt,[["__scopeId","data-v-a2d1c60a"]]),ee=E({__name:"NodeTooltipCell",props:{text:{required:!0,type:String}},setup(s){return(e,o)=>(c(),m("td",{class:J(s.text?"pointer":"")},[s.text?(c(),x(t(_e),{key:0,title:s.text,alignment:t(ye).left,placement:t(ge).top},{default:y(({attrs:r,on:a})=>[l("span",se(r,ne(a,!0)),P(t(He)(s.text,30)),17)]),_:1},8,["title","alignment","placement"])):D("",!0)],2))}}),ts=()=>{const s=async(a,i)=>{if(a.length===0)return!1;const n={limit:0,_s:Re(a,i)},f=await We(n),_=new Map;if(f){for(const d of a){const S=f.ipInterface.filter($=>$.nodeId.toString()===d);_.set(d,S)}return _}return!1};return{generateBlob:(a,i)=>new Blob([a],{type:i}),generateDownload:(a,i)=>{const u=window.URL.createObjectURL(a),n=document.createElement("a");n.href=u,n.download=i,n.click()},getExportData:async(a,i,u)=>{const n={...i,offset:0,limit:0},f=await Ue(n);if(!f||!f.node||f.node.length===0)return console.error("Invalid response from getNodes, or no nodes found for the given search"),"";const d=f.node,S=d.map(F=>F.id),g=await s(S,!1),v=[],{getBestIpInterfaceForNode:w}=be();return d.forEach(F=>{const A=ss(u,F);A.ipaddress=w(F.id,g).label,v.push(A)}),a==="json"?JSON.stringify(v,null,2):a==="csv"?os(u,v).join(`
`):""}}},ss=(s,e)=>{const o={},r=s.filter(a=>a.selected);for(const a of r){let i=null;if(a.id==="flows"){const u=Z(e),n=K(e);u&&n?i="Ingress, Egress":u?i="Ingress":n&&(i="Egress")}else i=e[a.id];i!==null&&(o[a.id]=i)}return o},ns=s=>{if(s==null)return"";{let e=s.toString();return e.includes(",")&&(e=`"${e}"`),e}},os=(s,e)=>{const o=s.filter(i=>i.selected),r=o.map(i=>i.label).join(","),a=e.map(i=>{const n=o.map(f=>ns(i[f.id])).join(",");return n.endsWith(",")?n.slice(0,n.length-1):n});return[r,...a]},as={class:"card"},rs={class:"feather-row"},ls={class:"feather-col-6"},is={class:"feather-row"},cs={class:"feather-col-3 action-buttons-column"},ds={class:"action-buttons-container"},us={class:"feather-col-9 search-filter-column"},ps={class:"feather-row"},fs={class:"feather-col-12"},ms={id:"wrap",class:"node-table"},gs={key:1},ys={key:0},_s=["href","onClick"],vs={key:1},hs=["href","onClick"],bs={key:3},Ss={key:9},ws=E({__name:"NodesTable",setup(s){const e=Fe(),o=X(),r=Le(),{showSnackBar:a}=Qe(),i=te(ft),{generateBlob:u,generateDownload:n,getExportData:f}=ts(),{buildUpdatedNodeStructureQueryParameters:_}=Pe(),d=ve({id:q.NONE,label:q.ASCENDING,ipaddress:q.NONE,location:q.NONE,foreignSource:q.NONE,foreignId:q.NONE,sysContact:q.NONE,sysLocation:q.NONE,sysDescription:q.NONE,flows:q.NONE}),S=h=>{switch(h){case"id":return d.id;case"label":return d.label;case"ipaddress":return d.ipaddress;case"location":return d.location;case"foreignSource":return d.foreignSource;case"foreignId":return d.foreignId;case"sysContact":return d.sysContact;case"sysLocation":return d.sysLocation;case"sysDescription":return d.sysDescription;case"flows":return d.flows}return q.NONE},$=H(o.queryFilter.searchTerm||""),g=L(()=>r.nodes),v=L(()=>e.mainMenu),w=H(!1),F=H(),A=H(!1),ie=L(()=>vt(o.columns)),M=H(r.nodeQueryParameters),G=H(1),O=(h,k)=>h.selected&&h.id===k,ce=h=>{G.value=h;const k=M.value.limit||0;M.value={...M.value,offset:Math.max((h-1)*k,0)},r.setNodeQueryParameters(M.value),ae()},I=h=>{M.value={...M.value,limit:h},r.setNodeQueryParameters(M.value),ae()},C=h=>{if(h.property!=="ipaddress"){for(const k in d)d[k]=q.NONE;d[`${h.property}`]=h.value,M.value={...M.value,orderBy:h.property,order:h.value},ae({orderBy:h.property,order:h.value})}},N=(h="")=>{h!==o.queryFilter.searchTerm&&o.setSearchTerm(h)},z=async h=>{const k=_(M.value,o.queryFilter),b=await f(h,k,o.columns);if(!b){a({msg:`No data found for '${h}' download with the given search and filter configuration`,error:!0});return}const ue=u(b,h==="json"?"application/json":h==="csv"?"text/csv":"");n(ue,`Nodes.${h}`)},de=async()=>z("csv"),Me=async()=>z("json"),Te=h=>{F.value=h,w.value=!0},Ae=()=>{A.value=!0},oe=h=>`${v.value.baseHref}${v.value.baseNodeUrl}${h}`,Se=(h,k)=>`${v.value.baseHref}element/interface.jsp?node=${h}&intf=${k}`,we=h=>{window.location.assign(oe(h))},ae=h=>{Ze();const k=h?.orderBy?{...r.nodeQueryParameters,orderBy:h.orderBy,order:h.order||q.ASCENDING}:r.nodeQueryParameters,b=_(k,o.queryFilter);M.value=b,r.getNodes(b,!0)};return he([()=>o.queryFilter],()=>{o.queryFilter.searchTerm!==$.value&&($.value=o.queryFilter.searchTerm),ae()}),(h,k)=>(c(),m(T,null,[l("div",as,[l("div",rs,[k[4]||(k[4]=l("div",{class:"feather-col-6"},[l("span",{class:"title"},"Nodes")],-1)),l("div",ls,[l("div",is,[l("div",cs,[l("div",ds,[p(Tt,{onCsvDownload:de,onJsonDownload:Me}),p(t(U),{icon:"Open Preferences",onClick:Ae},{default:y(()=>[p(t(j),{icon:t(i),class:"node-actions-icon"},null,8,["icon"])]),_:1})])]),l("div",us,[p(t(xe),{modelValue:t($),"onUpdate:modelValue":[k[0]||(k[0]=b=>le($)?$.value=b:null),N],label:"Search node label"},null,8,["modelValue"])])])])]),l("div",ps,[l("div",fs,[l("div",ms,[l("table",{class:J(t(ie)),summary:"Nodes"},[l("thead",null,[l("tr",null,[k[5]||(k[5]=l("th",{scope:"column"},null,-1)),(c(!0),m(T,null,W(t(o).columns,b=>(c(),m(T,{key:b.id},[b.selected&&b.id!=="ipaddress"?(c(),x(t(ze),{key:0,scope:"col",property:b.id,sort:S(b.id),onSortChanged:C},{default:y(()=>[R(P(b.label),1)]),_:2},1032,["property","sort"])):D("",!0),b.selected&&b.id==="ipaddress"?(c(),m("th",gs,P(b.label),1)):D("",!0)],64))),128))])]),l("tbody",null,[(c(!0),m(T,null,W(t(g),b=>(c(),m("tr",{key:b.id},[l("td",null,[p(Lt,{baseHref:t(v).baseHref,node:b,triggerNodeInfo:Te},null,8,["baseHref","node"])]),(c(!0),m(T,null,W(t(o).columns,V=>(c(),m(T,{key:V.id},[O(V,"id")?(c(),m("td",ys,[l("a",{href:oe(b.id),onClick:ue=>we(b.id),target:"_blank"},P(b.id),9,_s)])):D("",!0),O(V,"label")?(c(),m("td",vs,[l("a",{href:oe(b.id),onClick:ue=>we(b.id),target:"_blank"},P(b.label),9,hs)])):D("",!0),O(V,"ipaddress")?(c(),x(Nt,{key:2,computeNodeIpInterfaceLink:Se,node:b,nodeToIpInterfaceMap:t(r).nodeToIpInterfaceMap},null,8,["node","nodeToIpInterfaceMap"])):D("",!0),O(V,"location")?(c(),m("td",bs,P(b.location),1)):D("",!0),O(V,"foreignSource")?(c(),x(ee,{key:4,text:b.foreignSource},null,8,["text"])):D("",!0),O(V,"foreignId")?(c(),x(ee,{key:5,text:b.foreignId},null,8,["text"])):D("",!0),O(V,"sysContact")?(c(),x(ee,{key:6,text:b.sysContact},null,8,["text"])):D("",!0),O(V,"sysLocation")?(c(),x(ee,{key:7,text:b.sysLocation},null,8,["text"])):D("",!0),O(V,"sysDescription")?(c(),x(ee,{key:8,text:b.sysDescription},null,8,["text"])):D("",!0),O(V,"flows")?(c(),m("td",Ss,[p(St,{node:b},null,8,["node"])])):D("",!0)],64))),128))]))),128))])],2)])])]),p(t(et),{modelValue:t(G),"onUpdate:modelValue":[k[1]||(k[1]=b=>le(G)?G.value=b:null),ce],pageSize:t(M).limit,total:t(r).totalCount,"onUpdate:pageSize":I},null,8,["modelValue","pageSize","total"])]),p(Ht,{computeNodeLink:oe,computeNodeIpInterfaceLink:Se,onClose:k[2]||(k[2]=b=>w.value=!1),visible:t(w),node:t(F)},null,8,["visible","node"]),p(es,{onClose:k[3]||(k[3]=b=>A.value=!1),visible:t(A)},null,8,["visible"])],64))}}),Is=Q(ws,[["__scopeId","data-v-1cc0b49b"]]),Ns=(s,e)=>{const o=s.__vccOpts||s;for(const[r,a]of e)o[r]=a;return o},$s={},Cs={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function ks(s,e){return c(),m("svg",Cs,e[0]||(e[0]=[l("path",{d:"M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20ZM14.59,8,12,10.59,9.41,8A1,1,0,0,0,8,8H8A1,1,0,0,0,8,9.41L10.59,12,8,14.59A1,1,0,0,0,8,16H8a1,1,0,0,0,1.41,0L12,13.41,14.59,16A1,1,0,0,0,16,16h0a1,1,0,0,0,0-1.41L13.41,12,16,9.41A1,1,0,0,0,16,8h0A1,1,0,0,0,14.59,8Z"},null,-1)]))}const Fs=Ns($s,[["render",ks]]),xs={class:"extended-search-container"},Ps=E({__name:"ExtendedSearchPanel",setup(s){const e=[{title:"Foreign Source",value:"foreignSource"},{title:"Foreign ID",value:"foreignId"},{title:"Foreign Source:Foreign ID",value:"foreignSourceId"},{title:"IP Address",value:"ipAddress"},{title:"Sys Contact",value:"sysContact"},{title:"Sys Description",value:"sysDescription"},{title:"Sys Location",value:"sysLocation"},{title:"Sys Name",value:"sysName"},{title:"Sys Object ID",value:"sysObjectId"},{title:"SNMP Alias",value:"snmpIfAlias"},{title:"SNMP Description",value:"snmpIfDescription"},{title:"SNMP Index",value:"snmpIfIndex"},{title:"SNMP Name",value:"snmpIfName"},{title:"SNMP Type",value:"snmpIfType"}],o=["foreignSource","foreignId","foreignSourceId"],r=["snmpIfAlias","snmpIfDescription","snmpIfIndex","snmpIfName","snmpIfType"],a=["sysContact","sysDescription","sysLocation","sysName","sysObjectId"],i=X(),u=H(""),n=H(void 0),f=g=>{const v=g??"",w=n.value?.value||"";if(w==="ipAddress")(v===""||Je(v))&&v!==i.queryFilter.extendedSearch.ipAddress&&i.setFilterWithIpAddress(v);else if(w.startsWith("foreign")){const F=i.queryFilter.extendedSearch.foreignSourceParams,A=(F&&F[w])??"";v!==A&&i.setFilterWithForeignSourceParams(w,v)}else if(w.startsWith("snmp")){const F=i.queryFilter.extendedSearch.snmpParams,A=(F&&F[w])??"";v!==A&&i.setFilterWithSnmpParams(w,v)}else if(w.startsWith("sys")){const F=i.queryFilter.extendedSearch.sysParams,A=(F&&F[w])??"";v!==A&&i.setFilterWithSysParams(w,v)}},_=g=>{g.value==="ipAddress"?i.setFilterWithIpAddress(u.value):(g.value||"").startsWith("foreign")?i.setFilterWithForeignSourceParams(g.value,u.value):(g.value||"").startsWith("sys")?i.setFilterWithSysParams(g.value,u.value):(g.value||"").startsWith("snmp")&&i.setFilterWithSnmpParams(g.value,u.value)},d=(g,v)=>{for(let w of v)if(g[w])return{value:g[w],searchOption:e.find(F=>F.value===w)}},S=g=>{if(g.extendedSearch.ipAddress)return d(g.extendedSearch,["ipAddress"]);if(g.extendedSearch.foreignSourceParams){const v=d(g.extendedSearch.foreignSourceParams,o);if(v)return v}if(g.extendedSearch.snmpParams){const v=d(g.extendedSearch.snmpParams,r);if(v)return v}if(g.extendedSearch.sysParams){const v=d(g.extendedSearch.sysParams,a);if(v)return v}},$=()=>{const g=S(i.queryFilter);g?(g.value!==u.value&&(u.value=g.value),n.value!==g.searchOption&&(n.value=g.searchOption)):u.value!==""&&(u.value="")};return he([()=>i.queryFilter],()=>{$()}),De(()=>{$()}),(g,v)=>(c(),m("div",xs,[p(t(Ke),{label:"Search Type",options:e,textProp:"title",modelValue:t(n),"onUpdate:modelValue":[v[0]||(v[0]=w=>le(n)?n.value=w:null),_]},null,8,["modelValue"]),p(t(xe),{modelValue:t(u),"onUpdate:modelValue":[v[1]||(v[1]=w=>le(u)?u.value=w:null),f],label:"Search Term"},null,8,["modelValue"])]))}}),Ds={class:"button-panel"},Ls={key:0},Ms={key:1},Ts={class:"category-button-group"},As={class:"category-switcher-container"},qs={key:0},Es={key:1},Os={key:0},Vs={key:1},Bs={class:"search-autocomplete-panel"},js=E({__name:"NodeStructurePanel",setup(s){const e=X(),o=H(Fs),r=L(()=>["Ingress","Egress"]),a=L(()=>e.queryFilter.categoryMode),i=L(()=>e.queryFilter.categoryMode===Y.Intersection),u=L(()=>e.monitoringLocations),n=L(()=>e.queryFilter.selectedCategories?.length||0),f=L(()=>e.queryFilter.selectedFlows?.length||0),_=L(()=>e.queryFilter.selectedMonitoringLocations?.length||0),d=L(()=>e.isAnyFilterSelected()),S=I=>e.queryFilter.selectedCategories.some(C=>C.id===I.id),$=I=>e.queryFilter.selectedFlows.some(C=>C===I),g=I=>e.queryFilter.selectedMonitoringLocations.some(C=>C.name===I.name),v=()=>{const I=a.value===Y.Union?Y.Intersection:Y.Union;e.setCategoryMode(I)},w=()=>{e.setSelectedCategories([])},F=()=>{e.setSelectedFlows([])},A=()=>{e.setSelectedMonitoringLocations([])},ie=()=>{e.clearAllFilters(Y.Union)},M=(I,C,N,z)=>C?N.filter(de=>z(de,I)):[...N,I],G=I=>{const C=M(I,S(I),e.queryFilter.selectedCategories,N=>N.id!==I.id);e.setSelectedCategories(C)},O=I=>{const C=M(I,$(I),e.queryFilter.selectedFlows,N=>N!==I);e.setSelectedFlows(C)},ce=I=>{const C=M(I,g(I),e.queryFilter.selectedMonitoringLocations,N=>N.name!==I.name);e.setSelectedMonitoringLocations(C)};return(I,C)=>(c(),m(T,null,[C[3]||(C[3]=l("h1",{class:"title"},"Filtering",-1)),l("div",Ds,[p(t(U),{primary:"",class:"category-btn",onClick:ie,disabled:!t(d)},{default:y(()=>C[0]||(C[0]=[R("Clear All")])),_:1,__:[0]},8,["disabled"])]),p(t(pe),null,{title:y(()=>[t(n)?(c(),m("div",Ls,[l("span",null,P(`Categories (${t(n)})`),1),p(t(U),{icon:"Clear",onClick:w},{default:y(()=>[p(t(j),{icon:t(o)},null,8,["icon"])]),_:1})])):(c(),m("div",Ms,"Categories"))]),default:y(()=>[l("div",Ts,[l("div",As,[C[1]||(C[1]=l("span",null,"Match All ",-1)),p(t(it),{class:"category-switcher-right",checked:t(i),onClick:v},null,8,["checked"])])]),p(t(fe),{class:"category-list"},{default:y(()=>[(c(!0),m(T,null,W(t(e).categories,N=>(c(),x(t(me),{selected:S(N),key:N.name,onClick:z=>G(N)},{default:y(()=>[R(P(N.name),1)]),_:2},1032,["selected","onClick"]))),128))]),_:1})]),_:1}),p(t(pe),null,{title:y(()=>[t(f)?(c(),m("div",qs,[l("span",null,P(`Flows (${t(f)})`),1),p(t(U),{icon:"Clear",onClick:F},{default:y(()=>[p(t(j),{icon:t(o)},null,8,["icon"])]),_:1})])):(c(),m("div",Es,"Flows"))]),default:y(()=>[p(t(fe),{class:"category-list"},{default:y(()=>[(c(!0),m(T,null,W(t(r),N=>(c(),x(t(me),{selected:$(N),key:N,onClick:z=>O(N)},{default:y(()=>[R(P(N),1)]),_:2},1032,["selected","onClick"]))),128))]),_:1})]),_:1}),p(t(pe),null,{title:y(()=>[t(_)?(c(),m("div",Os,[l("span",null,P(`Locations (${t(_)})`),1),p(t(U),{icon:"Clear",onClick:A},{default:y(()=>[p(t(j),{icon:t(o)},null,8,["icon"])]),_:1})])):(c(),m("div",Vs,"Locations"))]),default:y(()=>[p(t(fe),{class:"category-list"},{default:y(()=>[(c(!0),m(T,null,W(t(u),N=>(c(),x(t(me),{selected:g(N),key:N.name,onClick:z=>ce(N)},{default:y(()=>[R(P(N.name),1)]),_:2},1032,["selected","onClick"]))),128))]),_:1})]),_:1}),l("div",Bs,[C[2]||(C[2]=l("h1",{class:"title"},"Extended Search",-1)),p(Ps)])],64))}}),Hs=Q(js,[["__scopeId","data-v-2788d0e7"]]),Us={class:"feather-row"},Rs={class:"feather-col-12"},Ws={class:"feather-row"},Qs={class:"feather-col-12"},zs={class:"card"},Zs={class:"feather-row"},Ks={class:"feather-col-2"},Js={class:J("feather-col-10")},Gs=E({__name:"Nodes",setup(s){const e=Fe(),o=X(),{buildNodeQueryFilterFromQueryString:r,queryStringHasTrackedValues:a}=Pe(),i=Ge(),u=Xe(),n=L(()=>e.mainMenu?.homeUrl),f=L(()=>[{label:"Home",to:n.value,isAbsoluteLink:!0},{label:"Structured Node List",to:"#",position:"last"}]),_=d=>{if(a(i.query)){const S=r(i.query,o.categories,o.monitoringLocations),$={nodeColumns:d?.nodeColumns||[],nodeFilter:S};return o.setFromNodePreferences($),u.replace({name:"Nodes"}),!0}return!1};return De(()=>{const d=Ie();_(d)||d&&o.setFromNodePreferences(d)}),he(()=>i.query,()=>{const d=Ie();_(d)}),(d,S)=>(c(),m(T,null,[l("div",Us,[l("div",Rs,[p(Ye,{items:t(f)},null,8,["items"])])]),l("div",Ws,[l("div",Qs,[l("div",zs,[l("div",Zs,[l("div",Ks,[p(Hs)]),l("div",Js,[p(Is)])])])])])],64))}}),sn=Q(Gs,[["__scopeId","data-v-59931ff2"]]);export{sn as default};
