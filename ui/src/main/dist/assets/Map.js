const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mapStore.js","assets/index.js","assets/index.css"])))=>i.map(i=>d[i]);
import{N as _,ae as st,m as x,r as C,j as G,b as H,w as W,af as Pe,o as E,K as Ve,ag as lt,u as S,ah as it,c as X,ai as N,aj as rt,ak as pe,al as U,n as ut,am as q,an as Be,_ as ae,f as ze,d as se,ao as dt,H as Re,aa as ct,a0 as qe,v as $,k as L,z as Ne,t as D,s as j,x as Ze,ap as Ge,q as He,a5 as Je,B as ce,D as Ee,W as pt,l as mt,A as vt,aq as We,ar as ft,as as ht,at as yt,J as bt,au as gt,av as De,aw as Lt}from"./index.js";import{u as me,s as je,a as At,n as Fe}from"./mapStore.js";import{F as St}from"./index2.js";import{u as zt}from"./nodeStore.js";const Pt={__name:"splitpanes",props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],setup(e,{emit:o}){const n=o,t=e,c=it(),l=C([]),d=x(()=>l.value.reduce((i,u)=>(i[~~u.id]=u)&&i,{})),v=x(()=>l.value.length),h=C(null),b=C(!1),y=C({mouseDown:!1,dragging:!1,activeSplitter:null,cursorOffset:0}),p=C({splitter:null,timeoutId:null}),O=x(()=>({[`splitpanes splitpanes--${t.horizontal?"horizontal":"vertical"}`]:!0,"splitpanes--dragging":y.value.dragging})),P=()=>{document.addEventListener("mousemove",m,{passive:!1}),document.addEventListener("mouseup",A),"ontouchstart"in window&&(document.addEventListener("touchmove",m,{passive:!1}),document.addEventListener("touchend",A))},T=()=>{document.removeEventListener("mousemove",m,{passive:!1}),document.removeEventListener("mouseup",A),"ontouchstart"in window&&(document.removeEventListener("touchmove",m,{passive:!1}),document.removeEventListener("touchend",A))},M=(i,u)=>{const a=i.target.closest(".splitpanes__splitter");if(a){const{left:s,top:r}=a.getBoundingClientRect(),{clientX:f,clientY:z}="ontouchstart"in window&&i.touches?i.touches[0]:i;y.value.cursorOffset=t.horizontal?z-r:f-s}P(),y.value.mouseDown=!0,y.value.activeSplitter=u},m=i=>{y.value.mouseDown&&(i.preventDefault(),y.value.dragging=!0,requestAnimationFrame(()=>{I(F(i)),n("resize",l.value.map(u=>({min:u.min,max:u.max,size:u.size})))}))},A=()=>{y.value.dragging&&n("resized",l.value.map(i=>({min:i.min,max:i.max,size:i.size}))),y.value.mouseDown=!1,setTimeout(()=>{y.value.dragging=!1,T()},100)},k=(i,u)=>{"ontouchstart"in window&&(i.preventDefault(),t.dblClickSplitter&&(p.value.splitter===u?(clearTimeout(p.value.timeoutId),p.value.timeoutId=null,R(i,u),p.value.splitter=null):(p.value.splitter=u,p.value.timeoutId=setTimeout(()=>p.value.splitter=null,500)))),y.value.dragging||n("splitter-click",l.value[u])},R=(i,u)=>{let a=0;l.value=l.value.map((s,r)=>(s.size=r===u?s.max:s.min,r!==u&&(a+=s.min),s)),l.value[u].size-=a,n("pane-maximize",l.value[u]),n("resized",l.value.map(s=>({min:s.min,max:s.max,size:s.size})))},B=(i,u)=>{n("pane-click",d.value[u])},F=i=>{const u=h.value.getBoundingClientRect(),{clientX:a,clientY:s}="ontouchstart"in window&&i.touches?i.touches[0]:i;return{x:a-(t.horizontal?0:y.value.cursorOffset)-u.left,y:s-(t.horizontal?y.value.cursorOffset:0)-u.top}},g=i=>{i=i[t.horizontal?"y":"x"];const u=h.value[t.horizontal?"clientHeight":"clientWidth"];return t.rtl&&!t.horizontal&&(i=u-i),i*100/u},I=i=>{const u=y.value.activeSplitter;let a={prevPanesSize:Q(u),nextPanesSize:Y(u),prevReachedMinPanes:0,nextReachedMinPanes:0};const s=0+(t.pushOtherPanes?0:a.prevPanesSize),r=100-(t.pushOtherPanes?0:a.nextPanesSize),f=Math.max(Math.min(g(i),r),s);let z=[u,u+1],w=l.value[z[0]]||null,V=l.value[z[1]]||null;const Te=w.max<100&&f>=w.max+a.prevPanesSize,ke=V.max<100&&f<=100-(V.max+Y(u+1));if(Te||ke){Te?(w.size=w.max,V.size=Math.max(100-w.max-a.prevPanesSize-a.nextPanesSize,0)):(w.size=Math.max(100-V.max-a.prevPanesSize-Y(u+1),0),V.size=V.max);return}if(t.pushOtherPanes){const Ie=Z(a,f);if(!Ie)return;({sums:a,panesToResize:z}=Ie),w=l.value[z[0]]||null,V=l.value[z[1]]||null}w!==null&&(w.size=Math.min(Math.max(f-a.prevPanesSize-a.prevReachedMinPanes,w.min),w.max)),V!==null&&(V.size=Math.min(Math.max(100-f-a.nextPanesSize-a.nextReachedMinPanes,V.min),V.max))},Z=(i,u)=>{const a=y.value.activeSplitter,s=[a,a+1];return u<i.prevPanesSize+l.value[s[0]].min&&(s[0]=he(a).index,i.prevReachedMinPanes=0,s[0]<a&&l.value.forEach((r,f)=>{f>s[0]&&f<=a&&(r.size=r.min,i.prevReachedMinPanes+=r.min)}),i.prevPanesSize=Q(s[0]),s[0]===void 0)?(i.prevReachedMinPanes=0,l.value[0].size=l.value[0].min,l.value.forEach((r,f)=>{f>0&&f<=a&&(r.size=r.min,i.prevReachedMinPanes+=r.min)}),l.value[s[1]].size=100-i.prevReachedMinPanes-l.value[0].min-i.prevPanesSize-i.nextPanesSize,null):u>100-i.nextPanesSize-l.value[s[1]].min&&(s[1]=ye(a).index,i.nextReachedMinPanes=0,s[1]>a+1&&l.value.forEach((r,f)=>{f>a&&f<s[1]&&(r.size=r.min,i.nextReachedMinPanes+=r.min)}),i.nextPanesSize=Y(s[1]-1),s[1]===void 0)?(i.nextReachedMinPanes=0,l.value.forEach((r,f)=>{f<v.value-1&&f>=a+1&&(r.size=r.min,i.nextReachedMinPanes+=r.min)}),l.value[s[0]].size=100-i.prevPanesSize-Y(s[0]-1),null):{sums:i,panesToResize:s}},Q=i=>l.value.reduce((u,a,s)=>u+(s<i?a.size:0),0),Y=i=>l.value.reduce((u,a,s)=>u+(s>i+1?a.size:0),0),he=i=>[...l.value].reverse().find(u=>u.index<i&&u.size>u.min)||{},ye=i=>l.value.find(u=>u.index>i+1&&u.size>u.min)||{},be=()=>{var i;Array.from(((i=h.value)==null?void 0:i.children)||[]).forEach(u=>{const a=u.classList.contains("splitpanes__pane"),s=u.classList.contains("splitpanes__splitter");!a&&!s&&(u.remove(),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))})},le=(i,u,a=!1)=>{const s=i-1,r=document.createElement("div");r.classList.add("splitpanes__splitter"),a||(r.onmousedown=f=>M(f,s),typeof window<"u"&&"ontouchstart"in window&&(r.ontouchstart=f=>M(f,s)),r.onclick=f=>k(f,s+1)),t.dblClickSplitter&&(r.ondblclick=f=>R(f,s+1)),u.parentNode.insertBefore(r,u)},ge=i=>{i.onmousedown=void 0,i.onclick=void 0,i.ondblclick=void 0,i.remove()},J=()=>{var i;const u=Array.from(((i=h.value)==null?void 0:i.children)||[]);u.forEach(s=>{s.className.includes("splitpanes__splitter")&&ge(s)});let a=0;u.forEach(s=>{s.className.includes("splitpanes__pane")&&(!a&&t.firstSplitter?le(a,s,!0):a&&le(a,s),a++)})},te=({uid:i,...u})=>{const a=d.value[i];Object.entries(u).forEach(([s,r])=>a[s]=r)},Le=i=>{var u;let a=-1;Array.from(((u=h.value)==null?void 0:u.children)||[]).some(s=>(s.className.includes("splitpanes__pane")&&a++,s.isSameNode(i.el))),l.value.splice(a,0,{...i,index:a}),l.value.forEach((s,r)=>s.index=r),b.value&&U(()=>{J(),oe({addedPane:l.value[a]}),n("pane-add",{index:a,panes:l.value.map(s=>({min:s.min,max:s.max,size:s.size}))})})},ne=i=>{const u=l.value.findIndex(s=>s.id===i),a=l.value.splice(u,1)[0];l.value.forEach((s,r)=>s.index=r),U(()=>{J(),oe({removedPane:{...a}}),n("pane-remove",{removed:a,panes:l.value.map(s=>({min:s.min,max:s.max,size:s.size}))})})},oe=(i={})=>{!i.addedPane&&!i.removedPane?ie():l.value.some(u=>u.givenSize!==null||u.min||u.max<100)?Se(i):Ae(),b.value&&n("resized",l.value.map(u=>({min:u.min,max:u.max,size:u.size})))},Ae=()=>{const i=100/v.value;let u=0;const a=[],s=[];l.value.forEach(r=>{r.size=Math.max(Math.min(i,r.max),r.min),u-=r.size,r.size>=r.max&&a.push(r.id),r.size<=r.min&&s.push(r.id)}),u>.1&&K(u,a,s)},ie=()=>{let i=100;const u=[],a=[];let s=0;l.value.forEach(f=>{i-=f.size,f.givenSize!==null&&s++,f.size>=f.max&&u.push(f.id),f.size<=f.min&&a.push(f.id)});let r=100;i>.1&&(l.value.forEach(f=>{f.givenSize===null&&(f.size=Math.max(Math.min(i/(v.value-s),f.max),f.min)),r-=f.size}),r>.1&&K(r,u,a))},Se=({addedPane:i,removedPane:u}={})=>{let a=100/v.value,s=0;const r=[],f=[];(i?.givenSize??null)!==null&&(a=(100-i.givenSize)/(v.value-1).value),l.value.forEach(z=>{s-=z.size,z.size>=z.max&&r.push(z.id),z.size<=z.min&&f.push(z.id)}),!(Math.abs(s)<.1)&&(l.value.forEach(z=>{i?.givenSize!==null&&i?.id===z.id||(z.size=Math.max(Math.min(a,z.max),z.min)),s-=z.size,z.size>=z.max&&r.push(z.id),z.size<=z.min&&f.push(z.id)}),s>.1&&K(s,r,f))},K=(i,u,a)=>{let s;i>0?s=i/(v.value-u.length):s=i/(v.value-a.length),l.value.forEach((r,f)=>{if(i>0&&!u.includes(r.id)){const z=Math.max(Math.min(r.size+s,r.max),r.min),w=z-r.size;i-=w,r.size=z}else if(!a.includes(r.id)){const z=Math.max(Math.min(r.size+s,r.max),r.min),w=z-r.size;i-=w,r.size=z}}),Math.abs(i)>.1&&U(()=>{b.value&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})};W(()=>t.firstSplitter,()=>J()),W(()=>t.dblClickSplitter,i=>{[...h.value.querySelectorAll(".splitpanes__splitter")].forEach((u,a)=>{u.ondblclick=i?s=>R(s,a):void 0})}),Pe(()=>b.value=!1),H(()=>{be(),J(),oe(),n("ready"),b.value=!0});const re=()=>{var i;return pe("div",{ref:h,class:O.value},(i=c.default)==null?void 0:i.call(c))};return N("panes",l),N("indexedPanes",d),N("horizontal",x(()=>t.horizontal)),N("requestUpdate",te),N("onPaneAdd",Le),N("onPaneRemove",ne),N("onPaneClick",B),(i,u)=>(E(),X(rt(re)))}},Ue={__name:"pane",props:{size:{type:[Number,String]},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},setup(e){var o;const n=e,t=_("requestUpdate"),c=_("onPaneAdd"),l=_("horizontal"),d=_("onPaneRemove"),v=_("onPaneClick"),h=(o=st())==null?void 0:o.uid,b=_("indexedPanes"),y=x(()=>b.value[h]),p=C(null),O=x(()=>{const m=isNaN(n.size)||n.size===void 0?0:parseFloat(n.size);return Math.max(Math.min(m,T.value),P.value)}),P=x(()=>{const m=parseFloat(n.minSize);return isNaN(m)?0:m}),T=x(()=>{const m=parseFloat(n.maxSize);return isNaN(m)?100:m}),M=x(()=>{var m;return`${l.value?"height":"width"}: ${(m=y.value)==null?void 0:m.size}%`});return H(()=>{c({id:h,el:p.value,min:P.value,max:T.value,givenSize:n.size===void 0?null:O.value,size:O.value})}),W(()=>O.value,m=>t({uid:h,size:m})),W(()=>P.value,m=>t({uid:h,min:m})),W(()=>T.value,m=>t({uid:h,max:m})),Pe(()=>d(h)),(m,A)=>(E(),G("div",{ref_key:"paneEl",ref:p,class:"splitpanes__pane",onClick:A[0]||(A[0]=k=>S(v)(k,m._.uid)),style:lt(M.value)},[Ve(m.$slots,"default")],4))}},$e=(e,o)=>{let n;return function(...t){const c=this;n&&clearTimeout(n),n=setTimeout(()=>{e.apply(c,t),n=null},o)}},Ct=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),ue=e=>typeof e=="function",ve=(e,o,n)=>{for(const t in n){const c="set"+Ct(t);e[c]?W(()=>n[t],(l,d)=>{e[c](l,d)}):o[c]&&W(()=>n[t],l=>{o[c](l)})}},Ce=e=>{const o={};for(const n in e)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const t=n.slice(2).toLocaleLowerCase();o[t]=e[n]}return o},Mt=async e=>{const o=await Promise.all([q(()=>import("./marker-icon-2x.js"),[]),q(()=>import("./marker-icon.js"),[]),q(()=>import("./marker-shadow.js"),[])]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:o[0].default,iconUrl:o[1].default,shadowUrl:o[2].default})},Oe=e=>{const o=C(()=>console.warn(`Method ${e} has been invoked without being replaced`)),n=(...t)=>o.value(...t);return n.wrapped=o,N(e,n),n},_e=(e,o)=>e.wrapped.value=o,ee=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||void 0,fe="useGlobalLeaflet",Me={options:{type:Object,default:()=>({})}},xe=e=>({options:e.options,methods:{}}),Ye={...Me,pane:{type:String,default:"overlayPane"},attribution:{type:String,default:null},name:{type:String,custom:!0,default:void 0},layerType:{type:String,custom:!0,default:void 0},visible:{type:Boolean,custom:!0,default:!0}},Qe=(e,o,n)=>{const t=_("addLayer"),c=_("removeLayer"),{options:l,methods:d}=xe(e),v={...l,attribution:e.attribution,pane:e.pane},h=()=>t({leafletObject:o.value}),b=()=>c({leafletObject:o.value}),y={...d,setAttribution(p,O){this.$parent.leafletObject.attributionControl.removeAttribution(O).addAttribution(p)},setName(){b(),e.visible&&h()},setLayerType(){b(),e.visible&&h()},setVisible(p){o.value&&(p?h():b())},bindPopup({leafletObject:p}){if(!o.value||!ue(o.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}o.value.bindPopup(p)},bindTooltip({leafletObject:p}){if(!o.value||!ue(o.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}o.value.bindTooltip(p)},unbindTooltip(){const p=o.value&&ue(o.value.getTooltip)?o.value.getTooltip():null;p&&ue(p.unbindTooltip)&&p.unbindTooltip()},unbindPopup(){const p=o.value&&ue(o.value.getPopup)?o.value.getPopup():null;p&&ue(p.unbindPopup)&&p.unbindPopup()},updateVisibleProp(p){n.emit("update:visible",p)}};return N("bindPopup",y.bindPopup),N("bindTooltip",y.bindTooltip),N("unbindTooltip",y.unbindTooltip),N("unbindPopup",y.unbindPopup),Be(()=>{y.unbindPopup(),y.unbindTooltip(),b()}),{options:v,methods:y}},xt=(e,o)=>{if(e&&o.default)return pe("div",{style:{display:"none"}},o.default())},Tt={...Me,position:{type:String,default:"topright"}},It=(e,o)=>{const{options:n,methods:t}=xe(e),c={...n,position:e.position},l={...t,setPosition(d){o.value&&o.value.setPosition(d)}};return Be(()=>{o.value&&o.value.remove()}),{options:c,methods:l}},Ot={...Tt,collapsed:{type:Boolean,default:!0},autoZIndex:{type:Boolean,default:!0},hideSingleBase:{type:Boolean,default:!1},sortLayers:{type:Boolean,default:!1},sortFunction:{type:Function,default:void 0}},_t=(e,o)=>{const{options:n}=It(e,o);return{options:{...n,collapsed:e.collapsed,autoZIndex:e.autoZIndex,hideSingleBase:e.hideSingleBase,sortLayers:e.sortLayers,sortFunction:e.sortFunction},methods:{addLayer(l){l.layerType==="base"?o.value.addBaseLayer(l.leafletObject,l.name):l.layerType==="overlay"&&o.value.addOverlay(l.leafletObject,l.name)},removeLayer(l){o.value.removeLayer(l.leafletObject)}}}};var Ke={name:"LControlLayers",props:Ot,setup(e,o){const n=C({}),t=_(fe),c=_("registerLayerControl"),{options:l,methods:d}=_t(e,n);return H(async()=>{const{control:v}=t?ee.L:await q(()=>import("./leaflet-src.esm.js"),[]);n.value=v.layers(null,null,l),ve(d,n.value,e),c({...e,...d,leafletObject:n.value}),U(()=>o.emit("ready",n.value))}),{leafletObject:n.value}},render(){return null}};Ke.__file="src/components/LControlLayers.vue";const Nt={...Ye,pane:{type:String,default:"tilePane"},opacity:{type:Number,custom:!1,default:1},zIndex:{type:Number,default:1},tileSize:{type:Number,default:256},noWrap:{type:Boolean,default:!1},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:void 0}},kt=(e,o,n)=>{const{options:t,methods:c}=Qe(e,o,n);return{options:{...t,pane:e.pane,opacity:e.opacity,zIndex:e.zIndex,tileSize:e.tileSize,noWrap:e.noWrap,minZoom:e.minZoom,maxZoom:e.maxZoom},methods:{...c}}},wt={iconUrl:{type:String,custom:!0,default:null},iconRetinaUrl:{type:String,custom:!0,default:null},iconSize:{type:[Object,Array],custom:!0,default:null},iconAnchor:{type:[Object,Array],custom:!0,default:null},popupAnchor:{type:[Object,Array],custom:!0,default:()=>[0,0]},tooltipAnchor:{type:[Object,Array],custom:!0,default:()=>[0,0]},shadowUrl:{type:String,custom:!0,default:null},shadowRetinaUrl:{type:String,custom:!0,default:null},shadowSize:{type:[Object,Array],custom:!0,default:null},shadowAnchor:{type:[Object,Array],custom:!0,default:null},bgPos:{type:[Object,Array],custom:!0,default:()=>[0,0]},className:{type:String,custom:!0,default:""},options:{type:Object,custom:!0,default:()=>({})}};var Xe={name:"LIcon",props:{...wt,...Me},setup(e,o){const n=C(null),t=_(fe),c=_("canSetParentHtml"),l=_("setParentHtml"),d=_("setIcon");let v,h,b,y,p;const O=(m,A,k)=>{const R=m&&m.innerHTML;if(!A){k&&p&&c()&&l(R);return}const B=Ce(o.attrs);p&&h(p,B);const{options:F}=xe(e),g={...F,iconUrl:e.iconUrl,iconRetinaUrl:e.iconRetinaUrl,iconSize:e.iconSize,iconAnchor:e.iconAnchor,popupAnchor:e.popupAnchor,tooltipAnchor:e.tooltipAnchor,shadowUrl:e.shadowUrl,shadowRetinaUrl:e.shadowRetinaUrl,shadowSize:e.shadowSize,shadowAnchor:e.shadowAnchor,bgPos:e.bgPos,className:e.className,html:R||e.html};p=g.html?b(g):y(g),v(p,B),d(p)},P=()=>{U(()=>O(n.value,!0,!1))},T=()=>{U(()=>O(n.value,!1,!0))},M={setIconUrl:P,setIconRetinaUrl:P,setIconSize:P,setIconAnchor:P,setPopupAnchor:P,setTooltipAnchor:P,setShadowUrl:P,setShadowRetinaUrl:P,setShadowAnchor:P,setBgPos:P,setClassName:P,setHtml:P};return H(async()=>{const{DomEvent:m,divIcon:A,icon:k}=t?ee.L:await q(()=>import("./leaflet-src.esm.js"),[]);v=m.on,h=m.off,b=A,y=k,ve(M,{},e),new MutationObserver(T).observe(n.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),P()}),{root:n}},render(){const e=this.$slots.default?this.$slots.default():void 0;return pe("div",{ref:"root"},e)}};Xe.__file="src/components/LIcon.vue";var et={emits:["ready","update:zoom","update:center","update:bounds"],props:{...Me,center:{type:[Object,Array],default:()=>[0,0]},bounds:{type:[Array,Object],default:void 0},maxBounds:{type:[Array,Object],default:void 0},zoom:{type:Number,default:0},minZoom:{type:Number,default:void 0},maxZoom:{type:Number,default:void 0},paddingBottomRight:{type:Array,default:void 0},paddingTopLeft:{type:Array,default:void 0},padding:{type:Array,default:void 0},worldCopyJump:{type:Boolean,default:!1},crs:{type:[String,Object],default:"EPSG3857"},maxBoundsViscosity:{type:Number,default:void 0},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number,default:void 0},inertiaMaxSpeed:{type:Number,default:void 0},easeLinearity:{type:Number,default:void 0},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number,default:void 0},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:!1},useGlobalLeaflet:{type:Boolean,default:!0}},setup(e,o){const n=C(null),t=ut({ready:!1,leafletRef:{},layersToAdd:[],layersInControl:[]}),{options:c}=xe(e),l={...c,minZoom:e.minZoom,maxZoom:e.maxZoom,maxBounds:e.maxBounds,maxBoundsViscosity:e.maxBoundsViscosity,worldCopyJump:e.worldCopyJump,crs:e.crs,center:e.center,zoom:e.zoom,inertia:e.inertia,inertiaDeceleration:e.inertiaDeceleration,inertiaMaxSpeed:e.inertiaMaxSpeed,easeLinearity:e.easeLinearity,zoomAnimation:e.zoomAnimation,zoomAnimationThreshold:e.zoomAnimationThreshold,fadeAnimation:e.fadeAnimation,markerZoomAnimation:e.markerZoomAnimation},d=Oe("addLayer"),v=Oe("removeLayer"),h=Oe("registerControl"),b=Oe("registerLayerControl");N(fe,e.useGlobalLeaflet);const y={moveEndHandler(){o.emit("update:zoom",t.leafletRef.getZoom()),o.emit("update:center",t.leafletRef.getCenter()),o.emit("update:bounds",t.leafletRef.getBounds())},overlayAddHandler(P){const T=t.layersInControl.find(M=>M.name===P.name);T&&T.updateVisibleProp(!0)},overlayRemoveHandler(P){const T=t.layersInControl.find(M=>M.name===P.name);T&&T.updateVisibleProp(!1)}};H(async()=>{e.useGlobalLeaflet&&(ee.L=ee.L||await q(()=>import("./mapStore.js").then(g=>g.l),__vite__mapDeps([0,1,2])));const{map:P,CRS:T,Icon:M,latLngBounds:m,latLng:A,DomEvent:k}=e.useGlobalLeaflet?ee.L:await q(()=>import("./leaflet-src.esm.js"),[]);try{l.beforeMapMount&&await l.beforeMapMount()}catch(g){console.error(`The following error occurred running the provided beforeMapMount hook ${g.message}`)}await Mt(M);const R=typeof l.crs=="string"?T[l.crs]:l.crs;l.crs=R||T.EPSG3857;const B={addLayer(g){g.layerType!==void 0&&(t.layerControl===void 0?t.layersToAdd.push(g):t.layersInControl.find(Z=>Z.leafletObject._leaflet_id===g.leafletObject._leaflet_id)||(t.layerControl.addLayer(g),t.layersInControl.push(g))),g.visible!==!1&&t.leafletRef.addLayer(g.leafletObject)},removeLayer(g){g.layerType!==void 0&&(t.layerControl===void 0?t.layersToAdd=t.layersToAdd.filter(I=>I.name!==g.name):(t.layerControl.removeLayer(g.leafletObject),t.layersInControl=t.layersInControl.filter(I=>I.leafletObject._leaflet_id!==g.leafletObject._leaflet_id))),t.leafletRef.removeLayer(g.leafletObject)},registerLayerControl(g){t.layerControl=g,t.layersToAdd.forEach(I=>{t.layerControl.addLayer(I)}),t.layersToAdd=[],h(g)},registerControl(g){t.leafletRef.addControl(g.leafletObject)},setZoom(g){const I=t.leafletRef.getZoom();g!==I&&t.leafletRef.setZoom(g,{animate:e.noBlockingAnimations?!1:null})},setPaddingBottomRight(g){t.paddingBottomRight=g},setPaddingTopLeft(g){t.paddingTopLeft=g},setPadding(g){t.padding=g},setCrs(g){const I=t.leafletRef.getBounds();t.leafletRef.options.crs=g,t.leafletRef.fitBounds(I,{animate:!1,padding:[0,0]})},fitBounds(g){t.leafletRef.fitBounds(g,{animate:this.noBlockingAnimations?!1:null})},setBounds(g){if(!g)return;const I=m(g);if(!I.isValid())return;!(t.lastSetBounds||t.leafletRef.getBounds()).equals(I,0)&&(t.lastSetBounds=I,t.leafletRef.fitBounds(I,this.fitBoundsOptions))},setCenter(g){if(g==null)return;const I=A(g),Z=t.lastSetCenter||t.leafletRef.getCenter();(Z.lat!==I.lat||Z.lng!==I.lng)&&(t.lastSetCenter=I,t.leafletRef.panTo(I,{animate:this.noBlockingAnimations?!1:null}))}};_e(d,B.addLayer),_e(v,B.removeLayer),_e(h,B.registerControl),_e(b,B.registerLayerControl),t.leafletRef=P(n.value,l),ve(B,t.leafletRef,e);const F=Ce(o.attrs);t.leafletRef.on("moveend",$e(y.moveEndHandler,100)),t.leafletRef.on("overlayadd",y.overlayAddHandler),t.leafletRef.on("overlayremove",y.overlayRemoveHandler),k.on(t.leafletRef,F),t.ready=!0,U(()=>o.emit("ready",t.leafletRef))}),Pe(()=>{t.leafletRef&&t.leafletRef.remove()});const p=x(()=>t.leafletRef),O=x(()=>t.ready);return{root:n,ready:O,leafletObject:p}},render(){return pe("div",{style:{width:"100%",height:"100%"},ref:"root"},this.ready?this.$slots.default():{})}};et.__file="src/components/LMap.vue";const Et={...Ye,pane:{type:String,default:"markerPane"},draggable:{type:Boolean,custom:!0,default:!1},latLng:{type:[Object,Array],custom:!0,default:null},icon:{type:[Object],default:()=>{},custom:!1},zIndexOffset:{type:Number,custom:!1,default:null}},Bt=(e,o,n)=>{const{options:t,methods:c}=Qe(e,o,n),l={...t,...e},d={...c,setDraggable(v){o.value.dragging&&(v?o.value.dragging.enable():o.value.dragging.disable())},latLngSync(v){n.emit("update:latLng",v.latlng),n.emit("update:lat-lng",v.latlng)},setLatLng(v){if(v!=null&&o.value){const h=o.value.getLatLng();(!h||!h.equals(v))&&o.value.setLatLng(v)}}};return{options:l,methods:d}};var tt={name:"LMarker",props:Et,setup(e,o){const n=C({}),t=C(!1),c=_(fe),l=_("addLayer");N("canSetParentHtml",()=>!!n.value.getElement()),N("setParentHtml",h=>n.value.getElement().innerHTML=h),N("setIcon",h=>n.value.setIcon&&n.value.setIcon(h));const{options:d,methods:v}=Bt(e,n,o);return d.icon===void 0&&delete d.icon,H(async()=>{const{marker:h,DomEvent:b}=c?ee.L:await q(()=>import("./leaflet-src.esm.js"),[]);n.value=h(e.latLng,d);const y=Ce(o.attrs);b.on(n.value,y),n.value.on("move",$e(v.latLngSync,100)),ve(v,n.value,e),l({...e,...v,leafletObject:n.value}),t.value=!0,U(()=>o.emit("ready",n.value))}),{ready:t,leafletObject:n}},render(){return xt(this.ready,this.$slots)}};tt.__file="src/components/LMarker.vue";const Rt={...Me,content:{type:String,default:null}},Dt=(e,o)=>{const{options:n,methods:t}=xe(e),c={...t,setContent(l){o.value&&l!==null&&l!==void 0&&o.value.setContent(l)}};return{options:n,methods:c}},jt=e=>e.default?pe("div",{ref:"root"},e.default()):null,Ft={...Rt,latLng:{type:[Object,Array],default:()=>[]}},Ut=(e,o)=>{const{options:n,methods:t}=Dt(e,o),c=_("unbindPopup");return Pe(()=>{c()}),{options:n,methods:t}};var nt={name:"LPopup",props:Ft,setup(e,o){const n=C({}),t=C(null),c=_(fe),l=_("bindPopup"),{options:d,methods:v}=Ut(e,n);return H(async()=>{const{popup:h,DomEvent:b}=c?ee.L:await q(()=>import("./leaflet-src.esm.js"),[]);n.value=h(d),e.latLng!==void 0&&n.value.setLatLng(e.latLng),ve(v,n.value,e);const y=Ce(o.attrs);b.on(n.value,y),n.value.setContent(e.content||t.value),l({leafletObject:n.value}),U(()=>o.emit("ready",n.value))}),{root:t,leafletObject:n}},render(){return jt(this.$slots)}};nt.__file="src/components/LPopup.vue";const ot={...Nt,tms:{type:Boolean,default:!1},subdomains:{type:String,default:"abc"},detectRetina:{type:Boolean,default:!1},url:{type:String,default:null}},Vt=(e,o,n)=>{const{options:t,methods:c}=kt(e,o,n);return{options:{...t,tms:e.tms,subdomains:e.subdomains,detectRetina:e.detectRetina},methods:{...c}}};var at={props:ot,setup(e,o){const n=C({}),t=_(fe),c=_("addLayer"),{options:l,methods:d}=Vt(e,n,o);return H(async()=>{const{tileLayer:v,DomEvent:h}=t?ee.L:await q(()=>import("./leaflet-src.esm.js"),[]);n.value=v(e.url,l);const b=Ce(o.attrs);h.on(n.value,b),ve(d,n.value,e),c({...e,...d,leafletObject:n.value}),U(()=>o.emit("ready",n.value))}),{leafletObject:n}},render(){return null}};at.__file="src/components/LTileLayer.vue";({...ot});const qt="/opennms/ui/assets/Critical-icon.png",Zt="/opennms/ui/assets/Minor-icon.png",Gt="/opennms/ui/assets/Major-icon.png",we="/opennms/ui/assets/Normal-icon.png",Ht="data:image/png;base64,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",Jt=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),de=e=>typeof e=="function",Wt=(e,o,n)=>{for(const t in n){const c="set"+Jt(t);e[c]?W(()=>n[t],(l,d)=>{e[c](l,d)}):o[c]&&W(()=>n[t],l=>{o[c](l)})}},$t=e=>{const o={};for(const n in e)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const t=n.slice(2).toLocaleLowerCase();o[t]=e[n]}return o},Yt=e=>({options:e.options,methods:{}}),Qt=(e,o,n)=>{const t=_("addLayer"),c=_("removeLayer"),{options:l,methods:d}=Yt(e),v={...l,attribution:e.attribution,pane:e.pane},h=()=>t({leafletObject:o.value}),b=()=>c({leafletObject:o.value}),y={...d,setAttribution(p,O){this.$parent.leafletObject.attributionControl.removeAttribution(O).addAttribution(p)},setName(){b(),e.visible&&h()},setLayerType(){b(),e.visible&&h()},setVisible(p){o.value&&(p?h():b())},bindPopup({leafletObject:p}){if(!o.value||!de(o.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}o.value.bindPopup(p)},bindTooltip({leafletObject:p}){if(!o.value||!de(o.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}o.value.bindTooltip(p)},unbindTooltip(){const p=o.value&&de(o.value.getTooltip)?o.value.getTooltip():null;p&&de(p.unbindTooltip)&&p.unbindTooltip()},unbindPopup(){const p=o.value&&de(o.value.getPopup)?o.value.getPopup():null;p&&de(p.unbindPopup)&&p.unbindPopup()},updateVisibleProp(p){n.emit("update:visible",p)}};return N("bindPopup",y.bindPopup),N("bindTooltip",y.bindTooltip),N("unbindTooltip",y.unbindTooltip),N("unbindPopup",y.unbindPopup),Be(()=>{y.unbindPopup(),y.unbindTooltip(),b()}),{options:v,methods:y}},Kt=(e,o)=>{if(e&&o.default)return pe("div",{style:{display:"none"}},o.default())},Xt={options:{type:Object,default(){return{}}},onClusterClick:{type:Function}},en={name:"MarkerCluster",props:Xt,setup(e,o){const n=C({}),t=C(!1),c=_("addLayer"),l=_("removeLayer");N("canSetParentHtml",()=>!!n.value.getElement()),N("setParentHtml",v=>n.value.getElement().innerHTML=v),N("addLayer",v=>{n.value.addLayer(v.leafletObject)}),N("removeLayer",v=>{n.value.removeLayer(v.leafletObject)});const{methods:d}=Qt(e,n,o);return H(async()=>{const{bind:v,Browser:h,DivIcon:b,DomEvent:y,DomUtil:p,extend:O,FeatureGroup:P,featureGroup:T,Icon:M,icon:m,LatLng:A,LatLngBounds:k,LayerGroup:R,Map:B,Marker:F,marker:g,Path:I,Point:Z,Polygon:Q,Polyline:Y,popup:he,Util:ye}=await q(async()=>{const{bind:J,Browser:te,DivIcon:Le,DomEvent:ne,DomUtil:oe,extend:Ae,FeatureGroup:ie,featureGroup:Se,Icon:K,icon:re,LatLng:i,LatLngBounds:u,LayerGroup:a,Map:s,Marker:r,marker:f,Path:z,Point:w,Polygon:V,Polyline:Te,popup:ke,Util:Ie}=await import("./leaflet-src.esm.js");return{bind:J,Browser:te,DivIcon:Le,DomEvent:ne,DomUtil:oe,extend:Ae,FeatureGroup:ie,featureGroup:Se,Icon:K,icon:re,LatLng:i,LatLngBounds:u,LayerGroup:a,Map:s,Marker:r,marker:f,Path:z,Point:w,Polygon:V,Polyline:Te,popup:ke,Util:Ie}},[]),be={bind:v,Browser:h,DomEvent:y,DivIcon:b,DomUtil:p,extend:O,FeatureGroup:P,featureGroup:T,Icon:M,icon:m,LatLng:A,LatLngBounds:k,LayerGroup:R,Map:B,Marker:F,marker:g,Path:I,Point:Z,Polygon:Q,Polyline:Y,popup:he,Util:ye};window.L=be;const{MarkerClusterGroup:le}=await q(async()=>{const{MarkerClusterGroup:J}=await import("./leaflet.markercluster-src.js").then(te=>te.l);return{MarkerClusterGroup:J}},[]);n.value=new le(e.options);const ge=$t(o.attrs);y.on(n.value,ge),e.onClusterClick&&n.value.on("clusterclick",e.onClusterClick),Wt(d,n.value,e),c({...e,...d,leafletObject:n.value}),t.value=!0,U(()=>o.emit("ready",n.value))}),Pe(()=>n.value&&n.value._leaflet_id&&l({leafletObject:n.value})),{ready:t,leafletObject:n}},render(){return Kt(this.ready,this.$slots)}},tn={style:{display:"none"}};function nn(e,o,n,t,c,l){return E(),G("div",tn,[t.ready?Ve(e.$slots,"default",{key:0}):ze("",!0)])}const on=ae(en,[["render",nn]]),an=se({__name:"MapSearch",emits:["fly-to-node","set-bounding-box"],setup(e,{emit:o}){const n=o,t=me(),c=dt(),l=C(),d=C(!1),v=C(!1),h={noResults:"Searching..."},b=C(h),y=m=>{const A=m.map(k=>k.label);t.setSearchedNodeLabels(A),A.length&&(A.length===1?n("fly-to-node",A[0]):n("set-bounding-box",A))},p=m=>{b.value=h,O(m)},O=Re.debounce(async m=>{m&&(d.value=!0,await c.search(m),b.value={noResults:"No results found"},d.value=!1)},1e3),P=x(()=>c.searchResults.length>0&&c.searchResults[0]?c.searchResults[0].results:[]),T=x(()=>t.nodeSearchTerm),M=m=>{if(v.value){v.value=!1;const A=m?.[0].label;A&&y([{label:A}])}};return ct(async()=>{T.value&&(b.value=h,l.value=[{label:T.value}],d.value=!0,v.value=!0,await c.search(T.value),b.value={noResults:"No results found"},d.value=!1)}),W(P,m=>{M(m)}),(m,A)=>(E(),X(S(St),{modelValue:S(l),"onUpdate:modelValue":[A[0]||(A[0]=k=>qe(l)?l.value=k:null),y],type:"multi",results:S(P),label:"Search",class:"map-search",onSearch:p,loading:S(d),hideLabel:!0,"text-prop":"label",labels:S(b)},null,8,["modelValue","results","loading","labels"]))}}),sn=ae(an,[["__scopeId","data-v-04969d1f"]]),ln=["href"],rn={class:"larger-icon"},un=["href"],dn={class:"flex"},cn={class:"flex"},pn={class:"flex"},mn={class:"flex"},vn={class:"flex"},fn={class:"flex"},hn=se({__name:"MarkerPopup",props:{baseHref:{type:Object},baseNodeUrl:{type:Object},node:{type:Object,default:()=>{}},ipAddress:{type:Object},nodeLabelToAlarmSeverity:{type:Function,required:!0}},setup(e){const o=e,n=x(()=>je(o.node.assetRecord.latitude,6)),t=x(()=>je(o.node.assetRecord.longitude,6)),c=l=>`${o.baseHref}topology?provider=Enhanced Linkd&focus-vertices=${l.id}`;return(l,d)=>(E(),X(S(nt),null,{default:$(()=>[L("h3",null,[d[0]||(d[0]=Ne("Node: ",-1)),L("a",{href:`${e.baseNodeUrl}${e.node.id}`,target:"_blank"},D(e.node.label),9,ln)]),L("span",rn,[j(S(Ze),{icon:S(Ge)},null,8,["icon"])]),Ne(" "+D(S(n))+", "+D(S(t))+" ",1),d[7]||(d[7]=L("br",null,null,-1)),L("a",{href:c(e.node)},"View in Topology Map",8,un),d[8]||(d[8]=L("br",null,null,-1)),d[9]||(d[9]=L("br",null,null,-1)),L("div",dn,[d[1]||(d[1]=L("div",null,"IP Address:",-1)),L("div",null,D(e.ipAddress||"N/A"),1)]),L("div",cn,[d[2]||(d[2]=L("div",null,"IP Address:",-1)),L("div",null,D(e.ipAddress||"N/A"),1)]),L("div",pn,[d[3]||(d[3]=L("div",null,"Description:",-1)),L("div",null,D(e.node.assetRecord.description||"N/A"),1)]),L("div",mn,[d[4]||(d[4]=L("div",null,"Maint. Contract:",-1)),L("div",null,D(e.node.assetRecord.maintcontract||"N/A"),1)]),L("div",vn,[d[5]||(d[5]=L("div",null,"Severity:",-1)),L("div",null,[L("span",{class:He(["alarm-severity",`${e.nodeLabelToAlarmSeverity(e.node.label)}`])},D(e.nodeLabelToAlarmSeverity(e.node.label)),3)])]),L("div",fn,[d[6]||(d[6]=L("div",null,"Category:",-1)),L("div",null,D(e.node.categories.length?e.node.categories[0].name:"N/A"),1)])]),_:1,__:[7,8,9]}))}}),yn=ae(hn,[["__scopeId","data-v-63b2123d"]]),bn={key:0,class:"marker-cluster-popup",ref:"clusterPopupContent"},gn={class:"marker-cluster-popup-content"},Ln={class:"marker-cluster-header-info"},An={class:"col"},Sn={class:"larger-icon"},zn={class:"col"},Pn=["href"],Cn={id:"wrap"},Mn=["href"],xn=se({__name:"MarkerClusterPopupContent",props:{cluster:{type:Object,default:()=>{}},ipListForNode:{type:Function,required:!0}},setup(e){const o=e,n=me(),t=Je(),c=x(()=>t.mainMenu),l=x(()=>`${c.value.baseHref}${c.value.baseNodeUrl}`),d=x(()=>n.getNodes()),v=x(()=>n.getNodeAlarmSeverityMap()),h=x(()=>o.cluster.getLatLng().lat.toFixed(6)),b=x(()=>o.cluster.getLatLng().lng.toFixed(6)),y=T=>o.ipListForNode(T).map(m=>m?.ipAddress).join(", ")||"N/A",p=T=>{const M=T.options.name;return d.value.find(m=>m.label===M)||null},O=()=>{const M=o.cluster.getAllChildMarkers().map(m=>p(m)?.id||"").filter(m=>m.length>0).join(",");return`${c.value.baseHref}topology?provider=Enhanced Linkd&focus-vertices=${M}`},P=()=>{const m=o.cluster.getAllChildMarkers().map(A=>p(A)).filter(A=>A!==null).map(A=>{const k=A?.id||"",R=k&&`${l.value}${k}`||"#",B=A?.assetRecord?.description||"N/A",F=v.value[A?.label||""],g=y(A);return{name:A?.label||"",description:B,id:k,ipAddress:g,link:R,severity:F}});return Re.orderBy(m,"name","asc")};return(T,M)=>e.cluster?(E(),G("div",bn,[L("div",gn,[L("h3",null,"Nodes: "+D(e.cluster.getChildCount()),1),M[1]||(M[1]=L("br",null,null,-1)),L("div",Ln,[L("div",An,[L("span",Sn,[j(S(Ze),{icon:S(Ge)},null,8,["icon"])]),L("span",null,D(S(h))+", "+D(S(b)),1)]),L("div",zn,[L("span",null,[L("a",{href:O()},"View in Topology Map",8,Pn)])])]),M[2]||(M[2]=L("br",null,null,-1)),L("div",Cn,[L("table",null,[M[0]||(M[0]=L("thead",null,[L("th",null,"Node"),L("th",null,"IP Address"),L("th",null,"Status")],-1)),L("tbody",null,[(E(!0),G(ce,null,Ee(P(),m=>(E(),G("tr",{key:m.name},[L("td",null,[L("a",{href:m.link},D(m.name),9,Mn)]),L("td",null,D(m.ipAddress),1),L("td",null,[L("div",{class:He(["alarm-severity",`${m.severity||"NORMAL"}`])},[L("span",null,D(m.severity||"NORMAL"),1)],2)])]))),128))])])])])],512)):ze("",!0)}}),Tn=ae(xn,[["__scopeId","data-v-2de62659"]]),In=se({__name:"SeverityFilter",setup(e){const o=me(),n=[{id:"NORMAL",option:"Normal"},{id:"WARNING",option:"Warning"},{id:"MINOR",option:"Minor"},{id:"MAJOR",option:"Major"},{id:"CRITICAL",option:"Critical"}],t=C(n[0]),c=()=>o.setSelectedSeverity(t.value.id);return(l,d)=>(E(),X(S(pt),{class:"severity-select",modelValue:S(t),"onUpdate:modelValue":[d[0]||(d[0]=v=>qe(t)?t.value=v:null),c],options:n,"text-prop":"option",label:"Show Severity >="},null,8,["modelValue"]))}}),On=mt("ipInterfacesStore",()=>{const e=C([]);return{ipInterfaces:e,getAllIpInterfaces:async n=>{const t=n||{limit:5e3,offset:0},c=await vt.getIpInterfaces(t);c&&(e.value=[...c.ipInterface])}}}),_n={class:"geo-map"},Nn={class:"marker-cluster-popup-hide"},kn=25,wn=42,En=se({__name:"LeafletMap",setup(e,{expose:o}){const n=On(),t=me(),c=Je(),l=zt(),d=C(),v=We(),h=C(!1),b=C({}),y=C(!1),p=C(),O=C(),P=C(2),T=[kn,wn],M=a=>ft(a)?Number(a):parseFloat(""+a),m=x(()=>{const{latitude:a,longitude:s}=t.mapCenter;return[a,s].map(f=>M(f))}),A=x(()=>t.getNodes()),k=x(()=>t.nodesWithCoordinates),R=x(()=>{const a=ne.value;return A.value.map(r=>a.get(r.id)).filter(r=>r!==void 0).map(r=>[M(r.latitude),M(r.longitude)])}),B=x(()=>t.getNodeAlarmSeverityMap()),F=x(()=>c.mainMenu),g=x(()=>`${F.value.baseHref}${F.value.baseNodeUrl}`),I=x(()=>n.ipInterfaces),Z=x(()=>{const a=new Map;for(let s of I.value){const r=s.nodeId.toString();a.has(r)?a.get(r)?.push(s):a.set(r,[s])}return a}),Q=a=>{const s=a?.id||"";return s&&Z.value.get(s)||[]},Y=a=>{const s=Q(a);return s.length>0&&s[0].ipAddress||""},he=a=>B.value[a]||"NORMAL",ye=a=>{let s="NORMAL";for(const r of a)Fe(r)>Fe(s)&&(s=r);return s},be=a=>{const s=a.getAllChildMarkers(),r=[];for(const z of s){const w=B.value[z.options.name];w&&r.push(w)}const f=ye(r);return At.divIcon({html:`<span class=${f}>`+a.getChildCount()+"</span>"})},le=async a=>{const s=a.layer;await ge(s),J(s)},ge=async a=>{O.value=a,y.value=!0,await U()},J=a=>{const s=p.value.$refs.clusterPopupContent.innerHTML,r={};window.L.popup(r).setLatLng(a.getLatLng()).setContent(s).openOn(d.value.leafletObject)},te=a=>Le(B.value[a.label]),Le=a=>{if(a)switch(a.toUpperCase()){case"NORMAL":return we;case"WARNING":return Ht;case"MINOR":return Zt;case"MAJOR":return Gt;case"CRITICAL":return qt;default:return we}return we},ne=x(()=>{const a=new Map;return k.value.forEach(s=>{const r={latitude:s.assetRecord.latitude,longitude:s.assetRecord.longitude};a.set(s.id,r),a.set(s.label,r)}),a}),oe=async()=>{if(await U(),b.value=d.value.leafletObject,b.value!==void 0&&b.value!==null){if(b.value.zoomControl.setPosition("topright"),h.value=!0,await U(),t.setMapBounds(b.value.getBounds()),await U(),R.value.length>0)try{b.value.fitBounds(R.value.map(a=>[a[0],a[1]]))}catch(a){console.log(a,`Invalid bounds array: ${R.value}`)}v.query.nodeid&&ie(v.query.nodeid)}},Ae=()=>{P.value=b.value.getZoom(),t.setMapBounds(b.value.getBounds())},ie=a=>{const r=ne.value.get(a);r&&b.value.flyTo([r.latitude,r.longitude],7)},Se=a=>{const s=ne.value,r=a.map(f=>s.get(f));r.length&&b.value.fitBounds(r.map(f=>[f.latitude,f.longitude]))},K=()=>b.value.invalidateSize(),re=[{name:"OpenStreetMap",visible:!0,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},{name:"OpenTopoMap",visible:!1,url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}],i=C(re),u=()=>{if(F.value.userTileProviders&&F.value.userTileProviders?.length>0){const a=F.value.userTileProviders[0];a.userDefinedAsDefault?i.value=[{...a,visible:!0},...re.map(s=>({...s,visible:!1}))]:i.value.push({...a,visible:!1})}};return H(async()=>{t.fetchNodes(),t.fetchAlarms(),l.getNodes(),n.getAllIpInterfaces(),u()}),o({invalidateSizeFn:K}),(a,s)=>(E(),G(ce,null,[L("div",_n,[j(sn,{class:"search-bar",onFlyToNode:ie,onSetBoundingBox:Se}),j(In),j(S(et),{ref_key:"map",ref:d,center:S(m),"max-zoom":19,"min-zoom":2,useGlobalLeaflet:!1,zoomAnimation:!0,onReady:oe,onMoveend:Ae,onZoom:K},{default:$(()=>[S(h)?(E(),G(ce,{key:0},[j(S(Ke)),(E(!0),G(ce,null,Ee(S(i),r=>(E(),X(S(at),{key:r.name,name:r.name,visible:r.visible,url:r.url,attribution:r.attribution,"layer-type":"base"},null,8,["name","visible","url","attribution"]))),128)),j(on,{options:{showCoverageOnHover:!0,chunkedLoading:!0,disableClusteringAtZoom:19,zoomToBoundsOnClick:!1,iconCreateFunction:be},onClusterClick:le},{default:$(()=>[(E(!0),G(ce,null,Ee(S(A),r=>(E(),X(S(tt),{key:r.label,"lat-lng":[r.assetRecord.latitude,r.assetRecord.longitude],name:r.label},{default:$(()=>[j(yn,{baseHref:S(F).baseHref,baseNodeUrl:S(g),node:r,ipAddress:Y(r),nodeLabelToAlarmSeverity:he},null,8,["baseHref","baseNodeUrl","node","ipAddress"]),j(S(Xe),{"icon-url":te(r),"icon-size":T},null,8,["icon-url"])]),_:2},1032,["lat-lng","name"]))),128))]),_:1},8,["options"])],64)):ze("",!0)]),_:1},8,["center"])]),L("div",Nn,[S(y)?(E(),X(Tn,{key:0,cluster:S(O),ipListForNode:Q,ref_key:"clusterPopupContent",ref:p},null,8,["cluster"])):ze("",!0)])],64))}}),Bn=ae(En,[["__scopeId","data-v-f2824715"]]),Rn=se({__name:"GridTabs",setup(e){const o=me(),n=ht(),t=We(),c=x(()=>o.getNodes()),l=x(()=>o.getAlarms()),d=C(),v=C(),h=()=>n.push(`/map${t.query.nodeid?"?nodeid="+t.query.nodeid:""}`),b=()=>n.push("/map/nodes");return yt(()=>{n.currentRoute.value.name==="MapAlarms"?d.value.tab.click():v.value.tab.click()}),(y,p)=>{const O=bt("router-view");return E(),G(ce,null,[j(S(gt),{class:"tabs"},{tabs:$(()=>[j(S(De),{ref_key:"alarmTab",ref:d,onClick:h},{default:$(()=>[Ne("Alarms("+D(S(l).length)+")",1)]),_:1},512),j(S(De),{ref_key:"nodesTab",ref:v,onClick:b},{default:$(()=>[Ne("Nodes("+D(S(c).length)+")",1)]),_:1},512)]),_:1}),j(O)],64)}}}),Dn=ae(Rn,[["__scopeId","data-v-233ac97d"]]),jn={class:"feather-row"},Fn={class:"feather-col-12"},Un={name:"MapKeepAlive"},Vn=se({...Un,setup(e){const o=me(),{startSpinner:n,stopSpinner:t}=Lt(),c=C(),l=C(!1),d=C(),v=Re.debounce(()=>d.value.invalidateSizeFn(),200),h=()=>{c.value.panes[0].size=96,c.value.panes[1].size=4,v()};return H(async()=>{n(),await o.getNodes(),await o.getAlarms(),t(),v(),l.value=!0}),(b,y)=>(E(),G("div",jn,[L("div",Fn,[j(S(Pt),{"dbl-click-splitter":!0,onPaneMaximize:h,class:"default-theme",horizontal:"",style:{height:"calc(100vh - 80px)"},ref_key:"split",ref:c,onResize:S(v)},{default:$(()=>[j(S(Ue),{"min-size":"1","max-size":"100",size:72},{default:$(()=>[S(l)?(E(),X(Bn,{key:0,ref_key:"leafletComponent",ref:d},null,512)):ze("",!0)]),_:1}),j(S(Ue),{"min-size":"1","max-size":"100",size:28,class:"bottom-pane"},{default:$(()=>[j(Dn)]),_:1})]),_:1},8,["onResize"])])]))}}),Jn=ae(Vn,[["__scopeId","data-v-e9203212"]]);export{Jn as default};
